[{"id":"927d9689.f973b8","type":"tab","label":"Data, Variables, Misc","disabled":false,"info":""},{"id":"811eb35.554d75","type":"tab","label":"Actuator Motor","disabled":false,"info":""},{"id":"dea9ee4a.091b4","type":"tab","label":"Sensor, Detection, Alarm","disabled":false,"info":""},{"id":"c93f0a4.b6458f8","type":"tab","label":"Dashboard Ventilator","disabled":false,"info":""},{"id":"9676a003.8e781","type":"subflow","name":"Stepper Motor","info":"","category":"","in":[{"x":160,"y":100,"wires":[{"id":"ba32bdc0.646c4"}]}],"out":[{"x":1044,"y":79,"wires":[{"id":"e922314a.2bd91","port":0}]},{"x":1041,"y":137,"wires":[{"id":"e922314a.2bd91","port":1}]},{"x":1042,"y":189,"wires":[{"id":"e922314a.2bd91","port":2}]},{"x":1044,"y":242,"wires":[{"id":"e922314a.2bd91","port":3}]},{"x":1025,"y":379,"wires":[{"id":"e922314a.2bd91","port":4},{"id":"ced5034a.6b276","port":0}]}],"env":[],"color":"#DDAA99"},{"id":"c0edb341.079af","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5e88a07f.e6f86","bb9fcbb1.acd158","882342da.e0942","35a3a2e2.a5afee","80472590.d2d698","e778f1fb.dab7a","ffe7da55.d08728","79ac44c2.ed19ec","d5f8eaa7.907528","19138413.aac3dc","3abec5f6.567fca","f636fcc0.1f062","cd6e9204.002c","cc5825ee.345538","b3adb965.826e88","afa89ba1.0ac958","20f1727a.c7cbae","66ef599a.f8bf88","48f24506.d4a15c","a2086e34.000e4","5bbb1b3e.8bfea4","619dd749.6a3348","c22e7566.d7b8f8","67941788.e83478","77d42fa5.646ae","2da04a7c.935486","b2d15fd1.975d1","58c1336.f505fcc","5094d9d0.430828","78afa45b.f5d8cc"],"x":2254,"y":59,"w":1272,"h":482},{"id":"c0b40019.d397e","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["935cf2f3.9d7dc","3883043c.ec8ebc","7dcd2dac.a74fd4","81c98fbd.049c5","9989696a.f12908","15b1833.368aa7d","521e3996.45eb08","d4677d0e.7082b","2fb2975f.2706f8","444161a4.dc192","fc39579.30271a8","5cb0e669.cbfb38","3d1f0add.9b81b6","6880e012.f5f81","3fe076d5.bf8d1a","fe052752.cd2f28","70fa15c9.c304bc","64754597.fd2eec","c4588388.3e091","931e3130.5243c","c24a972a.55d178","f0db4543.2ebc68","b9f16117.0762b","10dbb6b4.d290f9","f9bde4a1.351138","fe83ac2f.cc91b"],"x":94,"y":559,"w":2058,"h":1668},{"id":"c66d817.a4bf98","type":"group","z":"c93f0a4.b6458f8","name":"","style":{"label":true},"nodes":["521b8d27.5679d4","7787792a.e68a58","acad48b4.aa9bb8","3d544398.14513c","7f1809de.437c08","15797935.2c3517","1132d44a.6458ac","3d55b072.fee8a","a9a19f0b.e4387","dc866e91.0791","acd5efb4.37732","bc0ce399.02a89"],"x":74,"y":39,"w":1982,"h":382},{"id":"f0d1dfc.c11442","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8d003b94.d35488","a772d667.9b5a28","3ecd962a.400ffa","505bd194.795e4","55c40077.4f1d2","acc93153.00fba","646e5b3b.61bf04","f82ef56.43ee908","61fad3fb.d5995c","924b70ed.f3b9e","d53834f8.3a0f58","7f65951b.d8013c","8d3be24f.3ef15","3b558192.dbca0e","d43b28c4.d5e518","67e71111.abb87","9238e2a3.a29a3","cc4db28b.b72e5","205d6b9.df4d594","1c5beba5.0b7574","b24b0358.7817d","8072b05d.43ac5","5b6c4cd3.506184","618983e2.16c35c","1c238410.44832c","b528f391.506c6","2765e91d.b62e66","c47486ac.af3588","389753b7.d4041c"],"x":2274,"y":639,"w":1432,"h":402},{"id":"5c8932c0.69648c","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b5d4feaa.9c5ca","88bef651.41bf98","1603f457.bdc07c","6a1479e9.e854e8","a9c1c1ac.03224","c97879f.7824a88","3e08ef37.7fee6","ee2bb3b9.7b58f","fca65259.0e27a","1ac22011.84cef","c7a5b443.bbc4b8","b07c5ad.b5772a8","f8ba8a68.388118","9b3a8cd1.743b5","6cf4d61f.7ccda8","4b5c751b.13657c","df3fd5bf.45dc08","eb2fb475.920138","7a1a5966.048608"],"x":2294,"y":2284,"w":1181,"h":317},{"id":"3da362dd.11252e","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d4ee76c2.406848","1a785e9e.87d6f1","885b4c8e.11abe","a3a1de63.6168a","594534e6.26227c","46ffff78.efd13","dbc382b8.c3508","5ee3f355.c6557c","19d3c13a.ce10df","70d3efb9.9d5b9","4d099c65.643ca4","a6f323c9.49f03","be06a2ac.3acb","48900a51.669a34","6f6a6e5a.dc9fe","8572d3e6.90925","1cce7c19.122264","2e761b1e.3b33d4","b30e8503.bae818","8afc0c2f.7ebd3","aeb0e67.284c118","da4b34b4.dea2a8","f567f44b.99e5f8","44bb6cd7.eabb94","8ec9a87e.9c0688","27f66bdb.e19e64","f32b7dba.79c0f","10ff693e.17ae77","14b6f27a.0680de","c8ebeb4a.1c2ad8"],"x":3614,"y":39,"w":972,"h":522},{"id":"c4588388.3e091","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["a38f2f88.43c71","7d90f64d.3b6e88","d9590a0e.b42098","92acc86d.382028","df8fcbff.0f79a8","39aa93dc.f8e5ec","fe29ba30.1af858","536add4c.e37794","acd735d4.e2d7e8","fa572f66.c744a","f21b9d81.44397","118055e6.fff6aa"],"x":1314,"y":1239,"w":812,"h":242},{"id":"931e3130.5243c","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["85847869.b64628","d27b8b24.a4d5d8","913c858d.f57d88","963641ab.4ca6c","eff61262.7bac2","795216f7.09fce8","48594dbe.b1ab74","28ee9263.fbceee","f9a8478f.e17058","28a757db.62e9d8","cab9a302.c0112","6dfb3ea9.f0e98","76c78425.cd5e8c"],"x":274,"y":1919,"w":792,"h":282},{"id":"c24a972a.55d178","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["2d3afe3d.dfa252","e0aa1c8b.873bb","c6afca16.b7ecd8","c7a22bc3.883aa8","507174a0.46f01c","b0955b4c.872298","bcde7cb8.b767e","b0b38d9e.2c52d","45a8da93.adc554","50275c2e.be1384","f0ec42e9.73c5a","eb315fff.90da9","40dad58b.320a3c"],"x":274,"y":939,"w":792,"h":242},{"id":"f0db4543.2ebc68","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c4540b1f.7f8538","4ae8ac38.d59f54","5f0987a4.0bc608","b5cd6d40.a2cb","891b209d.a7b9f","f28f3b0b.88a4f8","ad05a9ad.7619e8","32777694.b3916a","5a51a2b2.89451c","7909596c.22e8e8","238ad949.46cc46","90857259.55b06"],"x":1314,"y":1559,"w":812,"h":242},{"id":"b9f16117.0762b","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["590663f.f1aa79c","4d4dbf81.ace5e","74ddbe78.8ba9b","c5c47bf8.e30928","cfa03a1d.3bbc28","33260e04.3b01b2","ede5a222.d9eb4","54213e0f.66816","3d731af8.9ce736","941c3f2b.f7264","bc2f80a6.399c6","5e764da5.6c1ce4","2bc7fe4a.532662"],"x":294,"y":1559,"w":772,"h":282},{"id":"10dbb6b4.d290f9","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ab03a1b6.2fd28","80786be5.e3f2b8","983f3f66.f1821","f8438bc0.1162f8","e58d2a95.7d6bf8","28c424b1.d84f4c","83c7b8b.e1e9848","4a161d43.572494","ae775d7e.c2a5","3693e974.80f2a6","75a42cbf.8166d4","ad766328.f098e"],"x":1314,"y":919,"w":792,"h":249},{"id":"f9bde4a1.351138","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["e89edddf.3f95d","372aca93.cda846","a82734ef.7e71a8","d9c9c68d.af24e8","6dd8b8ba.3a1e08","3af5be3f.adbe02","95c9bf86.335b7","bf67cb9f.bc7c88","e8e79c58.905f4","7fa42f6e.f3fea","472482ea.0cabec","4ffefc26.ad52a4"],"x":1314,"y":619,"w":792,"h":242},{"id":"fe83ac2f.cc91b","type":"group","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["57b39cae.2547f4","567c038d.857dec","3653aa70.0217c6","aceb5b99.dc9968","82a6291e.576b98","3c14ca05.9ceca6","fd313e87.09d45","24fb3fc8.7a56a","336ce06.bbb4d2","51fec2bf.107ddc","3871d89e.970ed8","67221dd1.655e24","4fa25b5f.5a7db4"],"x":274,"y":1239,"w":792,"h":242},{"id":"b631edd8.a3bf3","type":"group","z":"c93f0a4.b6458f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5b9cf927.1c5108","eefcffa2.2d87a","1d3cf551.9c15bb","116583c6.3a7c1c","b18760f.76f4ea","ce99fda9.f970b","c0de400a.fe747","455eb296.ecb18c","867fd408.7848b8","3f48d9f9.9474d6","b0d0ea14.1ea608","993e8e2d.b4b5b","ed091b89.e1cda8","2c46bcb1.b5dfa4","dec10d8c.8a406","88a086f6.9a17a8","ac82ecb6.ed181","6d36b8f.65e2148","ad13b0ab.ddec8","82c0c7a8.453858","478862cf.3a2dcc","28062c69.42b0f4","6e7a2c3c.1fcb44","64e74245.d1db1c","58204aa6.2222c4","3a05ba0e.4b5376","16516c7.8049c94","7f013689.440ea8","9669b1d0.84f3b","97a7defe.06b28","31432c61.e943e4","9c599275.de0d9","19c8c56a.8a92db","5ee8a7b7.947c18","a83edc29.63963","2c26475f.c4bb78","ab4b1ffd.1d0b8","f08e6cef.d6613","1f87cb5.784c735","80be8ae4.110578","eb9692d5.b4b17","9363dff1.0480f","641e023a.72c87c","a476bca6.71bed","d8164031.25272","1bb4aad0.8d1c05","d507341c.5e42d8","372f11d7.ad9ede","87b116f1.6375e8","df0b9adf.4c7f88","766e145e.32fa1c","83452254.beabd","2d760bb1.8d1804","17ccbd74.e7ba43","18e85e45.8d0352","f5f2f1f5.b637b","150f67f1.166e78","bc4bc081.948c","fe6d92f5.64197","e0e6bf45.a0b17","eaa6c9e8.712f78","3a24a061.8f83","af3ddcff.d07c9","2d22cd71.4ad3c2","5583cdaf.e3b674","8f26c5ef.80cc18","1df8558f.9c691a","9f22981c.595f88","43d25982.cdd858","b2fd4cdc.68c9","56508b4f.a97cc4","4e99d555.1a272c","df55358f.597a88","25ce0b68.df78b4","a02deeb5.cd2c3"],"x":2274,"y":1179,"w":1692,"h":962},{"id":"32d4a9da.c61596","type":"group","z":"811eb35.554d75","g":"c2d936e1.2a1ef8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["74f27c07.2f63f4","fe025649.e5e418","7703bffc.709e2","e54632d8.a9f9b","cf279ae9.980bc8","2d5a37a9.06bcc8","b3d90eaf.ee5b4"],"x":514,"y":119,"w":532,"h":242},{"id":"397438a9.9119d8","type":"group","z":"811eb35.554d75","g":"c2d936e1.2a1ef8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c27e64bf.aa0358","c9c8ffc7.db24b","ea0fe1f6.38887","152d0212.59fece","bf3dc839.c58ea8"],"x":54,"y":99,"w":412,"h":302},{"id":"c2d936e1.2a1ef8","type":"group","z":"811eb35.554d75","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["545d806f.92677","32d4a9da.c61596","397438a9.9119d8"],"x":28,"y":19,"w":1044,"h":408},{"id":"a164ddcc.3dd57","type":"group","z":"811eb35.554d75","g":"1fcfef33.0903a1","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["df3fdb95.7130e8","2d384f86.e794","a364d2e7.9fd0d","8143b5a5.b71e78","5c589f7c.42012","c68904f3.41d168","8b16463d.d689f8"],"x":514,"y":699,"w":732,"h":202},{"id":"95cc1521.e69958","type":"group","z":"811eb35.554d75","g":"1fcfef33.0903a1","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["eedaf936.6613e8","3d6b192c.918d06"],"x":514,"y":539,"w":252,"h":122},{"id":"12e07944.a71337","type":"group","z":"811eb35.554d75","g":"1fcfef33.0903a1","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d0b399e2.a73268","5333e6e1.f3d708","e50eeca4.82d9e","1c39e554.ed2e7b","aeefd2b0.025fb","f2ccc686.110628","c125dd1d.bcc5d","8a051b1.934bce8","7aec1b97.6f0aa4","5467fe45.0df29","6381045a.8e69fc","b262e001.0aaaa"],"x":114,"y":539,"w":362,"h":482},{"id":"1fcfef33.0903a1","type":"group","z":"811eb35.554d75","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["245b4152.6de98e","faab48a4.1f3cc8","12e07944.a71337","95cc1521.e69958","a164ddcc.3dd57"],"x":34,"y":459,"w":1238,"h":588},{"id":"a58cd07e.e5b87","type":"group","z":"811eb35.554d75","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["972827e9.23a288","63258e24.c72f5","3f279997.156ce6","94978591.96e0c8","74f1b1bf.0efed","6edada01.7d3e94","2e787e04.3ab6c2","2b359a2f.5de826","85dd86d.f7c4278","b1b71f46.9e51","b03c1636.e2f108","59f229d6.ee9ca8","2062427e.47c38e","cbaf3b7.36d9cc8","d8f5db00.78ff38","6b22972f.adc3a8","7a7dfee6.4255b","614402f2.10a54c","4b5188a1.85a0d8","e2811e36.a466d","3ac3f2c4.db05ee"],"x":34,"y":1099,"w":652,"h":482},{"id":"b66742a7.557e6","type":"group","z":"927d9689.f973b8","g":"627bfb44.8ded34","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8a00fcfa.6838e","c6e22175.4b938","2a426ace.16df96","98a3d9.70a3cc28","b9849927.030618","65fbf9ba.6943c8","76ae0556.2b69cc"],"x":1234,"y":359,"w":392,"h":202},{"id":"eccb53b5.b0357","type":"group","z":"927d9689.f973b8","g":"627bfb44.8ded34","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["51a070b9.5344b","30dffc27.ff8d94","15718ce9.06eff3","48c392db.931dec","30f6fcdb.58a144","145934d9.c4745b","228d020d.2323ae","41601ef0.27069","3157c4a6.447b7c","df7a575e.bbefa8","ff370422.368ae8"],"x":1234,"y":59,"w":392,"h":282},{"id":"1724d20e.22528e","type":"group","z":"927d9689.f973b8","g":"627bfb44.8ded34","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["e115d480.807158","20338bc5.872254","c8417a3a.212d58","bf104aaf.068e68","42697e6b.2e817"],"x":1234,"y":579,"w":392,"h":182},{"id":"627bfb44.8ded34","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1724d20e.22528e","b66742a7.557e6","eccb53b5.b0357"],"x":1208,"y":33,"w":444,"h":754},{"id":"cd13c448.f459a8","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["a4e6dc6a.fc495","63cc357.3098dcc","de9670f8.b9e6e","827576b6.3cdd78","43c4ea85.0261f4"],"x":74,"y":1339,"w":792,"h":122},{"id":"9688cebe.f3539","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c7999375.773a3","3c5f5b09.7272c4","c2fe7a72.aea148","7545f118.54182","a5830e1c.03e5f","1148e59c.112f3a"],"x":64,"y":1159,"w":692,"h":142},{"id":"4ff10457.1a975c","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["7f91fd5b.fd56e4","232f672a.063fa8","8b7889ba.98f0e8","9312b19d.240e8"],"x":74,"y":999,"w":492,"h":122},{"id":"bafdc0d0.905d8","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["94c1c4f0.a76b38","2f2888da.55dd18","2874e128.136cfe"],"x":74,"y":839,"w":352,"h":129.5},{"id":"3f36671d.3e72c8","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c7288341.d13ec","4940b10.c41b35","569bf189.12a8d","34365754.56f2f8","8bf4f399.f6304","4500b28d.85e36c","67700e0d.a1fb6"],"x":54,"y":599,"w":672,"h":202},{"id":"4c93de5e.734b6","type":"group","z":"927d9689.f973b8","g":"b8176541.53a9f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6fe5d758.7f6a48","69dd498a.cb6308","11880a30.4fa7d6","80adebf2.707b08","d2890c87.86c2c","7761ca4b.12a664","63ac058d.25774c","5aae9ee3.3d31c","20c33e65.28eb72","f2aff311.922d6","c3eefc23.40c1b","6c04cd52.e60644","e603bc22.98864","e8cc7e57.e4712"],"x":74,"y":59,"w":1052,"h":242},{"id":"e32c2fc3.3faa8","type":"group","z":"927d9689.f973b8","g":"b8176541.53a9f8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["f48e2cc.0f502d","404fc446.c7652c","2f6c28c1.a6e788","23d46a9a.cb8e96","e7a0551e.42d698","c308188f.efaa38","d0e903e8.b1cf3","94d3df0e.d0c77","d6152324.89a6d","7f5bf67b.bafa08","bdf4f029.b6eea","61cde947.634ee8"],"x":74,"y":339,"w":1052,"h":202},{"id":"b8176541.53a9f8","type":"group","z":"927d9689.f973b8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["4c93de5e.734b6","e32c2fc3.3faa8"],"x":48,"y":33,"w":1104,"h":534},{"id":"168f936.17e076d","type":"group","z":"dea9ee4a.091b4","g":"c216ca08.fc0df8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d72bef2d.59b31","c5a345cf.c8bcb8","50878b9f.37e794","61d887ea.962de8","6b8580b6.49a36","956dff3e.cc8ca","a00b20be.2635a","32a43a10.5359e6","7213e951.89b0a8","559e0520.f5d26c","7a83357a.6afa5c","cb5518a7.bf2708","24e7972b.3edcb8","3ae81c0b.f342c4","990e7771.64e5c8","f88df0b6.df064","d2c73766.b63978","2fa6ce0c.a892c2","730f771d.6ad218","632b827f.a0febc","5b863297.ea19bc","243f9a3a.002d86","a2f103ba.ee388","7feaebf2.c87784","acd088e3.e94be8","70b84d47.93d774","bf8a08c8.05bc88","cbfe8a09.cd51e8","d22b934c.ec2b8","5e9dc28f.33105c","fc8cf0e0.7941e","13d35b64.709d15","fa7fa22a.467c6","241c579c.3d9818","a89d722a.2df86","8915082f.65ac68","900afbe4.b7c8d8","3971c226.5cc62e","4eaa88ab.caae58"],"x":114,"y":2739,"w":1772,"h":702},{"id":"22fbdc2c.b3be34","type":"group","z":"dea9ee4a.091b4","g":"c216ca08.fc0df8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["6a3ff4f3.1ef90c","31673605.46d5aa","31b79ed6.ad2b62","feb299fc.c5aff8","ff2ad660.604308","e06609c4.1c2748","bbc6e2a.d5bfb2","e8982606.9bcfd8","a0be1687.939fe8","ae2863cc.6ec68","6f9cacc2.a62124","d2f96026.c8a67","6dc6508c.f0bdb","b7a8368c.4a9828","1b9881e9.395ade","a434dc84.5c273","4d44a657.63fae8","6c1f750b.72d76c","8a893358.1b584","36ff55a1.9bc1ca"],"x":114,"y":2379,"w":762,"h":322},{"id":"c216ca08.fc0df8","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["168f936.17e076d","22fbdc2c.b3be34"],"x":88,"y":2353,"w":1824,"h":1114},{"id":"400ec676.58da58","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["7f45c54e.bc8bcc","dd4f051f.7463d8","4b71f54c.626f9c","e0cd2483.2b3f78","3453897b.1daf66","3b7fedfb.904932","8a33dd8b.013e4","86db276a.c5a4c8","867e441b.92b1a8","d9366bfb.65bcb8","86565a88.bf7ff8","70e2032.fb423fc","131aa11f.1d26df"],"x":1494,"y":1839,"w":712,"h":302},{"id":"25a6c10c.bf2f9e","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["52611f96.c3dfe","6d234799.605ec8","ab5fcb4e.9382c8","c9f0ff95.03616","a6d3f561.26c938"],"x":2274,"y":1859,"w":542,"h":122},{"id":"82afdd9e.b3e02","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["1acd1b31.0525b5","1df0e654.c2d9ca","4a5b809b.82a14","84f925a7.1fd828","503f633d.eb037c"],"x":2394,"y":1479,"w":522,"h":122},{"id":"e679fdcb.40016","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["cb3d77d7.21fc18","ae15df76.3131b","82ff99d0.2b0808"],"x":2499,"y":1679,"w":367,"h":122},{"id":"2c4baac9.60adc6","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["3571f834.01dfb8","7315e389.c49d8c","1e3e90b1.9711af","1b9bce64.b5cf92","4202fdc9.699bc4","467b98e6.d8b768","34648a52.f5ff46","c5ce9b0a.3fad58","bc40cce.d2ceb3"],"x":1474,"y":1639,"w":942,"h":162},{"id":"3f9cc238.b141ce","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["637156ed.b40f78","fad18dba.be12a","9202e47b.087408","f8302b21.cebd28","d84365c9.81d3a8"],"x":1874,"y":1479,"w":482,"h":122},{"id":"d01140bc.242a3","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["c85241e9.8cfd8","e1338567.4a64b8","a45655be.e21898","2fb0d819.4c4d68","5ceef6ca.881f68","95286c99.b34ef","90ccffe6.8be11","fabea049.b39e6","59ecb51e.729e1c","a124b3e4.fef36"],"x":2134,"y":1159,"w":742,"h":202},{"id":"2ac90dd7.4a53f2","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5dce6d1b.882164","1e532d90.0f27c2","91bd9d36.309c7","ee53cec3.8c1f8","9eef4fc2.6358a","41d85bab.453d44","98772ff8.7f5bb","9c12352.17510c8","7597ada3.32d6d4","35a917fb.8ed588","25b86ff1.1f147","afe38847.8781d8"],"x":1474,"y":1159,"w":632,"h":282},{"id":"e5a21271.af2b","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5964c537.79dcac","848e4204.08101","e7fe6470.448a98","f0fdd752.c5d718","c79ed7cf.d973e8","e40ea5a6.f76ec8","ce0a66c9.359a98","a89df4d9.1a1988","3d51cb51.7319e4"],"x":1474,"y":939,"w":992,"h":182},{"id":"bd985596.4c5ad8","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["658d4d0.f870bb4","4a1fa4ed.8ed21c","ddf371a1.74b9b","3926d53d.28079a","2eb8ee22.6c1052","289fd486.3e5dbc","d7dc008d.138f4","5839e887.24ad28","e1d473b3.413b6","5416e29a.b5ec5c","49c1b722.d23618","abae7feb.84e2f","d3b546ea.aa4888","73725303.3e8d1c","85805513.f0fce8","99780c07.fd3b6","15865f7d.838701","64cfe87.1172f18"],"x":1474,"y":579,"w":952,"h":342},{"id":"61ddad28.d51b94","type":"group","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["5be6e97d.567918","b1c8636a.eb9be","ff8cfa2b.447d08","dfc70123.27b7f"],"x":1474,"y":1479,"w":362,"h":122},{"id":"f1eeae83.6bd2b","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["a49ac80b.3cb5c8","25a6c10c.bf2f9e","2ac90dd7.4a53f2","2c4baac9.60adc6","3f9cc238.b141ce","400ec676.58da58","61ddad28.d51b94","82afdd9e.b3e02","bd985596.4c5ad8","d01140bc.242a3","e5a21271.af2b","e679fdcb.40016"],"x":1394,"y":499,"w":1548,"h":1668},{"id":"a6665e74.e2f37","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ed6d927b.b0a4f","41629294.38810c","c4340bdb.c3f928","b2fb2aac.bcd838","40dfccc0.416d64","8d46ca42.256de8","a9a7dc6a.ba9d7"],"x":2474,"y":239,"w":832,"h":182},{"id":"e4e1bab7.4fe338","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["950306ec.ba8f58","c85dbcde.22e18","7990cbd8.8d10f4","afa43b6c.6cf318","83274eb8.5ab5c","5974972c.1e45f8","448e9e9b.83bce","11ab769b.da7329","f1bd5a47.e40fb8","9dfc3267.24e41"],"x":1394,"y":119,"w":1052,"h":302},{"id":"eaa17169.42851","type":"group","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["bd892795.347588","b4616265.62e1f","8812a074.ce8d3","d43f6f48.6a82c","8d0f341.876bfc8","c6ee7b49.864988","1c2676c7.fdf959","62dc4629.7a3868","c97dfea8.02de8","2cfd7d87.bc2112","7bec83c6.32113c","2f2c93c9.d0b4fc","e7638846.64efb8","79d23f78.bc699","43b772e0.54ed7c","2143d037.2bbd9","5cb925e5.4fa26c","dab0f5cc.f24568","ac25a8ae.6d8798","59673e60.8b497","95f394c1.ccfd68","e153287e.2e4f08"],"x":194,"y":1839,"w":952,"h":442},{"id":"f308294.a213bd8","type":"group","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["8971adc6.fd3dc","ac9bb3bc.078","1ff74875.1a9258","4bde1df2.19a0f4","1c5cd4ce.9f0e5b"],"x":194,"y":1699,"w":562,"h":122},{"id":"53a3d08c.c701d","type":"group","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["67b63c2e.2c2f94","85467aa6.ec9d48","70050f26.7a6cd","d0a9a84c.04a538","130722ae.2ac74d","8b4a491.3ed7fb8","78652b8d.98c3c4","1838e9fe.35e5f6","455d0132.a9e25","9541876e.261498","604e5ce8.c9b2e4","9d91503b.53cae"],"x":194,"y":1479,"w":942,"h":202},{"id":"83e89a7f.2f1d28","type":"group","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["b1c8dc4c.7ce1b","76e6e41c.19aeec","32b9a09b.3b5c5","4a42ba1c.f176b4","a6049dbe.5972","6dbf1896.663d88","31276aeb.eaf5a6"],"x":194,"y":1299,"w":802,"h":162},{"id":"f4e4bbf6.cdb9c8","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["ca5f1689.d4c288","e8d6d6a6.b0f758","c0b72a1b.1be3b8","1b71d43.861ce2c","b2afb17d.1ed5b","16d68c2a.3fc344","11031a72.ea8b76","ae2c941d.fdcd28","53a3d08c.c701d","83e89a7f.2f1d28","eaa17169.42851","f308294.a213bd8"],"x":74,"y":1159,"w":1098,"h":1148},{"id":"3fd50e71.f698d2","type":"group","z":"dea9ee4a.091b4","g":"48a6e120.1944f","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["d6f95168.7ffe2","badf91d4.f46ac","5f603a67.2e3984"],"x":694,"y":979,"w":332,"h":122},{"id":"16386203.90a31e","type":"group","z":"dea9ee4a.091b4","g":"48a6e120.1944f","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["33546c1e.cf2274","f3aea60c.da7188","535a0127.edfce","da5f8db0.5ff25","6e21d6a8.649ad8","86e6eabb.fd5be8"],"x":134,"y":979,"w":482,"h":122},{"id":"48a6e120.1944f","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["7f60f74c.699f78","4ec1b16b.1031e","fac8e996.d8a5f8","c69da0e5.62a6a","5531f708.fdf1e8","16386203.90a31e","3fd50e71.f698d2"],"x":74,"y":859,"w":978,"h":268},{"id":"87c794c0.b32628","type":"group","z":"dea9ee4a.091b4","g":"1ca5085a.d361d8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["2e95d92d.763386","cfa63c08.fd6ac","6fcced42.5b3654","c5824b73.6d29d8","eecf4cba.87526","62040264.a6eeac","94775595.f72188","34a27dcf.97fa82","8167ea9.8489318","f71f9a4a.dcbbc8","cb021d69.5c033","9f3d1b3e.c175d8","d11c7ba3.5c3028","6f441aa7.23c324","c6a64bf5.dc6118","4d738bbb.00e004"],"x":154,"y":479,"w":812,"h":322},{"id":"45e00936.3721f8","type":"group","z":"dea9ee4a.091b4","g":"1ca5085a.d361d8","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["4c059b39.5cddb4","2506cc60.13e724","5104792f.b75598","f2857c2e.330fa","4c37356d.e703bc","27b97d49.28b222","e8907601.35f608","f04dfaee.31f638","f08885cb.81f7d8"],"x":154,"y":179,"w":572,"h":262},{"id":"1ca5085a.d361d8","type":"group","z":"dea9ee4a.091b4","style":{"stroke":"#999999","stroke-opacity":"1","fill":"none","fill-opacity":"1","label":true,"label-position":"nw","color":"#a4a4a4"},"nodes":["7ca2f7ad.3e9b88","45e00936.3721f8","87c794c0.b32628"],"x":74,"y":99,"w":918,"h":728},{"id":"10669cce.ccb1e3","type":"ui_base","theme":{"name":"theme-dark","lightTheme":{"default":"#0094CE","baseColor":"#0094CE","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"darkTheme":{"default":"#097479","baseColor":"#097479","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif","edited":true,"reset":false},"customTheme":{"name":"Untitled Theme 1","default":"#4B7930","baseColor":"#4B7930","baseFont":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"},"themeState":{"base-color":{"default":"#097479","value":"#097479","edited":true},"page-titlebar-backgroundColor":{"value":"#097479","edited":false},"page-backgroundColor":{"value":"#111111","edited":false},"page-sidebar-backgroundColor":{"value":"#333333","edited":false},"group-textColor":{"value":"#0eb8c0","edited":false},"group-borderColor":{"value":"#555555","edited":false},"group-backgroundColor":{"value":"#333333","edited":false},"widget-textColor":{"value":"#eeeeee","edited":false},"widget-backgroundColor":{"value":"#097479","edited":false},"widget-borderColor":{"value":"#333333","edited":false},"base-font":{"value":"-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif"}},"angularTheme":{"primary":"indigo","accents":"blue","warn":"red","background":"grey","palette":"light"}},"site":{"name":"Node-RED Dashboard","hideToolbar":"false","allowSwipe":"false","lockMenu":"false","allowTempTheme":"true","dateFormat":"DD/MM/YYYY","sizes":{"sx":54,"sy":53,"gx":5,"gy":5,"cx":3,"cy":1,"px":4,"py":4}}},{"id":"85fb4f9c.e9739","type":"serial-port","serialport":"/dev/ttyUSB0","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"\\n","responsetimeout":"1000"},{"id":"25a911f6.fdd9be","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"9","height":"2"},{"id":"211de2c0.cd5b0e","type":"ui_spacer","name":"spacer","group":"","order":2,"width":1,"height":1},{"id":"566cb6a6.5a22b8","type":"ui_spacer","name":"spacer","group":"","order":4,"width":"9","height":"2"},{"id":"69d6c2f.735763c","type":"ui_spacer","name":"spacer","group":"","order":2,"width":1,"height":1},{"id":"84c5aeb7.aec73","type":"ui_spacer","name":"spacer","group":"","order":9,"width":1,"height":1},{"id":"2bee2f54.416b5","type":"ui_spacer","name":"spacer","group":"","order":9,"width":1,"height":1},{"id":"550567f5.085da8","type":"ui_spacer","name":"spacer","group":"","order":9,"width":1,"height":1},{"id":"bf39b783.e646c8","type":"ui_spacer","name":"spacer","group":"","order":9,"width":1,"height":1},{"id":"180f73e5.4f9dcc","type":"ui_spacer","name":"spacer","group":"","order":5,"width":1,"height":1},{"id":"464211c3.a2ca6","type":"ui_spacer","name":"spacer","group":"","order":2,"width":1,"height":1},{"id":"b09a5bdd.fd9338","type":"ui_spacer","name":"spacer","group":"","order":1,"width":1,"height":1},{"id":"71a7bd0f.8d70e4","type":"ui_spacer","name":"spacer","group":"","order":1,"width":"5","height":1},{"id":"4899bf13.ffd8c","type":"ui_tab","name":"Ventilator Use Mode","icon":"dashboard","order":1,"disabled":false,"hidden":true},{"id":"1a16f847.37b6a8","type":"ui_group","name":"Choose Use Option","tab":"4899bf13.ffd8c","order":2,"disp":true,"width":"9","collapse":false},{"id":"93a0ab82.cbea78","type":"ui_tab","name":"Input Setting Value","icon":"dashboard","order":2,"disabled":false,"hidden":true},{"id":"7186aff0.efeae","type":"ui_group","name":"Setting","tab":"93a0ab82.cbea78","order":2,"disp":true,"width":"9","collapse":false},{"id":"a1d34288.489cb","type":"ui_group","name":"Alarm","tab":"4899bf13.ffd8c","order":5,"disp":true,"width":"9","collapse":false},{"id":"7d9abf5c.20d99","type":"ui_group","name":"Navigation","tab":"4899bf13.ffd8c","order":3,"disp":false,"width":"9","collapse":false},{"id":"cb63702e.8a642","type":"ui_spacer","name":"spacer","group":"1a16f847.37b6a8","order":4,"width":"9","height":"2"},{"id":"2148ed30.41a932","type":"ui_group","name":"Alarm","tab":"93a0ab82.cbea78","order":5,"disp":true,"width":"9","collapse":false},{"id":"ca2fe840.3dd0c8","type":"ui_tab","name":"Input Alarm Threshold","icon":"dashboard","order":3,"disabled":false,"hidden":true},{"id":"7775cf38.ae09d","type":"ui_group","name":"Setting","tab":"ca2fe840.3dd0c8","order":2,"disp":true,"width":"9","collapse":false},{"id":"7651cd96.a116e4","type":"ui_group","name":"Alarm","tab":"ca2fe840.3dd0c8","order":5,"disp":true,"width":"9","collapse":false},{"id":"382bb872.e748e8","type":"ui_tab","name":"Ventilator Monitoring","icon":"dashboard","order":4,"disabled":false,"hidden":true},{"id":"410c9e1f.ac8cf","type":"ui_group","name":"showchart","tab":"382bb872.e748e8","order":3,"disp":false,"width":"9","collapse":false},{"id":"45ff047a.6a3e1c","type":"ui_group","name":"Alarm","tab":"382bb872.e748e8","order":7,"disp":true,"width":"9","collapse":false},{"id":"96f6a924.736ba8","type":"ui_group","name":"Navigation","tab":"93a0ab82.cbea78","order":3,"disp":false,"width":"9","collapse":false},{"id":"7d3e815c.f14cc","type":"ui_spacer","name":"spacer","group":"96f6a924.736ba8","order":2,"width":1,"height":1},{"id":"1a8ad9e3.6a7de6","type":"ui_group","name":"Navigation","tab":"ca2fe840.3dd0c8","order":3,"disp":false,"width":"9","collapse":false},{"id":"e7b72900.1ecd98","type":"ui_spacer","name":"spacer","group":"7775cf38.ae09d","order":4,"width":"9","height":"2"},{"id":"fb38bc0c.0f2bd","type":"ui_spacer","name":"spacer","group":"1a8ad9e3.6a7de6","order":2,"width":1,"height":1},{"id":"d2caa19c.b7ab3","type":"ui_group","name":"Title","tab":"93a0ab82.cbea78","order":1,"disp":false,"width":"9","collapse":false},{"id":"68704283.9c276c","type":"ui_group","name":"Title","tab":"ca2fe840.3dd0c8","order":1,"disp":false,"width":"9","collapse":false},{"id":"3c8c110d.30d28e","type":"ui_group","name":"Title","tab":"382bb872.e748e8","order":1,"disp":false,"width":"9","collapse":false},{"id":"308ee0c9.b4a38","type":"ui_group","name":"Navigation","tab":"382bb872.e748e8","order":5,"disp":false,"width":"9","collapse":false},{"id":"ef7b6fc7.03b4a","type":"ui_spacer","name":"spacer","group":"","order":5,"width":1,"height":1},{"id":"3fc97fc1.39749","type":"ui_spacer","name":"spacer","group":"308ee0c9.b4a38","order":2,"width":1,"height":1},{"id":"8c2984b9.abd048","type":"ui_spacer","name":"spacer","group":"1a16f847.37b6a8","order":1,"width":1,"height":1},{"id":"1cde5b5f.611585","type":"ui_spacer","name":"spacer","group":"7d9abf5c.20d99","order":2,"width":"1","height":1},{"id":"108cbf01.e5c471","type":"ui_group","name":"Title","tab":"4899bf13.ffd8c","order":1,"disp":false,"width":"9","collapse":false},{"id":"913f80b.7920f8","type":"mqtt-broker","name":"","broker":"localhost","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""},{"id":"f95f37c1.8798c8","type":"ui_group","name":"Group 5","tab":"4899bf13.ffd8c","order":4,"disp":false,"width":"9","collapse":false},{"id":"3ba9c398.8f3ebc","type":"ui_spacer","name":"spacer","group":"f95f37c1.8798c8","order":5,"width":1,"height":1},{"id":"3649adea.4827e2","type":"ui_group","name":"Group 5","tab":"93a0ab82.cbea78","order":4,"disp":false,"width":"9","collapse":false},{"id":"b780f175.09b2f","type":"ui_spacer","name":"spacer","group":"3649adea.4827e2","order":5,"width":1,"height":1},{"id":"b864b673.a2ef88","type":"ui_group","name":"Group 5","tab":"ca2fe840.3dd0c8","order":4,"disp":false,"width":"9","collapse":false},{"id":"9948532d.bedf9","type":"ui_spacer","name":"spacer","group":"b864b673.a2ef88","order":5,"width":1,"height":1},{"id":"c9263dd0.4c6a3","type":"ui_group","name":"Set Value","tab":"382bb872.e748e8","order":6,"disp":false,"width":"9","collapse":false},{"id":"a27e7919.2f3458","type":"influxdb","hostname":"127.0.0.1","port":"8086","protocol":"http","database":"ventilator2","name":"","usetls":false,"tls":"","influxdbVersion":"1.x"},{"id":"989b6410.143868","type":"serial-port","serialport":"/dev/ttyUSB1","serialbaud":"115200","databits":"8","parity":"none","stopbits":"1","waitfor":"","dtr":"none","rts":"none","cts":"none","dsr":"none","newline":"\\n","bin":"false","out":"char","addchar":"","responsetimeout":"10000"},{"id":"41e3b5cc.a76bdc","type":"ui_group","name":"Title","tab":"","order":1,"disp":false,"width":"9","collapse":false},{"id":"64c781ea.4cbe4","type":"ui_group","name":"Gambar","tab":"","order":2,"disp":false,"width":"9","collapse":false},{"id":"d6d799e8.10a6f8","type":"ui_group","name":"text display","tab":"","order":3,"disp":false,"width":"9","collapse":false},{"id":"1a678351.d51d3d","type":"ui_group","name":"Navigation","tab":"","order":4,"disp":false,"width":"9","collapse":false},{"id":"2e5c4bc6.aa1204","type":"ui_group","name":"Alarm","tab":"","order":5,"disp":false,"width":"9","collapse":false},{"id":"7c7678d0.d167f8","type":"ui_spacer","name":"spacer","group":"1a678351.d51d3d","order":4,"width":1,"height":1},{"id":"f7d851f2.d077","type":"ui_group","name":"Title","tab":"37032780.61ab48","order":1,"disp":false,"width":"9","collapse":false},{"id":"2570d1e1.9b8bce","type":"ui_group","name":"Gambar","tab":"37032780.61ab48","order":2,"disp":false,"width":"9","collapse":false},{"id":"72f3f941.432c18","type":"ui_group","name":"Navigation","tab":"37032780.61ab48","order":4,"disp":false,"width":"9","collapse":false},{"id":"fa3ccd5b.855f7","type":"ui_group","name":"text display","tab":"37032780.61ab48","order":3,"disp":false,"width":"9","collapse":false},{"id":"37032780.61ab48","type":"ui_tab","name":"Kalibrasi Flow Pressure","icon":"dashboard","order":5,"disabled":false,"hidden":true},{"id":"7710d010.a4402","type":"ui_group","name":"Alarm","tab":"37032780.61ab48","order":5,"disp":false,"width":"9","collapse":false},{"id":"78c6aa23.300724","type":"ui_spacer","name":"spacer","group":"72f3f941.432c18","order":2,"width":1,"height":1},{"id":"a420ba14.ddc818","type":"MySQLdatabase","name":"","host":"127.0.0.1","port":"3306","db":"ventilator","tz":"","charset":""},{"id":"20600b38.b92fc4","type":"ui_group","name":"Sense","tab":"382bb872.e748e8","order":4,"disp":false,"width":"9","collapse":false},{"id":"5985a320.da364c","type":"ui_group","d":true,"name":"startchart","tab":"382bb872.e748e8","order":2,"disp":false,"width":"9","collapse":false},{"id":"e27045a4.e6ee28","type":"ui_spacer","name":"spacer","group":"5985a320.da364c","order":3,"width":"9","height":"3"},{"id":"cf80d2fb.c83cd","type":"ui_spacer","name":"spacer","group":"20600b38.b92fc4","order":8,"width":1,"height":1},{"id":"ced5034a.6b276","type":"function","z":"9676a003.8e781","name":"Toggle Direction","func":"var direction = flow.get('direction')||0;\n\nif (direction === -1)\n{\n    direction = 1;\n}\nelse {\n    direction = -1;\n}\nflow.set('direction',direction);\nmsg.payload = direction;\nreturn msg;","outputs":1,"noerr":0,"x":431,"y":267,"wires":[[]]},{"id":"ba32bdc0.646c4","type":"switch","z":"9676a003.8e781","name":"Step or Direction","property":"topic","propertyType":"msg","rules":[{"t":"eq","v":"Step","vt":"str"},{"t":"eq","v":"Direction","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":291,"y":171,"wires":[["ff55bbc0.db4e98"],["ced5034a.6b276"]]},{"id":"f61ad706.048cc8","type":"comment","z":"9676a003.8e781","name":"Flow Variables","info":"* Direction\n* Sequence\n* SequenceIndex","x":279,"y":42,"wires":[]},{"id":"e922314a.2bd91","type":"function","z":"9676a003.8e781","name":"Sequence Generator","func":"var seqindex = context.get('seqindex')||0;\nvar sequence = [ [1,0,0,0],[1,1,0,0],[0,1,0,0],[0,1,1,0],[0,0,1,0],[0,0,1,1],[0,0,0,1],[1,0,0,1]]\nvar direction = flow.get('direction');\n\nseqindex = (seqindex % (sequence.length));\nif (seqindex == -1) {seqindex = sequence.length-1;}\n\nmsg.payload = sequence[seqindex];\nmsg.seqindex = seqindex;\nmsg.direction = direction;\n\ncontext.set('seqindex',seqindex+direction);\n\nnode.status({fill:\"green\",shape:\"dot\",text:\"Step\"});\nnode.status({});\n\nreturn GenerateOutput(seqindex);\n\nfunction GenerateOutput(index) {\n    return [ NewMessage(sequence[index][0]), NewMessage(sequence[index][1]),NewMessage(sequence[index][2]),NewMessage(sequence[index][3]), msg  ];\n}\n\nfunction NewMessage(val) {\n    return { payload:val };\n}","outputs":"5","noerr":0,"x":720,"y":174,"wires":[[],[],[],[],[]]},{"id":"ff55bbc0.db4e98","type":"function","z":"9676a003.8e781","name":"Multistep","func":"var outputMsgs = [];\nvar steps = msg.payload;\nfor (var count = 0; count < steps; count++) { \n    outputMsgs.push({payload:1});\n}\nreturn [ outputMsgs ];","outputs":1,"noerr":0,"x":434,"y":90,"wires":[["71c57acf.f43104"]]},{"id":"71c57acf.f43104","type":"delay","z":"9676a003.8e781","name":"","pauseType":"rate","timeout":"5","timeoutUnits":"seconds","rate":"2","nbRateUnits":"","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":615,"y":76,"wires":[["e922314a.2bd91"]]},{"id":"ca5f1689.d4c288","type":"comment","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","name":"Sensor Flow ---------------------------------------------------------","info":"Check for:\n1. Spurious Breath\n2. Volume Over","x":300,"y":1200,"wires":[],"icon":"node-red/arrow-in.svg"},{"id":"e8d6d6a6.b0f758","type":"function","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"calcBit2Flow","func":"var flow_raw = parseFloat(msg.payload); // in 16 bit\n//flow_raw = flow_raw * 6.144 / 32768; // in volt\n\n// flow_val = Math.sqrt(flow_raw);\n\n// offset + gain adjust\n//flow_val = (25.188 * flow_val) + 2915.7;\nvar flow_val = flow_raw;\n\nmsg.topic = \"flow_val\";\nmsg.payload = flow_val;\n\nreturn msg;","outputs":1,"noerr":0,"x":290,"y":1300,"wires":[["c0b72a1b.1be3b8"]]},{"id":"6fe5d758.7f6a48","type":"inject","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"one time create file config","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":250,"y":140,"wires":[["69dd498a.cb6308"]]},{"id":"69dd498a.cb6308","type":"function","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"breathing param variable creator","func":"var data = {};\ndata.ie = 2;\ndata.rr = 20;\ndata.o2 = 20;\ndata.peep = 5;\ndata.vol = 600;\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":140,"wires":[["11880a30.4fa7d6"]]},{"id":"11880a30.4fa7d6","type":"file","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"","filename":"/home/pi/ventilator/breathingparam.json","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":940,"y":140,"wires":[[]]},{"id":"80adebf2.707b08","type":"inject","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"first initial trigger","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":220,"y":220,"wires":[["d2890c87.86c2c"]]},{"id":"d2890c87.86c2c","type":"file in","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"load breathing param","filename":"/home/pi/ventilator/breathingparam.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":460,"y":220,"wires":[["7761ca4b.12a664"]]},{"id":"7761ca4b.12a664","type":"json","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"","property":"payload","action":"","pretty":false,"x":690,"y":220,"wires":[["63ac058d.25774c","e603bc22.98864"]]},{"id":"63ac058d.25774c","type":"change","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"set global var","rules":[{"t":"set","p":"set_ie","pt":"global","to":"payload.ie","tot":"msg"},{"t":"set","p":"set_rr","pt":"global","to":"payload.rr","tot":"msg"},{"t":"set","p":"set_o2","pt":"global","to":"payload.o2","tot":"msg"},{"t":"set","p":"set_peep","pt":"global","to":"payload.peep","tot":"msg"},{"t":"set","p":"set_vol","pt":"global","to":"payload.vol","tot":"msg"},{"t":"set","p":"mode_on_off","pt":"global","to":"0","tot":"num"},{"t":"set","p":"pres_offset","pt":"global","to":"payload.pres_offset","tot":"msg"},{"t":"set","p":"flow_offset","pt":"global","to":"payload.flow_offset","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":220,"wires":[["5aae9ee3.3d31c"]]},{"id":"5aae9ee3.3d31c","type":"link out","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"to dashboard","links":["48497eb9.c12c8"],"x":1015,"y":220,"wires":[]},{"id":"20c33e65.28eb72","type":"link in","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"from apply button breathing","links":["6c3566f.fdc0398"],"x":335,"y":180,"wires":[["f2aff311.922d6"]]},{"id":"f2aff311.922d6","type":"function","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"save breathing param variable","func":"var data = {};\ndata.ie = global.get(\"set_ie\");\ndata.rr = global.get(\"set_rr\");\ndata.o2 = global.get(\"set_o2\");\ndata.peep = global.get(\"set_peep\");\ndata.vol = global.get(\"set_vol\");\ndata.pres_offset = global.get(\"pres_offset\");\ndata.flow_offset = global.get(\"flow_offset\");\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":570,"y":180,"wires":[["c3eefc23.40c1b"]]},{"id":"c3eefc23.40c1b","type":"file","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"","filename":"/home/pi/ventilator/breathingparam.json","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":940,"y":180,"wires":[[]]},{"id":"6c04cd52.e60644","type":"comment","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"load and save breathing parameters","info":"","x":240,"y":100,"wires":[]},{"id":"f48e2cc.0f502d","type":"comment","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"load and save alarm parameters","info":"","x":230,"y":380,"wires":[]},{"id":"404fc446.c7652c","type":"inject","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"one time create file config","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":250,"y":420,"wires":[["2f6c28c1.a6e788"]]},{"id":"2f6c28c1.a6e788","type":"function","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"alarm param variable creator","func":"var data = {};\ndata.hiplimit = 40;\ndata.loplimit = 20;\ndata.o2tol = 5;\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":420,"wires":[["23d46a9a.cb8e96"]]},{"id":"23d46a9a.cb8e96","type":"file","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"","filename":"/home/pi/ventilator/alarmparam.json","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":960,"y":420,"wires":[[]]},{"id":"e7a0551e.42d698","type":"inject","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"first initial trigger","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":220,"y":500,"wires":[["c308188f.efaa38"]]},{"id":"c308188f.efaa38","type":"file in","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"load breathing param","filename":"/home/pi/ventilator/alarmparam.json","format":"utf8","chunk":false,"sendError":false,"encoding":"none","x":460,"y":500,"wires":[["d0e903e8.b1cf3"]]},{"id":"d0e903e8.b1cf3","type":"json","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"","property":"payload","action":"","pretty":false,"x":690,"y":500,"wires":[["94d3df0e.d0c77"]]},{"id":"94d3df0e.d0c77","type":"change","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"set global var","rules":[{"t":"set","p":"hiplimit","pt":"global","to":"payload.hiplimit","tot":"msg"},{"t":"set","p":"loplimit","pt":"global","to":"payload.loplimit","tot":"msg"},{"t":"set","p":"o2tol","pt":"global","to":"payload.o2tol","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":850,"y":500,"wires":[["d6152324.89a6d"]]},{"id":"d6152324.89a6d","type":"link out","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"to dashboard","links":["48497eb9.c12c8"],"x":1075,"y":500,"wires":[]},{"id":"7f5bf67b.bafa08","type":"link in","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"from apply button alarm","links":["43aeaf3f.ec01f"],"x":335,"y":460,"wires":[["bdf4f029.b6eea"]]},{"id":"bdf4f029.b6eea","type":"function","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"save alarm param variable","func":"var data = {};\ndata.hiplimit = global.get(\"hiplimit\");\ndata.loplimit = global.get(\"loplimit\");\ndata.o2tol = global.get(\"o2tol\");\nmsg.payload = data;\nreturn msg;","outputs":1,"noerr":0,"x":560,"y":460,"wires":[["61cde947.634ee8"]]},{"id":"61cde947.634ee8","type":"file","z":"927d9689.f973b8","g":"e32c2fc3.3faa8","name":"","filename":"/home/pi/ventilator/alarmparam.json","appendNewline":true,"createDir":true,"overwriteFile":"true","encoding":"none","x":960,"y":460,"wires":[[]]},{"id":"c0b72a1b.1be3b8","type":"smooth","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"","property":"payload","action":"low","count":"2","round":"","mult":"single","reduce":false,"x":480,"y":1300,"wires":[["16d68c2a.3fc344"]]},{"id":"b1c8dc4c.7ce1b","type":"link out","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"[result] Flow","links":["4500b28d.85e36c","59673e60.8b497","67b63c2e.2c2f94","8971adc6.fd3dc","8d0f341.876bfc8","b4616265.62e1f"],"x":955,"y":1380,"wires":[]},{"id":"67b63c2e.2c2f94","type":"link in","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"[check] Spurious","links":["b1c8dc4c.7ce1b"],"x":255,"y":1560,"wires":[["130722ae.2ac74d"]]},{"id":"85467aa6.ec9d48","type":"function","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"checkSpurious","func":"// var breathing_phase = global.get(\"breathing_phase\")\nvar spurious_flow_threshold = 6;\nvar count_spur = parseInt(flow.get(\"count_spur\"))||0;\nvar flowq = msg.payload;\n\nif(count_spur>40 && (flowq > spurious_flow_threshold)){\n   msg.payload = \"05_ON\"; \n   global.set(\"modemandatory\", false)\n   return msg;\n} \n// else {\n//     msg.payload = '';\n// }\n\n","outputs":1,"noerr":0,"x":940,"y":1560,"wires":[["70050f26.7a6cd","455d0132.a9e25"]]},{"id":"70050f26.7a6cd","type":"link out","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"[alarm] Spurious","links":["31673605.46d5aa","b4616265.62e1f"],"x":1075,"y":1560,"wires":[]},{"id":"d0a9a84c.04a538","type":"comment","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"Check for Spurious Breath (OK MINUS)","info":"Algoritma sudah bisa:\n1. Detect spurious biasa\n2. Ganti title ke assisted\n\nPerlu ditambahkan\n1. Cek spurious baru mulai beberapa saat setelah phase exhale\n2. Ganti mode operasi ke assisted","x":370,"y":1520,"wires":[]},{"id":"bd892795.347588","type":"debug","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"debug Sensor Flow","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":390,"y":1920,"wires":[]},{"id":"a49ac80b.3cb5c8","type":"comment","z":"dea9ee4a.091b4","g":"f1eeae83.6bd2b","name":"Sensor Pressure ---------------------------------------------------------","info":"Check For:\n1. PIP > PIP_LIMIT\n2. PEEP < PEEP_LIMIT\n3. Fighting\n4. Lepas (Pres LOW)\n\nREAD PEEP\nREAD IPP","x":1640,"y":540,"wires":[],"icon":"node-red/arrow-in.svg"},{"id":"658d4d0.f870bb4","type":"smooth","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","property":"payload","action":"low","count":"1","round":"","mult":"single","reduce":false,"x":1900,"y":840,"wires":[["3926d53d.28079a","4a1fa4ed.8ed21c","64cfe87.1172f18"]]},{"id":"b4616265.62e1f","type":"link in","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"[debug] flow","links":["70050f26.7a6cd","b1c8dc4c.7ce1b","5ab72885.8f20e8","d9366bfb.65bcb8","e7fe6470.448a98"],"x":260,"y":1920,"wires":[["bd892795.347588"]]},{"id":"8812a074.ce8d3","type":"comment","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"debug","info":"","x":270,"y":1880,"wires":[]},{"id":"4a1fa4ed.8ed21c","type":"link out","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"[result] Pressure","links":["ae15df76.3131b","97d329f6.711ab8","b1c8636a.eb9be","7315e389.c49d8c","5964c537.79dcac","ee53cec3.8c1f8","fad18dba.be12a","4940b10.c41b35","31f86b64.38f734","c85241e9.8cfd8","831ddd72.3edbe","f110c461.d7eef8","1df0e654.c2d9ca"],"x":2055,"y":880,"wires":[]},{"id":"5964c537.79dcac","type":"link in","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"[check] Fighting","links":["4a1fa4ed.8ed21c","db521787.1c55e8","5b7c282.4b0aad8","cb3e71d2.4d081","2799042e.d5a3ac"],"x":1535,"y":1020,"wires":[["ce0a66c9.359a98"]]},{"id":"6a3ff4f3.1ef90c","type":"comment","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"Alarm set","info":"01 HIGH PRESSURE\n02 LOW PRESSURE\n03 FIGHTING\n04 EMERGENCY\n05 SPURIOUS\n06 OVER VOL\n07 LOW PEEP\n08 LOW/HIGH O2","x":200,"y":2420,"wires":[]},{"id":"31673605.46d5aa","type":"link in","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"setAlarm()","links":["70050f26.7a6cd","da5f8db0.5ff25","e7fe6470.448a98","dfc70123.27b7f","5ab72885.8f20e8","1ff74875.1a9258","cb5518a7.bf2708","d2c73766.b63978","ab5fcb4e.9382c8","d9366bfb.65bcb8","348d8fdb.ec4c8","84f925a7.1fd828"],"x":315,"y":2440,"wires":[["31b79ed6.ad2b62"]]},{"id":"31b79ed6.ad2b62","type":"function","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"setAlarm","func":"var res = msg.payload.split(\"_\");\nvar no = res[0];\nvar status = false;\n\nif(res[1] == \"ON\") {\n    status = true;\n}\n\nvar newmsg = { \"no\": no, \"payload\": status};\nreturn newmsg;","outputs":1,"noerr":0,"x":420,"y":2540,"wires":[["feb299fc.c5aff8","b7a8368c.4a9828"]]},{"id":"feb299fc.c5aff8","type":"switch","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","property":"no","propertyType":"msg","rules":[{"t":"eq","v":"01","vt":"str"},{"t":"eq","v":"02","vt":"str"},{"t":"eq","v":"03","vt":"str"},{"t":"eq","v":"04","vt":"str"},{"t":"eq","v":"05","vt":"str"},{"t":"eq","v":"06","vt":"str"},{"t":"eq","v":"07","vt":"str"},{"t":"eq","v":"08","vt":"str"},{"t":"eq","v":"99","vt":"str"},{"t":"nempty"}],"checkall":"true","repair":false,"outputs":10,"x":590,"y":2500,"wires":[["ff2ad660.604308"],["e06609c4.1c2748"],["bbc6e2a.d5bfb2"],["e8982606.9bcfd8"],["d2f96026.c8a67"],["a0be1687.939fe8"],["ae2863cc.6ec68"],["6f9cacc2.a62124"],["ff2ad660.604308","e06609c4.1c2748","bbc6e2a.d5bfb2","e8982606.9bcfd8","d2f96026.c8a67","a0be1687.939fe8","ae2863cc.6ec68","6f9cacc2.a62124"],[]]},{"id":"ff2ad660.604308","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm01","links":["a307b167.72af4","dd4f051f.7463d8"],"x":795,"y":2440,"wires":[]},{"id":"e06609c4.1c2748","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm02","links":["77e3ca6d.48ea54"],"x":835,"y":2440,"wires":[]},{"id":"bbc6e2a.d5bfb2","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm03","links":["c1498ea8.9b1b8"],"x":795,"y":2480,"wires":[]},{"id":"e8982606.9bcfd8","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm04","links":["367fee52.ef4362"],"x":835,"y":2480,"wires":[]},{"id":"a0be1687.939fe8","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm06","links":["e54902b9.dc3d8"],"x":835,"y":2520,"wires":[]},{"id":"ae2863cc.6ec68","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm07","links":["fa2402cf.2096"],"x":795,"y":2560,"wires":[]},{"id":"6f9cacc2.a62124","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm08","links":["8ed1e485.860a88"],"x":835,"y":2560,"wires":[]},{"id":"d2f96026.c8a67","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"alarm05","links":["78e0139d.1b385c","37d8178f.70b278"],"x":795,"y":2520,"wires":[]},{"id":"848e4204.08101","type":"comment","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"Check for Fighting (OK Minus)","info":"Pras note: Perlu flag inhale/exhale, perlu init flow/global values\n\nDimas note: Deteksi baru bisa dilakukan pada cycle kedua dan seterusnya","x":1620,"y":980,"wires":[]},{"id":"7f60f74c.699f78","type":"comment","z":"dea9ee4a.091b4","g":"48a6e120.1944f","name":"Sensor Oxygen ---------------------------------------------------------","info":"Check For:\n1. abs(FiO2% - O2 real) >= O2tol","x":310,"y":900,"wires":[],"icon":"node-red/arrow-in.svg"},{"id":"4ec1b16b.1031e","type":"function","z":"dea9ee4a.091b4","g":"48a6e120.1944f","name":"calcBit2Oxy","func":"var ox_raw = parseFloat(msg.payload); // in 16 bit\n//ox_raw = ox_raw * 0.256 / 32768;\n\n// offset + gain adjust\n//var ox_val = (ox_raw * 1000 * 100/60);\nvar ox_val = ox_raw;\n\nnewmsg = {\"topic\": '', \"payload\": '' };\nnewmsg.topic = \"oxygen\";\nnewmsg.payload = ox_val;\n\nreturn newmsg;","outputs":1,"noerr":0,"x":290,"y":940,"wires":[["fac8e996.d8a5f8"]]},{"id":"fac8e996.d8a5f8","type":"smooth","z":"dea9ee4a.091b4","g":"48a6e120.1944f","name":"","property":"payload","action":"low","count":"1","round":"4","mult":"single","reduce":false,"x":460,"y":940,"wires":[["c69da0e5.62a6a"]]},{"id":"c69da0e5.62a6a","type":"link out","z":"dea9ee4a.091b4","g":"48a6e120.1944f","name":"[result] O2","links":["f3aea60c.da7188","badf91d4.f46ac","8e11e07.fd1a72"],"x":575,"y":940,"wires":[]},{"id":"33546c1e.cf2274","type":"function","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"cekO2tol","func":"var O2_val = msg.payload;\nvar O2_setpoint = global.get(\"set_o2\");\nvar O2_tolerance = global.get(\"o2tol\");\n\n// var O2_dif = Math.abs(global.get(\"set_o2\") - O2_val);\nvar O2_dif = Math.abs(O2_setpoint - O2_val);\nvar stat = \"08_OFF\";\n// if(O2_dif >= global.get(\"set_o2tol\")){stat = \"08_ON\";}\nif(O2_dif >= O2_tolerance){stat = \"08_ON\";}\n\nmsg.payload = stat;\n// msg.debug1 = O2_setpoint;\n// msg.debug2 = O2_tolerance;\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":1060,"wires":[["6e21d6a8.649ad8","86e6eabb.fd5be8"]]},{"id":"f3aea60c.da7188","type":"link in","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"[check] O2tol","links":["c69da0e5.62a6a","4a01fcb8.9f9924","86714de5.8225b","9cf8838b.2d7b5","b681f87d.ad3908"],"x":195,"y":1060,"wires":[["33546c1e.cf2274"]]},{"id":"535a0127.edfce","type":"comment","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"Check for O2tol (OK)","info":"Function OK\nTest OK","x":260,"y":1020,"wires":[]},{"id":"1b71d43.861ce2c","type":"link in","z":"dea9ee4a.091b4","g":"f4e4bbf6.cdb9c8","name":"to calcBit2Flow","links":["4f5d0127.7ded2","cfa63c08.fd6ac"],"x":155,"y":1240,"wires":[["e8d6d6a6.b0f758","c0b72a1b.1be3b8","16d68c2a.3fc344","11031a72.ea8b76","32b9a09b.3b5c5","31276aeb.eaf5a6"]]},{"id":"5531f708.fdf1e8","type":"link in","z":"dea9ee4a.091b4","g":"48a6e120.1944f","name":"to calcBit2Oxy","links":["2e95d92d.763386","e690334.e651ed"],"x":135,"y":940,"wires":[["4ec1b16b.1031e"]]},{"id":"da5f8db0.5ff25","type":"link out","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"[alarm] O2tol","links":["31673605.46d5aa","badf91d4.f46ac"],"x":575,"y":1060,"wires":[]},{"id":"e7fe6470.448a98","type":"link out","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"[alarm] Fighting","links":["131aa11f.1d26df","31673605.46d5aa","ae15df76.3131b","b4616265.62e1f"],"x":2215,"y":1080,"wires":[]},{"id":"d6f95168.7ffe2","type":"debug","z":"dea9ee4a.091b4","g":"3fd50e71.f698d2","name":"debug Sensor Oxygen","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":880,"y":1060,"wires":[]},{"id":"badf91d4.f46ac","type":"link in","z":"dea9ee4a.091b4","g":"3fd50e71.f698d2","name":"[debug] Ox","links":["c69da0e5.62a6a","da5f8db0.5ff25"],"x":740,"y":1060,"wires":[["d6f95168.7ffe2"]]},{"id":"5f603a67.2e3984","type":"comment","z":"dea9ee4a.091b4","g":"3fd50e71.f698d2","name":"debug","info":"","x":770,"y":1020,"wires":[]},{"id":"5be6e97d.567918","type":"function","z":"dea9ee4a.091b4","g":"61ddad28.d51b94","name":"cekOverPressure","func":"var pres_val = msg.payload;\nvar lim = global.get(\"hiplimit\");\n// var stat = \"01_OFF\";\nvar stat = \"\";\n\nif(pres_val > lim) {\n    stat = \"01_ON\";\n    newmsg = {'payload': '' };\n    newmsg.payload = stat;\n    return newmsg;\n}\n\n// newmsg = {'payload': '' };\n// newmsg.payload = stat;\n// return newmsg;","outputs":1,"noerr":0,"x":1670,"y":1560,"wires":[["dfc70123.27b7f"]]},{"id":"b1c8636a.eb9be","type":"link in","z":"dea9ee4a.091b4","g":"61ddad28.d51b94","name":"[check] Fighting","links":["4a1fa4ed.8ed21c","db521787.1c55e8","5b7c282.4b0aad8","cb3e71d2.4d081","2799042e.d5a3ac"],"x":1535,"y":1560,"wires":[["5be6e97d.567918"]]},{"id":"ff8cfa2b.447d08","type":"comment","z":"dea9ee4a.091b4","g":"61ddad28.d51b94","name":"Check for Over Pressure","info":"Test OK","x":1610,"y":1520,"wires":[]},{"id":"dfc70123.27b7f","type":"link out","z":"dea9ee4a.091b4","g":"61ddad28.d51b94","name":"[alarm] HighPres","links":["31673605.46d5aa","ae15df76.3131b"],"x":1795,"y":1560,"wires":[]},{"id":"cb3d77d7.21fc18","type":"debug","z":"dea9ee4a.091b4","g":"e679fdcb.40016","name":"debug Sensor Pressure","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2710,"y":1760,"wires":[]},{"id":"ae15df76.3131b","type":"link in","z":"dea9ee4a.091b4","g":"e679fdcb.40016","name":"[debug] Pres","links":["4a1fa4ed.8ed21c","dfc70123.27b7f","e7fe6470.448a98","bc40cce.d2ceb3","f8302b21.cebd28","d8d65aa7.3b4e78","cda0c969.221fc8","348d8fdb.ec4c8","84f925a7.1fd828"],"x":2560,"y":1740,"wires":[["cb3d77d7.21fc18"]]},{"id":"82ff99d0.2b0808","type":"comment","z":"dea9ee4a.091b4","g":"e679fdcb.40016","name":"debug","info":"","x":2575,"y":1720,"wires":[]},{"id":"3571f834.01dfb8","type":"function","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"cekUnderPressure","func":"// global.set(\"UnderPress\",false);\nvar pres_val = msg.payload;\nvar lim = global.get(\"loplimit\");\n// var stat = \"02_OFF\";\nvar stat = \"\";\nvar count_start = flow.get(\"count_start\");\n\nif(pres_val < lim && count_start > 1) {\n// if(pres_val < lim) {\n    stat = \"02_ON\";\n    // global.set(\"UnderPress\",true);\n    newmsg = {'payload': '' };\n    newmsg.payload = stat;\n    return newmsg;\n}\n\n// newmsg = {'payload': '' };\n// newmsg.payload = stat;\n// return newmsg;","outputs":1,"noerr":0,"x":2090,"y":1720,"wires":[["bc40cce.d2ceb3"]]},{"id":"7315e389.c49d8c","type":"link in","z":"dea9ee4a.091b4","d":true,"g":"2c4baac9.60adc6","name":"[check] Fighting","links":["4a1fa4ed.8ed21c"],"x":1535,"y":1720,"wires":[["1b9bce64.b5cf92"]]},{"id":"1e3e90b1.9711af","type":"comment","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"Check for Under Pressure (OK MINUS)","info":"Test OK, countStart perlu ditambahkan","x":1650,"y":1680,"wires":[]},{"id":"637156ed.b40f78","type":"function","z":"dea9ee4a.091b4","g":"3f9cc238.b141ce","name":"cekPEEPLow","func":"// var breathing_phase = global.get(\"breathing_phase\");\n\nvar pres_val = msg.payload;\nvar lim = global.get(\"set_peep\");\nvar kond = global.get(\"mode_on_off\");\n\nvar stat = \"07_OFF\";\nvar lim_tol = 0.1*lim;\nlim = lim-lim_tol;\n\nif(pres_val < lim && kond == 1) {\n    stat = \"07_ON\";\n}\n\nnewmsg = {'payload': '' };\nnewmsg.payload = stat;\nreturn newmsg;","outputs":1,"noerr":0,"x":2200,"y":1560,"wires":[["f8302b21.cebd28"]]},{"id":"fad18dba.be12a","type":"link in","z":"dea9ee4a.091b4","g":"3f9cc238.b141ce","name":"[check] Fighting","links":["4a1fa4ed.8ed21c","db521787.1c55e8","5b7c282.4b0aad8"],"x":1935,"y":1560,"wires":[["d84365c9.81d3a8"]]},{"id":"9202e47b.087408","type":"comment","z":"dea9ee4a.091b4","g":"3f9cc238.b141ce","name":"Check for Low PEEP (OK)","info":"Test OK","x":2010,"y":1520,"wires":[]},{"id":"f8302b21.cebd28","type":"link out","z":"dea9ee4a.091b4","g":"3f9cc238.b141ce","name":"[alarm] LowPEEP","links":["ae15df76.3131b","31673605.46d5aa"],"x":2315,"y":1560,"wires":[]},{"id":"8971adc6.fd3dc","type":"link in","z":"dea9ee4a.091b4","d":true,"g":"f308294.a213bd8","name":"[check] Spurious","links":["27b561b0.fcab6e","42fd7799.ff7448","b1c8dc4c.7ce1b"],"x":335,"y":1780,"wires":[["ac9bb3bc.078"]]},{"id":"ac9bb3bc.078","type":"function","z":"dea9ee4a.091b4","d":true,"g":"f308294.a213bd8","name":"checkOverVol","func":"var breathing_phase = global.get(\"breathing_phase\")\nvar vol_count = global.get(\"vol_count\");\nvar flow_val = msg.payload;\n\nvar alarmvol = \"06_OFF\";\n\nvol_count += flow_val;\n\nif(breathing_phase == \"eoc\"){\n    if (vol_count >= parseFloat(global.get(\"set_vol\"))) {\n       alarmvol = \"06_ON\"; \n    } \n}\n\nglobal.set(\"vol_count\", vol_count);\n\nmsg.payload = alarmvol;\nmsg.vol = vol_count;\n\nreturn msg;","outputs":1,"noerr":0,"x":475,"y":1780,"wires":[["1c5cd4ce.9f0e5b"]]},{"id":"1ff74875.1a9258","type":"link out","z":"dea9ee4a.091b4","d":true,"g":"f308294.a213bd8","name":"[alarm2] OverFlow","links":["31673605.46d5aa","b4616265.62e1f"],"x":715,"y":1780,"wires":[]},{"id":"4bde1df2.19a0f4","type":"comment","z":"dea9ee4a.091b4","g":"f308294.a213bd8","name":"Check for Over Volume (OK)","info":"Function OK, test OK","x":340,"y":1740,"wires":[]},{"id":"c7288341.d13ec","type":"comment","z":"927d9689.f973b8","g":"3f36671d.3e72c8","name":"graph data generator","info":"","x":180,"y":640,"wires":[]},{"id":"51a070b9.5344b","type":"change","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"","rules":[{"t":"set","p":"set_ie","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":140,"wires":[[]]},{"id":"30dffc27.ff8d94","type":"change","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"","rules":[{"t":"set","p":"set_rr","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":180,"wires":[[]]},{"id":"15718ce9.06eff3","type":"change","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"","rules":[{"t":"set","p":"set_o2","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":220,"wires":[[]]},{"id":"48c392db.931dec","type":"change","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"","rules":[{"t":"set","p":"set_peep","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":260,"wires":[[]]},{"id":"30f6fcdb.58a144","type":"change","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"","rules":[{"t":"set","p":"set_vol","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":300,"wires":[[]]},{"id":"145934d9.c4745b","type":"comment","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"editor breathing parameters","info":"","x":1380,"y":100,"wires":[]},{"id":"228d020d.2323ae","type":"link in","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"from editor ie","links":["953eaf6b.52996"],"x":1295,"y":140,"wires":[["51a070b9.5344b"]]},{"id":"41601ef0.27069","type":"link in","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"from editor rr","links":["f9b71d27.834f7"],"x":1295,"y":180,"wires":[["30dffc27.ff8d94"]]},{"id":"3157c4a6.447b7c","type":"link in","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"from editor o2","links":["e341c51f.ad4088"],"x":1295,"y":220,"wires":[["15718ce9.06eff3"]]},{"id":"df7a575e.bbefa8","type":"link in","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"from editor peep","links":["af08716c.4e3fb"],"x":1295,"y":260,"wires":[["48c392db.931dec"]]},{"id":"ff370422.368ae8","type":"link in","z":"927d9689.f973b8","g":"eccb53b5.b0357","name":"from editor vol","links":["979fa7b8.14cbe8"],"x":1295,"y":300,"wires":[["30f6fcdb.58a144"]]},{"id":"8a00fcfa.6838e","type":"change","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"","rules":[{"t":"set","p":"hiplimit","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":440,"wires":[[]]},{"id":"c6e22175.4b938","type":"comment","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"editor alarm parameters","info":"","x":1360,"y":400,"wires":[]},{"id":"2a426ace.16df96","type":"change","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"","rules":[{"t":"set","p":"loplimit","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1510,"y":480,"wires":[[]]},{"id":"98a3d9.70a3cc28","type":"change","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"","rules":[{"t":"set","p":"o2tol","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1500,"y":520,"wires":[[]]},{"id":"b9849927.030618","type":"link in","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"from editor hiplimit","links":["5198e279.628d1c"],"x":1295,"y":440,"wires":[["8a00fcfa.6838e"]]},{"id":"65fbf9ba.6943c8","type":"link in","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"from editor loplimit","links":["924206.fb57adf8"],"x":1295,"y":480,"wires":[["2a426ace.16df96"]]},{"id":"76ae0556.2b69cc","type":"link in","z":"927d9689.f973b8","g":"b66742a7.557e6","name":"from editor o2tol","links":["f66bd94e.cc3788"],"x":1295,"y":520,"wires":[["98a3d9.70a3cc28"]]},{"id":"972827e9.23a288","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"added connection from dashboard, by BWE ------------------------------------------------","info":"","x":340,"y":1140,"wires":[]},{"id":"63258e24.c72f5","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt start command","info":"","x":140,"y":1180,"wires":[]},{"id":"3f279997.156ce6","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from start bt","links":["f9377632.a92ce8"],"x":195,"y":1220,"wires":[["d8f5db00.78ff38","e2811e36.a466d"]]},{"id":"94978591.96e0c8","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt stop command","info":"","x":160,"y":1300,"wires":[]},{"id":"74f1b1bf.0efed","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from stop bt","links":["581231ac.514fc"],"x":215,"y":1340,"wires":[["59f229d6.ee9ca8"]]},{"id":"e115d480.807158","type":"comment","z":"927d9689.f973b8","g":"1724d20e.22528e","name":"editor mode mandatory/assisted","info":"","x":1390,"y":620,"wires":[]},{"id":"20338bc5.872254","type":"change","z":"927d9689.f973b8","g":"1724d20e.22528e","name":"","rules":[{"t":"set","p":"modemandatory","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":680,"wires":[[]]},{"id":"c8417a3a.212d58","type":"change","z":"927d9689.f973b8","g":"1724d20e.22528e","name":"","rules":[{"t":"set","p":"modemandatory","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1480,"y":720,"wires":[[]]},{"id":"bf104aaf.068e68","type":"link in","z":"927d9689.f973b8","g":"1724d20e.22528e","name":"from mandatory choice","links":["2fbac5a6.5764ca"],"x":1275,"y":680,"wires":[["20338bc5.872254"]]},{"id":"42697e6b.2e817","type":"link in","z":"927d9689.f973b8","g":"1724d20e.22528e","name":"from assisted choice","links":["4116245a.4a3cbc"],"x":1275,"y":720,"wires":[["c8417a3a.212d58"]]},{"id":"6edada01.7d3e94","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt breathing updated","info":"","x":170,"y":1500,"wires":[]},{"id":"2e787e04.3ab6c2","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from trigger breathing bt","links":["299946d3.4debca"],"x":215,"y":1540,"wires":[[]]},{"id":"2b359a2f.5de826","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt alarm updated","info":"","x":360,"y":1500,"wires":[]},{"id":"85dd86d.f7c4278","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from trigger alarm bt","links":["15e84c24.fd05c4","43aeaf3f.ec01f"],"x":415,"y":1540,"wires":[[]]},{"id":"b1b71f46.9e51","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt mode updated","info":"","x":540,"y":1500,"wires":[]},{"id":"b03c1636.e2f108","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from trigger mode bt","links":["1ac2ca74.3a7036"],"x":595,"y":1540,"wires":[[]]},{"id":"c27e64bf.aa0358","type":"exec","z":"811eb35.554d75","d":true,"g":"397438a9.9119d8","command":"python3 -u ~/ventilator/stepper_driver_v3.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":270,"y":240,"wires":[[],[],[]]},{"id":"d72bef2d.59b31","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"Buzzer","info":"","x":190,"y":2780,"wires":[]},{"id":"94c1c4f0.a76b38","type":"comment","z":"927d9689.f973b8","g":"bafdc0d0.905d8","name":"vnc port 1 runner","info":"","x":180,"y":880,"wires":[]},{"id":"2f2888da.55dd18","type":"inject","z":"927d9689.f973b8","g":"bafdc0d0.905d8","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":190,"y":920,"wires":[["2874e128.136cfe"]]},{"id":"2874e128.136cfe","type":"exec","z":"927d9689.f973b8","g":"bafdc0d0.905d8","command":"vncserver","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":340,"y":920,"wires":[[],[],[]]},{"id":"c5a345cf.c8bcb8","type":"link in","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from buzzer control off","links":["e618bb00.722458"],"x":575,"y":3320,"wires":[["a00b20be.2635a"]]},{"id":"50878b9f.37e794","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"bt mute off","info":"","x":260,"y":3240,"wires":[]},{"id":"61d887ea.962de8","type":"link in","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from buzzer control on","links":["856dc837.6c15d8"],"x":335,"y":3180,"wires":[["32a43a10.5359e6"]]},{"id":"6b8580b6.49a36","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"bt mute on","info":"","x":260,"y":3140,"wires":[]},{"id":"956dff3e.cc8ca","type":"function","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"setBuzzerLevel","func":"    var high = false;\n    var med = false;\n    var low = false;\n    var mute = global.get(\"buzzer_mute\");\n    var level = 0;\n    \n    var alarm_01 = global.get(\"alarm_01\");\n    var alarm_02 = global.get(\"alarm_02\");\n    var alarm_03 = global.get(\"alarm_03\");\n    var alarm_04 = global.get(\"alarm_04\");\n    var alarm_05 = global.get(\"alarm_05\");\n    var alarm_06 = global.get(\"alarm_06\");\n    var alarm_07 = global.get(\"alarm_07\");\n    var alarm_08 = global.get(\"alarm_08\");\n    \n    high = (alarm_01 || alarm_02 || alarm_03 || alarm_04);\n    med = (alarm_05 || alarm_06 || alarm_07);\n    low = alarm_08;\n    \n    // if (mute) {level = 0;}\n    // else if (high) {level = 3;}\n    // else if (med) {level = 2;}\n    // else if (low) {level = 1;}\n    \n    if (mute) {level = 0;}\n    else {\n        if(high){level=3;}\n            else {\n                if(med){level=2;}\n                    else{\n                        if(low){level=1;}\n                    }\n            }\n    }\n    \n    \n    msg.topic = \"buzzer/level\";\n    msg.payload = level;\n    msg.stat_high = high;\n    msg.stat_med = med;\n    msg.stat_low = low;\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":2840,"wires":[["3971c226.5cc62e"]]},{"id":"a00b20be.2635a","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"buzzer_mute","pt":"global","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":750,"y":3320,"wires":[["f88df0b6.df064"]]},{"id":"32a43a10.5359e6","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"buzzer_mute","pt":"global","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":510,"y":3180,"wires":[["2fa6ce0c.a892c2"]]},{"id":"6dc6508c.f0bdb","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"08_ON","payloadType":"str","x":210,"y":2660,"wires":[["31b79ed6.ad2b62"]]},{"id":"b7a8368c.4a9828","type":"function","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"setAlarmGlobalVar","func":"switch (msg.no) {\n    case \"01\": global.set(\"alarm_01\", msg.payload); break;\n    case \"02\": global.set(\"alarm_02\", msg.payload); break;\n    case \"03\": global.set(\"alarm_03\", msg.payload); break;\n    case \"04\": global.set(\"alarm_04\", msg.payload); break;\n    case \"05\": global.set(\"alarm_05\", msg.payload); break;\n    case \"06\": global.set(\"alarm_06\", msg.payload); break;\n    case \"07\": global.set(\"alarm_07\", msg.payload); break;\n    case \"08\": global.set(\"alarm_08\", msg.payload); break;\n    case \"99\":\n        global.set(\"alarm_01\", msg.payload);\n        global.set(\"alarm_02\", msg.payload);\n        global.set(\"alarm_03\", msg.payload);\n        global.set(\"alarm_04\", msg.payload);\n        global.set(\"alarm_05\", msg.payload);\n        global.set(\"alarm_06\", msg.payload);\n        global.set(\"alarm_07\", msg.payload);\n        global.set(\"alarm_08\", msg.payload);\n        break;\n}\n\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":2620,"wires":[["1b9881e9.395ade"]]},{"id":"7213e951.89b0a8","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"bt alarm reset (v2)","info":"","x":290,"y":3360,"wires":[]},{"id":"559e0520.f5d26c","type":"link in","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from alarm reset bt","links":["44282871.69d8d8"],"x":335,"y":3400,"wires":[["7a83357a.6afa5c"]]},{"id":"7a83357a.6afa5c","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"99_OFF","tot":"str"},{"t":"set","p":"count_start","pt":"flow","to":"0","tot":"str"},{"t":"set","p":"low_pres_detect","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":480,"y":3400,"wires":[["cb5518a7.bf2708"]]},{"id":"cb5518a7.bf2708","type":"link out","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from setAlarmReset","links":["31673605.46d5aa"],"x":615,"y":3400,"wires":[]},{"id":"24e7972b.3edcb8","type":"link in","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"setBuzzerLevel()","links":["1b9881e9.395ade","f88df0b6.df064","7385ff53.e96d4","2fa6ce0c.a892c2"],"x":195,"y":2840,"wires":[["956dff3e.cc8ca"]]},{"id":"1b9881e9.395ade","type":"link out","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"from setAlarmGlobalVar","links":["24e7972b.3edcb8"],"x":775,"y":2620,"wires":[]},{"id":"3ae81c0b.f342c4","type":"inject","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"Initialize global var. (buzzer_mute and alarm_0x) (v2)","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":400,"y":3280,"wires":[["a00b20be.2635a","990e7771.64e5c8"]]},{"id":"990e7771.64e5c8","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"99_OFF","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":3280,"wires":[["d2c73766.b63978"]]},{"id":"f88df0b6.df064","type":"link out","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from setMuteOff","links":["24e7972b.3edcb8"],"x":895,"y":3320,"wires":[]},{"id":"d2c73766.b63978","type":"link out","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from initialMuteOff","links":["31673605.46d5aa"],"x":855,"y":3280,"wires":[]},{"id":"2fa6ce0c.a892c2","type":"link out","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"from setMuteOn","links":["24e7972b.3edcb8"],"x":675,"y":3180,"wires":[]},{"id":"730f771d.6ad218","type":"switch","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"toneLevelSwitch","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"3","vt":"num"},{"t":"eq","v":"2","vt":"num"},{"t":"neq","v":"2","vt":"num"},{"t":"eq","v":"1","vt":"num"},{"t":"neq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":6,"x":640,"y":2840,"wires":[["632b827f.a0febc","900afbe4.b7c8d8"],["cbfe8a09.cd51e8"],["d22b934c.ec2b8"],["fc8cf0e0.7941e"],["5e9dc28f.33105c"],["900afbe4.b7c8d8","5b863297.ea19bc"]]},{"id":"632b827f.a0febc","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"buzzer_on","rules":[{"t":"set","p":"payload","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":2820,"wires":[["243f9a3a.002d86"]]},{"id":"5b863297.ea19bc","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"buzzer_off","rules":[{"t":"set","p":"payload","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":1490,"y":2880,"wires":[["243f9a3a.002d86"]]},{"id":"243f9a3a.002d86","type":"rpi-gpio out","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"BUZZER_PIN","pin":"7","set":true,"level":"0","freq":"","out":"out","x":1780,"y":2820,"wires":[]},{"id":"a2f103ba.ee388","type":"inject","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"1","payloadType":"num","x":1590,"y":2980,"wires":[["243f9a3a.002d86"]]},{"id":"7feaebf2.c87784","type":"inject","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"0","payloadType":"num","x":1590,"y":2920,"wires":[["243f9a3a.002d86"]]},{"id":"acd088e3.e94be8","type":"delay","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","pauseType":"delay","timeout":"250","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1210,"y":3020,"wires":[["bf8a08c8.05bc88"]]},{"id":"70b84d47.93d774","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1200,"y":2980,"wires":[["acd088e3.e94be8","632b827f.a0febc"]]},{"id":"bf8a08c8.05bc88","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1220,"y":3060,"wires":[["4eaa88ab.caae58"]]},{"id":"cbfe8a09.cd51e8","type":"trigger","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-500","extend":false,"units":"ms","reset":"0","bytopic":"all","outputs":1,"x":1000,"y":2980,"wires":[["70b84d47.93d774"]]},{"id":"d22b934c.ec2b8","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":960,"y":2940,"wires":[["cbfe8a09.cd51e8"]]},{"id":"5e9dc28f.33105c","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":3120,"wires":[["fc8cf0e0.7941e"]]},{"id":"fc8cf0e0.7941e","type":"trigger","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","op1":"1","op2":"0","op1type":"str","op2type":"str","duration":"-1","extend":false,"units":"s","reset":"0","bytopic":"all","outputs":1,"x":880,"y":3160,"wires":[["13d35b64.709d15"]]},{"id":"13d35b64.709d15","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":3160,"wires":[["fa7fa22a.467c6","632b827f.a0febc"]]},{"id":"fa7fa22a.467c6","type":"delay","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1090,"y":3200,"wires":[["241c579c.3d9818"]]},{"id":"241c579c.3d9818","type":"change","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1100,"y":3240,"wires":[["4eaa88ab.caae58"]]},{"id":"a434dc84.5c273","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"01_ON","payloadType":"str","x":210,"y":2460,"wires":[["31b79ed6.ad2b62"]]},{"id":"4d44a657.63fae8","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"01_OFF","payloadType":"str","x":220,"y":2500,"wires":[["31b79ed6.ad2b62"]]},{"id":"6c1f750b.72d76c","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"08_OFF","payloadType":"str","x":220,"y":2620,"wires":[["31b79ed6.ad2b62"]]},{"id":"8a893358.1b584","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"05_ON","payloadType":"str","x":210,"y":2540,"wires":[["31b79ed6.ad2b62"]]},{"id":"36ff55a1.9bc1ca","type":"inject","z":"dea9ee4a.091b4","g":"22fbdc2c.b3be34","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"05_OFF","payloadType":"str","x":220,"y":2580,"wires":[["31b79ed6.ad2b62"]]},{"id":"a89d722a.2df86","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"Level Low Routine","info":"","x":870,"y":3080,"wires":[]},{"id":"8915082f.65ac68","type":"comment","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"Level Medium Routine","info":"","x":980,"y":2900,"wires":[]},{"id":"d0b399e2.a73268","type":"function","z":"811eb35.554d75","d":true,"g":"12e07944.a71337","name":"setStepCount","func":"//-- Var declaration\nvar ie = global.get(\"set_ie\");\nvar rr = global.get(\"set_rr\");\nvar peep = global.get(\"set_peep\");\nvar vol = global.get(\"set_vol\");\nvar pulse_width_i = 1000; // dummy value\nvar step_count = 1;\n\n//-- Cycle time\nvar cycle_period = 60000000/rr; //in microsec\nvar inhale_time = cycle_period/(ie+1);    //in microsec\n// step_count = vol*2;\n// pulse_width_i = Math.round(inhale_time/step_count);\n\n/* note from pak Samudra\nLinear move = vol / 153.86\nRotasi shaft = linearMove / 0.4\nRotasi Motor = rotasi shaft * 10/60 = 2.166 rotasi\nIE 1:3 RR 30, waktu inhale 0.5 detik\n2.166 rotasi/0.5detik = 4.333 rps = 259.97 rpm\n*/\n\n//-- Piston mechanism\nconst PUSHER_DIA = 14; // in cm\nvar pusher_area = 3.14 * 0.25 * ((PUSHER_DIA)^2); // in cm^2\n\n//var moving_dist_linear = 7.1494; // min to max movement, in cm\nvar moving_dist_linear = vol / pusher_area; // in cm, vol in mL\n\nconst LIN_SCREW_PITCH = 0.4; // in cm per rotation\nvar shaft_rotation = moving_dist_linear / LIN_SCREW_PITCH; // in rotation, moving_dist_linear in cm\n\nconst MOTOR_TO_SHAFT_RATIO = 10/300; // based on pulley configuration\nvar motor_rotation = shaft_rotation * MOTOR_TO_SHAFT_RATIO; // in rotation\n\nconst STEPPER_STEP_PER_ROTATION = 400; // based on dip switch on driver\nvar stepper_step_amount = motor_rotation * STEPPER_STEP_PER_ROTATION;\n\n//-- Pulse_width\npulse_width_i = Math.round(inhale_time/stepper_step_amount);\nstepper_step_amount = Math.round(stepper_step_amount);\n\n//-- Payload assignment\nmsg.pulse_width = pulse_width_i;\nmsg.step_count = stepper_step_amount;\nmsg.rr = rr;\nmsg.ie = ie;\nmsg.vti = vol;\n\nreturn msg;","outputs":1,"noerr":0,"x":240,"y":620,"wires":[["5333e6e1.f3d708","e50eeca4.82d9e","f2ccc686.110628","c125dd1d.bcc5d","8a051b1.934bce8"]]},{"id":"f0fdd752.c5d718","type":"switch","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"check breathing_phase","property":"breathing_phase","propertyType":"global","rules":[{"t":"cont","v":"eoc","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1830,"y":1020,"wires":[["c79ed7cf.d973e8"],["e40ea5a6.f76ec8"]]},{"id":"c79ed7cf.d973e8","type":"function","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"cekFighting","func":"newmsg = {payload: \"\"};\n\n// Kondisi sekarang\nvar peak_count = flow.get(\"peak_count\");\nvar peak_val = flow.get(\"peak_val_f\");\n\n// var stat = \"03_OFF\";\nvar stat = \"\";\nvar pres_val = msg.payload;\n\nif(pres_val > peak_val){\n    // peak_val += pres_val;\n    peak_val = pres_val;\n    flow.set(\"peak_val_f\", peak_val);\n} else {\n    if(peak_val - pres_val >= 4.5){\n        peak_count += 1;\n        flow.set(\"peak_count\", peak_count);\n        newmsg.pv = peak_val;\n        peak_val = 0;\n        flow.set(\"peak_val_f\", peak_val)\n    }\n}\n\nif (peak_count > 2){\n    flow.set(\"peak_count\",0);\n    stat = \"03_ON\";\n    newmsg.payload = stat;\n    newmsg.pc = peak_count;\n    // newmsg.pv = peak_val;\n    return newmsg;\n}\n// newmsg = {payload: \"\"};\n// newmsg.payload = stat;\n// return newmsg;","outputs":1,"noerr":0,"x":2050,"y":1020,"wires":[["3d51cb51.7319e4","e7fe6470.448a98"]]},{"id":"e40ea5a6.f76ec8","type":"change","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"reset_peaks","rules":[{"t":"set","p":"peak_count","pt":"flow","to":"0","tot":"num"},{"t":"set","p":"peak_val_f","pt":"flow","to":"0","tot":"num"},{"t":"set","p":"peak_val","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2070,"y":1080,"wires":[[]]},{"id":"5333e6e1.f3d708","type":"function","z":"811eb35.554d75","g":"12e07944.a71337","name":"sendPulse","func":"msg.topic = \"root/stepper/pulse_width\";\nmsg.payload = msg.pulse_width;\n// msg.payload = 1000;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":660,"wires":[["7aec1b97.6f0aa4"]]},{"id":"e50eeca4.82d9e","type":"function","z":"811eb35.554d75","g":"12e07944.a71337","name":"sendStepCount","func":"msg.topic = \"root/stepper/step_count_set\";\nmsg.payload = msg.step_count;\n// msg.payload = 500;\nreturn msg;","outputs":1,"noerr":0,"x":280,"y":820,"wires":[["7aec1b97.6f0aa4","5467fe45.0df29"]]},{"id":"1c39e554.ed2e7b","type":"change","z":"811eb35.554d75","d":true,"g":"12e07944.a71337","name":"send Mode","rules":[{"t":"set","p":"topic","pt":"msg","to":"root/stepper/mode","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"modemandatory","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":940,"wires":[["7aec1b97.6f0aa4"]]},{"id":"aeefd2b0.025fb","type":"change","z":"811eb35.554d75","g":"12e07944.a71337","name":"send Enable","rules":[{"t":"set","p":"topic","pt":"msg","to":"root/stepper/ena","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":270,"y":900,"wires":[["1c39e554.ed2e7b","7aec1b97.6f0aa4","b262e001.0aaaa"]]},{"id":"59f229d6.ee9ca8","type":"change","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"End of Cycle stop","rules":[{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"mode_on_off","pt":"global","to":"0","tot":"num"},{"t":"set","p":"low_pres_detect","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":1340,"wires":[["cbaf3b7.36d9cc8"]]},{"id":"950306ec.ba8f58","type":"mqtt in","z":"dea9ee4a.091b4","d":true,"g":"e4e1bab7.4fe338","name":"","topic":"root/stepper/br_phase","qos":"2","datatype":"auto","broker":"913f80b.7920f8","x":1620,"y":240,"wires":[["c85dbcde.22e18"]]},{"id":"5dce6d1b.882164","type":"comment","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"Find PIP,IPP,PEEP","info":"","x":1590,"y":1200,"wires":[]},{"id":"c85dbcde.22e18","type":"change","z":"dea9ee4a.091b4","d":true,"g":"e4e1bab7.4fe338","name":"","rules":[{"t":"set","p":"breathing_phase","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"payload","pt":"msg","to":"breathing_phase","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":1840,"y":240,"wires":[["7990cbd8.8d10f4","afa43b6c.6cf318","f1bd5a47.e40fb8"]]},{"id":"7990cbd8.8d10f4","type":"debug","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"debug breathingPhase1","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":2290,"y":340,"wires":[]},{"id":"f2ccc686.110628","type":"change","z":"811eb35.554d75","g":"12e07944.a71337","name":"send RR","rules":[{"t":"set","p":"topic","pt":"msg","to":"root/stepper/rr","tot":"str"},{"t":"set","p":"payload","pt":"msg","to":"rr","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":700,"wires":[["7aec1b97.6f0aa4"]]},{"id":"c9c8ffc7.db24b","type":"mqtt in","z":"811eb35.554d75","d":true,"g":"397438a9.9119d8","name":"","topic":"root/stepper/#","qos":"2","datatype":"auto","broker":"913f80b.7920f8","x":170,"y":300,"wires":[["ea0fe1f6.38887"]]},{"id":"ea0fe1f6.38887","type":"debug","z":"811eb35.554d75","d":true,"g":"397438a9.9119d8","name":"debug stepper_driver.py","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":250,"y":360,"wires":[]},{"id":"4940b10.c41b35","type":"link in","z":"927d9689.f973b8","g":"3f36671d.3e72c8","name":"to pressure graph","links":["4a1fa4ed.8ed21c"],"x":255,"y":680,"wires":[["569bf189.12a8d"]]},{"id":"ddf371a1.74b9b","type":"debug","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"debug bit2pres","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1700,"y":800,"wires":[]},{"id":"1e532d90.0f27c2","type":"function","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"findPIP","func":"var pres_now = parseFloat(msg.payload);\nvar pip_now = parseFloat(global.get(\"pip_val\"));\n\nif (pres_now > pip_now) {\n    pip_now = pres_now;\n    global.set(\"pip_val\",pip_now);\n}\n\n// msg.payload = pip_now;\n\nreturn msg;","outputs":1,"noerr":0,"x":1780,"y":1240,"wires":[["91bd9d36.309c7"]]},{"id":"91bd9d36.309c7","type":"change","z":"dea9ee4a.091b4","d":true,"g":"2ac90dd7.4a53f2","name":"","rules":[{"t":"set","p":"pip_val","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"pip_val","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1960,"y":1240,"wires":[[]]},{"id":"ee53cec3.8c1f8","type":"link in","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"to findIPP v2","links":["4a1fa4ed.8ed21c"],"x":1535,"y":1240,"wires":[["25b86ff1.1f147"]]},{"id":"9eef4fc2.6358a","type":"switch","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ec","vt":"str"},{"t":"cont","v":"ei","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":1650,"y":1360,"wires":[["9c12352.17510c8","41d85bab.453d44","afe38847.8781d8"],["35a917fb.8ed588"]]},{"id":"41d85bab.453d44","type":"link out","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"from BreathingPhase eoc","links":["3352e1ad.ee778e"],"x":1915,"y":1320,"wires":[]},{"id":"3926d53d.28079a","type":"change","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","rules":[{"t":"set","p":"pres_val","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":2130,"y":840,"wires":[[]]},{"id":"98772ff8.7f5bb","type":"change","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","rules":[{"t":"set","p":"ipp_val","pt":"global","to":"pres_val","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1990,"y":1400,"wires":[[]]},{"id":"9c12352.17510c8","type":"change","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","rules":[{"t":"set","p":"peep_val","pt":"global","to":"pres_val","tot":"flow"}],"action":"","property":"","from":"","to":"","reg":false,"x":1990,"y":1360,"wires":[[]]},{"id":"a4e6dc6a.fc495","type":"comment","z":"927d9689.f973b8","g":"cd13c448.f459a8","name":"pressure data generator","info":"","x":200,"y":1380,"wires":[]},{"id":"63cc357.3098dcc","type":"inject","z":"927d9689.f973b8","d":true,"g":"cd13c448.f459a8","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":190,"y":1420,"wires":[["de9670f8.b9e6e"]]},{"id":"de9670f8.b9e6e","type":"trigger","z":"927d9689.f973b8","d":true,"g":"cd13c448.f459a8","name":"","op1":"true","op2":"0","op1type":"bool","op2type":"str","duration":"-70","extend":false,"units":"ms","reset":"","bytopic":"all","outputs":1,"x":370,"y":1420,"wires":[["43c4ea85.0261f4"]]},{"id":"827576b6.3cdd78","type":"mqtt out","z":"927d9689.f973b8","d":true,"g":"cd13c448.f459a8","name":"","topic":"raw_pressure_val","qos":"","retain":"","broker":"913f80b.7920f8","x":750,"y":1420,"wires":[]},{"id":"43c4ea85.0261f4","type":"random","z":"927d9689.f973b8","d":true,"g":"cd13c448.f459a8","name":"","low":"0.72","high":"0.78","inte":"false","property":"payload","x":560,"y":1420,"wires":[["827576b6.3cdd78"]]},{"id":"2eb8ee22.6c1052","type":"link in","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"from mqttPressure, to calcBit2Pres","links":["6fcced42.5b3654"],"x":1515,"y":760,"wires":[["ddf371a1.74b9b","85805513.f0fce8","d7dc008d.138f4","5416e29a.b5ec5c"]]},{"id":"2062427e.47c38e","type":"link in","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"to changeParameterOTG","links":["fd6af82d.3aaa38","43aeaf3f.ec01f"],"x":135,"y":1420,"wires":[["7a7dfee6.4255b","614402f2.10a54c"]]},{"id":"c125dd1d.bcc5d","type":"change","z":"811eb35.554d75","g":"12e07944.a71337","name":"send IE","rules":[{"t":"set","p":"payload","pt":"msg","to":"ie","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"root/stepper/ie","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":740,"wires":[["7aec1b97.6f0aa4"]]},{"id":"8a051b1.934bce8","type":"change","z":"811eb35.554d75","g":"12e07944.a71337","name":"send Vti","rules":[{"t":"set","p":"payload","pt":"msg","to":"vti","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"root/stepper/vti","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":260,"y":780,"wires":[["7aec1b97.6f0aa4"]]},{"id":"7aec1b97.6f0aa4","type":"link out","z":"811eb35.554d75","g":"12e07944.a71337","name":"from setStepCount","links":["232f672a.063fa8"],"x":435,"y":620,"wires":[]},{"id":"cbaf3b7.36d9cc8","type":"link out","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from commandStop","links":["245b4152.6de98e"],"x":595,"y":1340,"wires":[]},{"id":"5467fe45.0df29","type":"switch","z":"811eb35.554d75","g":"12e07944.a71337","name":"is fromSetValue","property":"fromSetValue","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":280,"y":860,"wires":[[],["aeefd2b0.025fb"]]},{"id":"d8f5db00.78ff38","type":"change","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"","rules":[{"t":"set","p":"mode_on_off","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":390,"y":1220,"wires":[["6b22972f.adc3a8"]]},{"id":"245b4152.6de98e","type":"link in","z":"811eb35.554d75","g":"1fcfef33.0903a1","name":"to setStepCount","links":["6b22972f.adc3a8","614402f2.10a54c","cbaf3b7.36d9cc8"],"x":75,"y":560,"wires":[["d0b399e2.a73268","eedaf936.6613e8","8b16463d.d689f8"]]},{"id":"6b22972f.adc3a8","type":"link out","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from commandStart","links":["245b4152.6de98e","a89df4d9.1a1988"],"x":575,"y":1220,"wires":[]},{"id":"6381045a.8e69fc","type":"comment","z":"811eb35.554d75","g":"12e07944.a71337","name":"Set stepper-raspi param","info":"","x":240,"y":580,"wires":[]},{"id":"7a7dfee6.4255b","type":"change","z":"811eb35.554d75","d":true,"g":"a58cd07e.e5b87","name":"","rules":[{"t":"set","p":"fromSetValue","pt":"msg","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":280,"y":1460,"wires":[["614402f2.10a54c"]]},{"id":"614402f2.10a54c","type":"link out","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"from setValue2","links":["245b4152.6de98e"],"x":435,"y":1420,"wires":[]},{"id":"4b5188a1.85a0d8","type":"comment","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"bt next set value","info":"","x":160,"y":1380,"wires":[]},{"id":"569bf189.12a8d","type":"influxdb out","z":"927d9689.f973b8","g":"3f36671d.3e72c8","influxdb":"a27e7919.2f3458","name":"","measurement":"pressure","precision":"","retentionPolicy":"","x":540,"y":680,"wires":[]},{"id":"34365754.56f2f8","type":"influxdb out","z":"927d9689.f973b8","g":"3f36671d.3e72c8","influxdb":"a27e7919.2f3458","name":"","measurement":"flowrate","precision":"","retentionPolicy":"","x":540,"y":760,"wires":[]},{"id":"8bf4f399.f6304","type":"influxdb out","z":"927d9689.f973b8","g":"3f36671d.3e72c8","influxdb":"a27e7919.2f3458","name":"","measurement":"volume","precision":"","retentionPolicy":"","x":540,"y":720,"wires":[]},{"id":"74f27c07.2f63f4","type":"serial in","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"Serial_read Nano_motor","serial":"85fb4f9c.e9739","x":670,"y":200,"wires":[["2d5a37a9.06bcc8","fe025649.e5e418"]]},{"id":"fe025649.e5e418","type":"debug","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"from serial_nano","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":910,"y":200,"wires":[]},{"id":"7703bffc.709e2","type":"serial out","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"Serial_write Nano_motor","serial":"85fb4f9c.e9739","x":730,"y":280,"wires":[]},{"id":"e54632d8.a9f9b","type":"comment","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"[Servo-Nano] USB-UART Read/Write Arduino Nano ","info":"","x":730,"y":160,"wires":[]},{"id":"cf279ae9.980bc8","type":"link in","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"to NanoWrite","links":["df3fdb95.7130e8"],"x":575,"y":280,"wires":[["7703bffc.709e2","b3d90eaf.ee5b4"]]},{"id":"eedaf936.6613e8","type":"function","z":"811eb35.554d75","d":true,"g":"95cc1521.e69958","name":"msgToNano","func":"var mode_on_off = global.get(\"mode_on_off\");\nvar mode_breathing = global.get(\"modemandatory\");\nif (mode_breathing) {mode_breathing = 1;}\nelse {mode_breathing = 2}\n\nif (mode_on_off != 1) {\n    mode_breathing = 0;\n}\n\nvar vti = global.get(\"set_vol\");\nvar rr = global.get(\"set_rr\");\nvar ie = global.get(\"set_ie\");\n\nmsg.payload = '<' + mode_breathing + ',' + vti + ',' + rr + ',' + ie + '>';\n\nreturn msg;","outputs":1,"noerr":0,"x":630,"y":620,"wires":[["df3fdb95.7130e8"]]},{"id":"df3fdb95.7130e8","type":"link out","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"from servo-nano setparam","links":["cf279ae9.980bc8"],"x":1155,"y":800,"wires":[]},{"id":"3d6b192c.918d06","type":"comment","z":"811eb35.554d75","g":"95cc1521.e69958","name":"Set servo-nano param","info":"","x":640,"y":580,"wires":[]},{"id":"2d5a37a9.06bcc8","type":"link out","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"from NanoRead","links":["52611f96.c3dfe","5974972c.1e45f8"],"x":835,"y":240,"wires":[]},{"id":"faab48a4.1f3cc8","type":"comment","z":"811eb35.554d75","g":"1fcfef33.0903a1","name":"Set actuator param","info":"","x":150,"y":500,"wires":[]},{"id":"545d806f.92677","type":"comment","z":"811eb35.554d75","g":"c2d936e1.2a1ef8","name":"Actuator interface","info":"","x":140,"y":60,"wires":[]},{"id":"152d0212.59fece","type":"comment","z":"811eb35.554d75","g":"397438a9.9119d8","name":"[Stepper-Raspi] MQTT to/from Python","info":"","x":230,"y":140,"wires":[]},{"id":"bf3dc839.c58ea8","type":"link in","z":"811eb35.554d75","d":true,"g":"397438a9.9119d8","name":"to stepperDriverPython","links":["a5830e1c.03e5f"],"x":175,"y":180,"wires":[["c27e64bf.aa0358"]]},{"id":"4c059b39.5cddb4","type":"exec","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","command":"python3 -u ~/ventilator/sampling_ads1115_v2.py","addpay":true,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":520,"y":260,"wires":[[],[],[]]},{"id":"2506cc60.13e724","type":"link in","z":"dea9ee4a.091b4","g":"45e00936.3721f8","name":"to adcSamplingPython","links":["a5830e1c.03e5f"],"x":235,"y":260,"wires":[["4c059b39.5cddb4"]]},{"id":"7f91fd5b.fd56e4","type":"mosca in","z":"927d9689.f973b8","d":true,"g":"4ff10457.1a975c","mqtt_port":1883,"mqtt_ws_port":8080,"name":"","username":"","password":"","dburl":"","x":210,"y":1080,"wires":[[]]},{"id":"c7999375.773a3","type":"inject","z":"927d9689.f973b8","d":true,"g":"9688cebe.f3539","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":190,"y":1240,"wires":[["3c5f5b09.7272c4"]]},{"id":"3c5f5b09.7272c4","type":"exec","z":"927d9689.f973b8","g":"9688cebe.f3539","command":"pkill python3","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":370,"y":1240,"wires":[["7545f118.54182"],["c2fe7a72.aea148"],[]]},{"id":"c2fe7a72.aea148","type":"debug","z":"927d9689.f973b8","g":"9688cebe.f3539","name":"debug python initialization","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":600,"y":1260,"wires":[]},{"id":"7545f118.54182","type":"delay","z":"927d9689.f973b8","g":"9688cebe.f3539","name":"","pauseType":"delay","timeout":"1","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":550,"y":1220,"wires":[["a5830e1c.03e5f"]]},{"id":"232f672a.063fa8","type":"link in","z":"927d9689.f973b8","d":true,"g":"4ff10457.1a975c","name":"to publishMQTT","links":["7aec1b97.6f0aa4"],"x":395,"y":1080,"wires":[["8b7889ba.98f0e8"]]},{"id":"8b7889ba.98f0e8","type":"mqtt out","z":"927d9689.f973b8","d":true,"g":"4ff10457.1a975c","name":"","topic":"","qos":"","retain":"","broker":"913f80b.7920f8","x":490,"y":1080,"wires":[]},{"id":"a5830e1c.03e5f","type":"link out","z":"927d9689.f973b8","g":"9688cebe.f3539","name":"from pythonInit","links":["bf3dc839.c58ea8","6a6a99f2.202d78","2506cc60.13e724"],"x":665,"y":1220,"wires":[]},{"id":"9312b19d.240e8","type":"comment","z":"927d9689.f973b8","g":"4ff10457.1a975c","name":"MQTT broker and publisher","info":"","x":220,"y":1040,"wires":[]},{"id":"1148e59c.112f3a","type":"comment","z":"927d9689.f973b8","g":"9688cebe.f3539","name":"Python initialization","info":"","x":180,"y":1200,"wires":[]},{"id":"7597ada3.32d6d4","type":"link in","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","links":["afa43b6c.6cf318"],"x":1535,"y":1360,"wires":[["9eef4fc2.6358a"]]},{"id":"afa43b6c.6cf318","type":"link out","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"from breathingPhase","links":["7597ada3.32d6d4","fabea049.b39e6","76448a98.74e784"],"x":2155,"y":380,"wires":[]},{"id":"83274eb8.5ab5c","type":"comment","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"Breathing phase flag","info":"","x":1510,"y":160,"wires":[]},{"id":"5974972c.1e45f8","type":"link in","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"to breathingPhaseFlag_serial","links":["2d5a37a9.06bcc8"],"x":1555,"y":340,"wires":[["9dfc3267.24e41","f1bd5a47.e40fb8"]]},{"id":"448e9e9b.83bce","type":"comment","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"MQTT interface","info":"","x":1580,"y":200,"wires":[]},{"id":"11ab769b.da7329","type":"comment","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"UART interface","info":"","x":1580,"y":300,"wires":[]},{"id":"7ca2f7ad.3e9b88","type":"comment","z":"dea9ee4a.091b4","g":"1ca5085a.d361d8","name":"Sensor sampling","info":"","x":180,"y":140,"wires":[]},{"id":"b262e001.0aaaa","type":"function","z":"811eb35.554d75","g":"12e07944.a71337","name":"send Mode","func":"mode_on_off = global.get(\"mode_on_off\");\nmode_breathing = global.get(\"modemandatory\");\nif (mode_breathing) {mode_breathing = 1;}\nelse {mode_breathing = 2}\n\nif (mode_on_off != 1) {\n    mode_breathing = 0;\n}\n\nmsg.topic = \"root/stepper/mode\";\nmsg.payload = mode_breathing;\nreturn msg;","outputs":1,"noerr":0,"x":270,"y":980,"wires":[["7aec1b97.6f0aa4"]]},{"id":"b3d90eaf.ee5b4","type":"debug","z":"811eb35.554d75","g":"32d4a9da.c61596","name":"to serial_nano","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":700,"y":320,"wires":[]},{"id":"e603bc22.98864","type":"change","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"set global pip ipp peep","rules":[{"t":"set","p":"pip_val","pt":"global","to":"-1","tot":"num"},{"t":"set","p":"ipp_val","pt":"global","to":"-1","tot":"num"},{"t":"set","p":"peep_val","pt":"global","to":"-1","tot":"num"},{"t":"set","p":"low_pres_detect","pt":"global","to":"0","tot":"num"},{"t":"set","p":"vpeak_val","pt":"global","to":"0","tot":"num"},{"t":"set","p":"fpeak_val","pt":"global","to":"0","tot":"num"},{"t":"set","p":"find_pip_flag","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":880,"y":260,"wires":[["e8cc7e57.e4712"]]},{"id":"e8cc7e57.e4712","type":"link out","z":"927d9689.f973b8","g":"4c93de5e.734b6","name":"from initialPIP,IPP,PEEP","links":["3352e1ad.ee778e"],"x":1015,"y":260,"wires":[]},{"id":"5104792f.b75598","type":"mqtt in","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"","topic":"root/adc/oxy_raw","qos":"0","datatype":"auto","broker":"913f80b.7920f8","x":280,"y":320,"wires":[["f2857c2e.330fa"]]},{"id":"2e95d92d.763386","type":"link out","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"from oxy_raw","links":["5531f708.fdf1e8","9f3d1b3e.c175d8"],"x":655,"y":640,"wires":[]},{"id":"f2857c2e.330fa","type":"function","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"parseFloat","func":"var text = msg.payload;\nmsg.topic = \"oxy_raw\";\nmsg.payload = parseFloat(text);\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":320,"wires":[["2e95d92d.763386"]]},{"id":"4c37356d.e703bc","type":"function","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"parseFloat","func":"var text = msg.payload;\nmsg.payload = parseFloat(text);\nmsg.topic = \"flow_raw\";\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":360,"wires":[["cfa63c08.fd6ac"]]},{"id":"cfa63c08.fd6ac","type":"link out","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"from flow_raw","links":["1b71d43.861ce2c","9f3d1b3e.c175d8"],"x":655,"y":680,"wires":[]},{"id":"27b97d49.28b222","type":"mqtt in","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"","topic":"root/adc/flow_raw","qos":"0","datatype":"auto","broker":"913f80b.7920f8","x":280,"y":360,"wires":[["4c37356d.e703bc"]]},{"id":"e8907601.35f608","type":"function","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"parseFloat","func":"var text = msg.payload;\nmsg.payload = parseFloat(text);\nmsg.topic = \"pres_raw\";\nreturn msg;","outputs":1,"noerr":0,"x":490,"y":400,"wires":[["6fcced42.5b3654"]]},{"id":"6fcced42.5b3654","type":"link out","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"from pres_raw","links":["2eb8ee22.6c1052","9f3d1b3e.c175d8"],"x":655,"y":720,"wires":[]},{"id":"f04dfaee.31f638","type":"mqtt in","z":"dea9ee4a.091b4","d":true,"g":"45e00936.3721f8","name":"","topic":"root/adc/pres_raw","qos":"0","datatype":"auto","broker":"913f80b.7920f8","x":290,"y":400,"wires":[["e8907601.35f608"]]},{"id":"c5824b73.6d29d8","type":"function","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"parseSamplingADC","func":"var text = msg.payload;\nvar oxy_raw = 0;\nvar flow_raw = 0;\nvar pres_raw = 0;\n\nvar indexStart = text.indexOf(\"{\");\nif ((indexStart != -1) && (text.indexOf(\"{e\") == -1)) {\n    indexNext = text.indexOf(',',indexStart);\n    oxy_raw = text.slice(indexStart+1, indexNext);\n    \n    indexStart = indexNext;\n    indexNext = text.indexOf(',',indexStart+1);\n    flow_raw = text.slice(indexStart+1, indexNext);\n    \n    indexStart = indexNext;\n    indexNext = text.indexOf(',',indexStart+1);\n    pres_raw = text.slice(indexStart+1, indexNext);\n    \n    indexStart = indexNext;\n    indexNext = text.indexOf('}',indexStart+1);\n    dt = text.slice(indexStart+1, indexNext);\n    \n    msg.data=1;\n    msg.oxy = parseFloat(oxy_raw);\n    msg.flow = parseFloat(flow_raw);\n    msg.pres = parseFloat(pres_raw);\n    msg.dt = parseFloat(dt);\n    \n    return msg;\n}\n// else {\n//     msg.data = 0;\n// }\n\n// msg.oxy = parseFloat(oxy_raw);\n// msg.flow = parseFloat(flow_raw);\n// msg.pres = parseFloat(pres_raw);\n\n// return msg;","outputs":1,"noerr":0,"x":370,"y":600,"wires":[["62040264.a6eeac"]]},{"id":"eecf4cba.87526","type":"link in","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"to parseSamplingADC","links":["6f441aa7.23c324","dd2ffd6c.6f799"],"x":235,"y":600,"wires":[["c5824b73.6d29d8"]]},{"id":"62040264.a6eeac","type":"switch","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"isValidData","property":"data","propertyType":"msg","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":310,"y":640,"wires":[["94775595.f72188","34a27dcf.97fa82","8167ea9.8489318","4d738bbb.00e004"],[]]},{"id":"94775595.f72188","type":"change","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"oxy_raw","rules":[{"t":"set","p":"payload","pt":"msg","to":"oxy","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"oxy_raw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":640,"wires":[["2e95d92d.763386"]]},{"id":"34a27dcf.97fa82","type":"change","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"flow_raw","rules":[{"t":"set","p":"payload","pt":"msg","to":"flow","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"flow_raw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":680,"wires":[["cfa63c08.fd6ac"]]},{"id":"8167ea9.8489318","type":"change","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"pres_raw","rules":[{"t":"set","p":"payload","pt":"msg","to":"pres","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"pres_raw","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":500,"y":720,"wires":[["6fcced42.5b3654"]]},{"id":"f71f9a4a.dcbbc8","type":"debug","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"debug parseSamplingADC","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":640,"y":560,"wires":[]},{"id":"cb021d69.5c033","type":"debug","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"debug raw_adc","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","statusVal":"","statusType":"auto","x":840,"y":680,"wires":[]},{"id":"9f3d1b3e.c175d8","type":"link in","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"to debug raw_adc","links":["2e95d92d.763386","cfa63c08.fd6ac","6fcced42.5b3654"],"x":715,"y":680,"wires":[["cb021d69.5c033"]]},{"id":"d11c7ba3.5c3028","type":"comment","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"UART-nano_sensor interface","info":"","x":300,"y":520,"wires":[]},{"id":"f08885cb.81f7d8","type":"comment","z":"dea9ee4a.091b4","g":"45e00936.3721f8","name":"MQTT-python_ads interface","info":"","x":300,"y":220,"wires":[]},{"id":"6f441aa7.23c324","type":"link out","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"from NanoRead","links":["eecf4cba.87526","8d46ca42.256de8"],"x":535,"y":600,"wires":[]},{"id":"c6a64bf5.dc6118","type":"serial in","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"Serial_read Nano_Sensor","serial":"989b6410.143868","x":330,"y":560,"wires":[["6f441aa7.23c324","f71f9a4a.dcbbc8"]]},{"id":"f1bd5a47.e40fb8","type":"change","z":"dea9ee4a.091b4","g":"e4e1bab7.4fe338","name":"","rules":[{"t":"set","p":"breathing_phase","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1960,"y":340,"wires":[["7990cbd8.8d10f4","afa43b6c.6cf318"]]},{"id":"c85241e9.8cfd8","type":"link in","z":"dea9ee4a.091b4","d":true,"g":"d01140bc.242a3","name":"","links":["4a1fa4ed.8ed21c"],"x":2195,"y":1300,"wires":[["5ceef6ca.881f68"]]},{"id":"e1338567.4a64b8","type":"switch","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","property":"breathing_phase","propertyType":"global","rules":[{"t":"eq","v":"eoi","vt":"str"},{"t":"eq","v":"eoc","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2410,"y":1300,"wires":[["a45655be.e21898"],["2fb0d819.4c4d68"]]},{"id":"a45655be.e21898","type":"change","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","rules":[{"t":"set","p":"peep_val","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"ipp_peep_updateFlag","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2560,"y":1280,"wires":[["a124b3e4.fef36"]]},{"id":"2fb0d819.4c4d68","type":"change","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","rules":[{"t":"set","p":"ipp_val","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"ipp_peep_updateFlag","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2560,"y":1320,"wires":[[]]},{"id":"5ceef6ca.881f68","type":"switch","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","property":"ipp_peep_updateFlag","propertyType":"flow","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":2280,"y":1300,"wires":[["e1338567.4a64b8"]]},{"id":"95286c99.b34ef","type":"link out","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"from BreathingPhase eoc","links":["3352e1ad.ee778e"],"x":2835,"y":1280,"wires":[]},{"id":"90ccffe6.8be11","type":"comment","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"(alt. exp.) Find IPP,PEEP","info":"","x":2270,"y":1200,"wires":[]},{"id":"fabea049.b39e6","type":"link in","z":"dea9ee4a.091b4","d":true,"g":"d01140bc.242a3","name":"","links":["afa43b6c.6cf318"],"x":2195,"y":1240,"wires":[["59ecb51e.729e1c"]]},{"id":"59ecb51e.729e1c","type":"change","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","rules":[{"t":"set","p":"ipp_peep_updateFlag","pt":"flow","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2370,"y":1240,"wires":[[]]},{"id":"52611f96.c3dfe","type":"link in","z":"dea9ee4a.091b4","g":"25a6c10c.bf2f9e","name":"to emergencyButtonDetect","links":["2d5a37a9.06bcc8"],"x":2395,"y":1940,"wires":[["6d234799.605ec8"]]},{"id":"6d234799.605ec8","type":"function","z":"dea9ee4a.091b4","g":"25a6c10c.bf2f9e","name":"serial_nano parser","func":"frNano = msg.payload;\nif (frNano.indexOf(\"{ee}\") != -1) {\n    msg.payload = \"04_ON\";\n} else {\n    msg.payload = \"04_OFF\";\n}\n\nreturn msg;\n\n","outputs":1,"noerr":0,"x":2530,"y":1940,"wires":[["a6d3f561.26c938"]]},{"id":"ab5fcb4e.9382c8","type":"link out","z":"dea9ee4a.091b4","g":"25a6c10c.bf2f9e","name":"from emergencyButtonDetect","links":["31673605.46d5aa"],"x":2775,"y":1940,"wires":[]},{"id":"c9f0ff95.03616","type":"comment","z":"dea9ee4a.091b4","g":"25a6c10c.bf2f9e","name":"Detect Emergency Button","info":"","x":2410,"y":1900,"wires":[]},{"id":"289fd486.3e5dbc","type":"comment","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"Zero-ing","info":"","x":1620,"y":620,"wires":[]},{"id":"ce0a66c9.359a98","type":"switch","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":1630,"y":1020,"wires":[["f0fdd752.c5d718"]]},{"id":"130722ae.2ac74d","type":"switch","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"if on","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":350,"y":1560,"wires":[["9d91503b.53cae"]]},{"id":"6e21d6a8.649ad8","type":"rbe","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":470,"y":1060,"wires":[["da5f8db0.5ff25"]]},{"id":"1c5cd4ce.9f0e5b","type":"rbe","z":"dea9ee4a.091b4","d":true,"g":"f308294.a213bd8","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":630,"y":1780,"wires":[["1ff74875.1a9258"]]},{"id":"a89df4d9.1a1988","type":"link in","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"to initialFightingDetection","links":["6b22972f.adc3a8"],"x":1915,"y":1080,"wires":[["e40ea5a6.f76ec8"]]},{"id":"a124b3e4.fef36","type":"delay","z":"dea9ee4a.091b4","g":"d01140bc.242a3","name":"","pauseType":"delay","timeout":"500","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2730,"y":1280,"wires":[["95286c99.b34ef"]]},{"id":"3d51cb51.7319e4","type":"debug","z":"dea9ee4a.091b4","g":"e5a21271.af2b","name":"debug fightingDetection","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2310,"y":1020,"wires":[]},{"id":"d7dc008d.138f4","type":"switch","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","property":"zeroing_flag","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1670,"y":700,"wires":[["5839e887.24ad28"],[]]},{"id":"5839e887.24ad28","type":"smooth","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","property":"payload","action":"mean","count":"50","round":"","mult":"single","reduce":false,"x":1800,"y":700,"wires":[["e1d473b3.413b6"]]},{"id":"e1d473b3.413b6","type":"change","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","rules":[{"t":"set","p":"pres_offset","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":1980,"y":700,"wires":[["73725303.3e8d1c"]]},{"id":"35a917fb.8ed588","type":"delay","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","pauseType":"delay","timeout":"100","timeoutUnits":"milliseconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":1790,"y":1400,"wires":[["98772ff8.7f5bb"]]},{"id":"1b9bce64.b5cf92","type":"switch","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":1650,"y":1720,"wires":[["467b98e6.d8b768"],["4202fdc9.699bc4"]]},{"id":"4202fdc9.699bc4","type":"change","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"","rules":[{"t":"set","p":"count_start","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1890,"y":1760,"wires":[["34648a52.f5ff46"]]},{"id":"467b98e6.d8b768","type":"function","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"count_start++","func":"var a = parseFloat(flow.get(\"count_start\"));\nvar breathing_phase = global.get(\"breathing_phase\") || \"\";\n\nif(breathing_phase.indexOf(\"eoi\") != -1){\n    flow.set(\"count_start\",a+1);\n}\nreturn msg;","outputs":1,"noerr":0,"x":1880,"y":1720,"wires":[["3571f834.01dfb8"]]},{"id":"8b4a491.3ed7fb8","type":"switch","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"if exhale","property":"breathing_phase","propertyType":"global","rules":[{"t":"cont","v":"eoi","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":600,"y":1560,"wires":[["78652b8d.98c3c4"],["1838e9fe.35e5f6"]]},{"id":"78652b8d.98c3c4","type":"function","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"countSpur ++","func":"var count_spur = parseInt(flow.get(\"count_spur\")) || 0;\nflow.set(\"count_spur\",count_spur+1);\nreturn msg;","outputs":1,"noerr":0,"x":760,"y":1560,"wires":[["85467aa6.ec9d48"]]},{"id":"1838e9fe.35e5f6","type":"change","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"","rules":[{"t":"set","p":"count_spur","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":770,"y":1600,"wires":[[]]},{"id":"4500b28d.85e36c","type":"link in","z":"927d9689.f973b8","g":"3f36671d.3e72c8","name":"flow data","links":["b1c8dc4c.7ce1b"],"x":255,"y":760,"wires":[["34365754.56f2f8"]]},{"id":"4d738bbb.00e004","type":"change","z":"dea9ee4a.091b4","g":"87c794c0.b32628","name":"dt","rules":[{"t":"set","p":"dt","pt":"flow","to":"dt","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":490,"y":760,"wires":[[]]},{"id":"d43f6f48.6a82c","type":"function","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"count_Vol","func":"var vol = parseFloat(flow.get(\"vol_count\")) || 0 ;\nvar correction_factor = 2;\n// var lastflow = parseFloat(flow.get(\"lastflow\")) || 0;\n// if(lastflow === 0) { lastflow = msg.flow;}\n// vol += correction_factor*((msg.flow/60 + lastflow/60)/2 * flow.get(\"dt\")/1000); //LPM to LPS, Micros to Sec\n//var flowq = parseFloat(flow.get(\"flow_val\")); //msg.payload;\nvar flowq = msg.payload;\n\nvol += 1*(flowq * parseInt(flow.get(\"dt\"))/60000); //LPM to LPS, Micros to Sec\n\n// var slope = (flowq - lastflow);\n// if(slope < -2 || flowq <0) {vol = 0;}\n\nflow.set(\"vol_count\", vol);\n// flow.set(\"lastflow\", flowq)\nnewmsg={\"payload\":vol};\n\nreturn newmsg;","outputs":1,"noerr":0,"x":720,"y":1960,"wires":[["c6ee7b49.864988","62dc4629.7a3868"]]},{"id":"8d0f341.876bfc8","type":"link in","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"[debug] flow","links":["b1c8dc4c.7ce1b"],"x":255,"y":1960,"wires":[["7bec83c6.32113c","c97dfea8.02de8"]]},{"id":"c6ee7b49.864988","type":"link out","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"[result] volume","links":["67700e0d.a1fb6","e0cd2483.2b3f78","2143d037.2bbd9"],"x":935,"y":2040,"wires":[]},{"id":"1c2676c7.fdf959","type":"change","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"","rules":[{"t":"set","p":"vol_count","pt":"flow","to":"0","tot":"num"},{"t":"set","p":"payload","pt":"msg","to":"0","tot":"num"},{"t":"set","p":"lastflow","pt":"flow","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":720,"y":2040,"wires":[["c6ee7b49.864988","62dc4629.7a3868"]]},{"id":"67700e0d.a1fb6","type":"link in","z":"927d9689.f973b8","g":"3f36671d.3e72c8","name":"","links":["c6ee7b49.864988"],"x":255,"y":720,"wires":[["8bf4f399.f6304"]]},{"id":"62dc4629.7a3868","type":"debug","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":990,"y":1960,"wires":[]},{"id":"c97dfea8.02de8","type":"switch","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":390,"y":1960,"wires":[["2f2c93c9.d0b4fc","e7638846.64efb8"],["1c2676c7.fdf959"]]},{"id":"2cfd7d87.bc2112","type":"debug","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"debug_underPress","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1010,"y":2000,"wires":[]},{"id":"a6d3f561.26c938","type":"rbe","z":"dea9ee4a.091b4","g":"25a6c10c.bf2f9e","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":2690,"y":1940,"wires":[["ab5fcb4e.9382c8"]]},{"id":"7f45c54e.bc8bcc","type":"rpi-gpio out","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","pin":"8","set":true,"level":"0","freq":"","out":"out","x":2080,"y":1920,"wires":[]},{"id":"dd4f051f.7463d8","type":"link in","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"[alarm] overpres","links":["ff2ad660.604308"],"x":1555,"y":1980,"wires":[["8a33dd8b.013e4"]]},{"id":"4b71f54c.626f9c","type":"debug","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"false","x":2090,"y":2000,"wires":[]},{"id":"e0cd2483.2b3f78","type":"link in","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"[alarm] overvol","links":["c6ee7b49.864988"],"x":1555,"y":2020,"wires":[["3453897b.1daf66"]]},{"id":"3453897b.1daf66","type":"function","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"cekOvervol","func":"var vol_real = msg.payload;\nvar set_vol = global.get(\"set_vol\");\nvar mandatory = global.get(\"modemandatory\")\nvar stat = false;\nset_vol += 0.1*set_vol;\n\nif(vol_real > set_vol && !mandatory){\n    stat = true;\n}\n\nvar newmsg = {'payload': stat};\nreturn newmsg;","outputs":1,"noerr":0,"x":1670,"y":2020,"wires":[["8a33dd8b.013e4","867e441b.92b1a8"]]},{"id":"3b7fedfb.904932","type":"inject","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":1670,"y":1960,"wires":[["8a33dd8b.013e4","7f45c54e.bc8bcc"]]},{"id":"8a33dd8b.013e4","type":"rbe","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1910,"y":2000,"wires":[["4b71f54c.626f9c","7f45c54e.bc8bcc"]]},{"id":"86db276a.c5a4c8","type":"inject","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":1670,"y":1920,"wires":[["7f45c54e.bc8bcc"]]},{"id":"900afbe4.b7c8d8","type":"debug","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"debug_alarm_gan","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":930,"y":2840,"wires":[]},{"id":"3971c226.5cc62e","type":"rbe","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":470,"y":2840,"wires":[["730f771d.6ad218"]]},{"id":"4eaa88ab.caae58","type":"function","z":"dea9ee4a.091b4","g":"168f936.17e076d","name":"kondisi_alarm","func":"var alarm_01 = global.get(\"alarm_01\");\nvar alarm_02 = global.get(\"alarm_02\");\nvar alarm_03 = global.get(\"alarm_03\");\nvar alarm_04 = global.get(\"alarm_04\");\n\nif(alarm_01 || alarm_02 || alarm_03 || alarm_04 )\n{\n    \n}\n\nelse\n{\nreturn msg;\n}","outputs":1,"noerr":0,"x":1420,"y":3060,"wires":[["5b863297.ea19bc"]]},{"id":"867e441b.92b1a8","type":"function","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"overVolAlarm","func":"var stat = msg.payload;\nvar alarmmsg = \"06_OFF\"\nif(stat){\n    alarmmsg = \"06_ON\";\n}\n\nnewmsg = {\"payload\": alarmmsg};\n\nreturn newmsg;","outputs":1,"noerr":0,"x":1670,"y":2060,"wires":[["d9366bfb.65bcb8"]]},{"id":"d9366bfb.65bcb8","type":"link out","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"[alarm2] OverFlow","links":["31673605.46d5aa","b4616265.62e1f"],"x":1775,"y":2060,"wires":[]},{"id":"86565a88.bf7ff8","type":"comment","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"Overpres/Overvol interrupt (OK MINUS)","info":"Test Overpres OK\nTest overvol belum\n- pas overvol sempet ke skip 1 cycle dulu","x":1670,"y":1880,"wires":[]},{"id":"455d0132.a9e25","type":"function","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"set Title","func":"if(msg.payload == \"05_ON\"){\n    msg.payload = \"Assisted Volume Control\";\n} else {\n    msg.payload = false;\n}\nreturn msg;","outputs":1,"noerr":0,"x":980,"y":1600,"wires":[["604e5ce8.c9b2e4"]]},{"id":"9541876e.261498","type":"link out","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"Spurious Titile","links":["5768e8c1.0a8f68","5b75260.d7992dc","b820805.67cd78","bdef2fb9.9b2a7","6e87af14.1a8ba"],"x":1095,"y":1640,"wires":[]},{"id":"604e5ce8.c9b2e4","type":"switch","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"Assisted Volume Control","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":990,"y":1640,"wires":[["9541876e.261498"],[]]},{"id":"5416e29a.b5ec5c","type":"function","z":"dea9ee4a.091b4","d":true,"g":"bd985596.4c5ad8","name":"calcBit2Pres","func":"var pres_raw = parseFloat(msg.payload); // in 16 bit\n//pres_raw = pres_raw * 6.144 / 32768; // in volt\n\n//var pres_val = 0;\n// opt 1 offset + gain adjust\n//pres_val = ((pres_raw/5) - 0.04)/0.0012858 * 10.19716;// + global.get(\"offset_pressure\");\n\n// opt 2 regression\n// var x1 = 0.7;   var y1 = 2;\n// var x2 = 1;   var y2 = 4;\n// pres_val = ( (y2-y1)/(x2-x1)*(pres_raw-x1) )+y1;\n\n// opt 3 direct\n//pres_val = (((pres_val + 850) * 15 / 1000 * 2) - 45)*2;\nvar pres_val = pres_raw;\n\nmsg.topic = \"pressure\";\nmsg.payload = pres_val;\nmsg.raw = pres_raw;\n\nreturn msg;","outputs":1,"noerr":0,"x":1690,"y":760,"wires":[[]]},{"id":"b2afb17d.1ed5b","type":"mqtt in","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"","topic":"val/flow_val","qos":"1","datatype":"auto","broker":"913f80b.7920f8","x":610,"y":1260,"wires":[["ae2c941d.fdcd28"]]},{"id":"16d68c2a.3fc344","type":"change","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"","rules":[{"t":"set","p":"flow_val","pt":"flow","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":660,"y":1300,"wires":[["b1c8dc4c.7ce1b"]]},{"id":"7bec83c6.32113c","type":"switch","z":"dea9ee4a.091b4","d":true,"g":"eaa17169.42851","name":"","property":"modemandatory","propertyType":"global","rules":[{"t":"false"},{"t":"else"}],"checkall":"false","repair":false,"outputs":2,"x":390,"y":2040,"wires":[["c97dfea8.02de8"],["1c2676c7.fdf959"]]},{"id":"9dfc3267.24e41","type":"function","z":"dea9ee4a.091b4","d":true,"g":"e4e1bab7.4fe338","name":"serial_nano parser","func":"frNano = msg.payload;\nif (frNano.indexOf(\"{ec}\") != -1) {\n    msg.payload = \"eoc\";\n    return msg;\n} else if (frNano.indexOf(\"{ei}\") != -1) {\n    msg.payload = \"eoi\";\n    return msg;\n}\n// else {msg.payload = \"\";}\n\n// return msg;","outputs":1,"noerr":0,"x":1710,"y":380,"wires":[["f1bd5a47.e40fb8"]]},{"id":"2f2c93c9.d0b4fc","type":"switch","z":"dea9ee4a.091b4","d":true,"g":"eaa17169.42851","name":"","property":"breathing_phase","propertyType":"global","rules":[{"t":"cont","v":"eoc","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":530,"y":2000,"wires":[["d43f6f48.6a82c"],["1c2676c7.fdf959"]]},{"id":"11031a72.ea8b76","type":"mqtt out","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"","topic":"val/flow_val","qos":"","retain":"","broker":"913f80b.7920f8","x":470,"y":1240,"wires":[]},{"id":"ae2c941d.fdcd28","type":"function","z":"dea9ee4a.091b4","d":true,"g":"f4e4bbf6.cdb9c8","name":"","func":"msg.payload = parseFloat(msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":800,"y":1260,"wires":[["b1c8dc4c.7ce1b"]]},{"id":"70e2032.fb423fc","type":"function","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"fighting stop","func":"if(msg.payload==\"03_ON\"){\n    msg.payload = true;\n} else {\n    msg.payload = false;\n}\nreturn msg;","outputs":1,"noerr":0,"x":1670,"y":2100,"wires":[["8a33dd8b.013e4"]]},{"id":"131aa11f.1d26df","type":"link in","z":"dea9ee4a.091b4","g":"400ec676.58da58","name":"","links":["e7fe6470.448a98"],"x":1555,"y":2100,"wires":[["70e2032.fb423fc"]]},{"id":"d84365c9.81d3a8","type":"switch","z":"dea9ee4a.091b4","g":"3f9cc238.b141ce","name":"","property":"breathing_phase","propertyType":"global","rules":[{"t":"cont","v":"eoi","vt":"str"}],"checkall":"true","repair":false,"outputs":1,"x":2030,"y":1560,"wires":[["637156ed.b40f78"]]},{"id":"e7638846.64efb8","type":"switch","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gte","v":"2","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":550,"y":1960,"wires":[["d43f6f48.6a82c"],["1c2676c7.fdf959"]]},{"id":"86e6eabb.fd5be8","type":"debug","z":"dea9ee4a.091b4","g":"16386203.90a31e","name":"o2alarm","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":480,"y":1020,"wires":[]},{"id":"49c1b722.d23618","type":"change","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","rules":[{"t":"set","p":"zeroing_flag","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":1900,"y":660,"wires":[["abae7feb.84e2f"]]},{"id":"abae7feb.84e2f","type":"delay","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","pauseType":"delay","timeout":"2","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2100,"y":660,"wires":[["d3b546ea.aa4888"]]},{"id":"d3b546ea.aa4888","type":"change","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","rules":[{"t":"set","p":"zeroing_flag","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2300,"y":660,"wires":[[]]},{"id":"73725303.3e8d1c","type":"debug","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"debug presZeroing","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2210,"y":700,"wires":[]},{"id":"85805513.f0fce8","type":"function","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"include zero-ing offset","func":"var offset = global.get(\"pres_offset\");\nvar pressure = msg.payload;\nvar value = parseFloat(pressure) - parseFloat(offset);\n\nmsg.payload = value;\nmsg.offset = offset;\nreturn msg;","outputs":1,"noerr":0,"x":1720,"y":840,"wires":[["658d4d0.f870bb4"]]},{"id":"99780c07.fd3b6","type":"link in","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"to presZeroing","links":["7e428c8d.8a31b4","8ce4377c.da0558"],"x":1735,"y":620,"wires":[["49c1b722.d23618"]]},{"id":"15865f7d.838701","type":"inject","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":1690,"y":660,"wires":[["49c1b722.d23618"]]},{"id":"76e6e41c.19aeec","type":"comment","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"Zero-ing","info":"","x":280,"y":1340,"wires":[]},{"id":"32b9a09b.3b5c5","type":"switch","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"","property":"zeroing_flag","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":270,"y":1420,"wires":[["4a42ba1c.f176b4"],[]]},{"id":"4a42ba1c.f176b4","type":"smooth","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"","property":"payload","action":"mean","count":"50","round":"","mult":"single","reduce":false,"x":400,"y":1420,"wires":[["a6049dbe.5972"]]},{"id":"a6049dbe.5972","type":"change","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"","rules":[{"t":"set","p":"flow_offset","pt":"global","to":"payload","tot":"msg"}],"action":"","property":"","from":"","to":"","reg":false,"x":600,"y":1420,"wires":[["6dbf1896.663d88"]]},{"id":"6dbf1896.663d88","type":"debug","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"debug flowZeroing","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":810,"y":1420,"wires":[]},{"id":"31276aeb.eaf5a6","type":"function","z":"dea9ee4a.091b4","g":"83e89a7f.2f1d28","name":"include zero-ing offset","func":"var offset = global.get(\"flow_offset\");\nvar flow = msg.payload;\nvar value = parseFloat(flow) - parseFloat(offset);\n\nmsg.payload = value;\nmsg.offset = offset;\nreturn msg;","outputs":1,"noerr":0,"x":320,"y":1380,"wires":[["b1c8dc4c.7ce1b"]]},{"id":"1acd1b31.0525b5","type":"function","z":"dea9ee4a.091b4","g":"82afdd9e.b3e02","name":"cekUnderPressure","func":"var pres_val = msg.payload;\nvar lim = global.get(\"loplimit\");\nvar stat = \"\";\n\nif(pres_val < lim) {\n    stat = \"02_ON\";\n    msg.payload = stat;\n    return msg;\n}","outputs":1,"noerr":0,"x":2730,"y":1560,"wires":[["84f925a7.1fd828"]]},{"id":"1df0e654.c2d9ca","type":"link in","z":"dea9ee4a.091b4","g":"82afdd9e.b3e02","name":"[check] Fighting","links":["4a1fa4ed.8ed21c"],"x":2455,"y":1560,"wires":[["503f633d.eb037c"]]},{"id":"4a5b809b.82a14","type":"comment","z":"dea9ee4a.091b4","g":"82afdd9e.b3e02","name":"Check for Under Pressure (alt. vD)","info":"","x":2560,"y":1520,"wires":[]},{"id":"84f925a7.1fd828","type":"link out","z":"dea9ee4a.091b4","g":"82afdd9e.b3e02","name":"[alarm] LowPres","links":["ae15df76.3131b","31673605.46d5aa"],"x":2875,"y":1560,"wires":[]},{"id":"503f633d.eb037c","type":"switch","z":"dea9ee4a.091b4","g":"82afdd9e.b3e02","name":"","property":"low_pres_detect","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":2550,"y":1560,"wires":[["1acd1b31.0525b5"],[]]},{"id":"e2811e36.a466d","type":"delay","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"","pauseType":"delay","timeout":"15","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":340,"y":1260,"wires":[["3ac3f2c4.db05ee"]]},{"id":"3ac3f2c4.db05ee","type":"change","z":"811eb35.554d75","g":"a58cd07e.e5b87","name":"","rules":[{"t":"set","p":"low_pres_detect","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":1260,"wires":[[]]},{"id":"34648a52.f5ff46","type":"switch","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"","property":"UnderPress","propertyType":"global","rules":[{"t":"true"}],"checkall":"true","repair":false,"outputs":1,"x":2070,"y":1760,"wires":[["c5ce9b0a.3fad58"]]},{"id":"c5ce9b0a.3fad58","type":"change","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"02_ON","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2240,"y":1760,"wires":[["bc40cce.d2ceb3"]]},{"id":"9d91503b.53cae","type":"switch","z":"dea9ee4a.091b4","g":"53a3d08c.c701d","name":"","property":"modemandatory","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":470,"y":1560,"wires":[["8b4a491.3ed7fb8"]]},{"id":"79d23f78.bc699","type":"change","z":"dea9ee4a.091b4","d":true,"g":"eaa17169.42851","name":"","rules":[{"t":"set","p":"vpeak_val","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"vpeak_val","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":2100,"wires":[[]]},{"id":"43b772e0.54ed7c","type":"function","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"find_Volume_actual","func":"var vol_now = parseFloat(msg.payload);\nvar vpeak_now = parseFloat(global.get(\"vpeak_val\"));\n\nif (vol_now > vpeak_now) {\n    vpeak_now = vol_now;\n}\n\nmsg.payload = vpeak_now;\nglobal.set(\"vpeak_val\",vpeak_now);\n\nreturn msg;","outputs":1,"noerr":0,"x":770,"y":2100,"wires":[["79d23f78.bc699","e153287e.2e4f08"]]},{"id":"2143d037.2bbd9","type":"link in","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"to_vol_actual","links":["c6ee7b49.864988"],"x":635,"y":2100,"wires":[["43b772e0.54ed7c"]]},{"id":"5cb925e5.4fa26c","type":"debug","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":970,"y":2140,"wires":[]},{"id":"dab0f5cc.f24568","type":"change","z":"dea9ee4a.091b4","d":true,"g":"eaa17169.42851","name":"","rules":[{"t":"set","p":"vpeak_val","pt":"global","to":"payload","tot":"msg"},{"t":"set","p":"topic","pt":"msg","to":"vpeak_val","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1000,"y":2200,"wires":[[]]},{"id":"ac25a8ae.6d8798","type":"function","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"find_PIF","func":"var flow_now = parseFloat(msg.payload);\nvar fpeak_now = parseFloat(global.get(\"fpeak_val\"));\n\nif (flow_now > fpeak_now) {\n    fpeak_now = flow_now;\n}\n\nmsg.payload = fpeak_now;\nglobal.set(\"fpeak_val\",fpeak_now);\n\nreturn msg;","outputs":1,"noerr":0,"x":740,"y":2200,"wires":[["dab0f5cc.f24568","95f394c1.ccfd68"]]},{"id":"59673e60.8b497","type":"link in","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"to_vol_actual","links":["b1c8dc4c.7ce1b"],"x":635,"y":2200,"wires":[["ac25a8ae.6d8798"]]},{"id":"95f394c1.ccfd68","type":"debug","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"debug findPIF","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1000,"y":2240,"wires":[]},{"id":"64cfe87.1172f18","type":"debug","z":"dea9ee4a.091b4","g":"bd985596.4c5ad8","name":"debug pres_result","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":2130,"y":800,"wires":[]},{"id":"25b86ff1.1f147","type":"switch","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"","property":"find_pip_flag","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":1650,"y":1240,"wires":[["1e532d90.0f27c2"],[]]},{"id":"2d384f86.e794","type":"mysql","z":"811eb35.554d75","g":"a164ddcc.3dd57","mydb":"a420ba14.ddc818","name":"","x":815,"y":860,"wires":[["8143b5a5.b71e78"]],"l":false},{"id":"a364d2e7.9fd0d","type":"inject","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"SELECT * FROM `kalibrasi` WHERE vti = 300 AND rr =10 AND erat=1","payload":"","payloadType":"date","x":620,"y":780,"wires":[["2d384f86.e794"]]},{"id":"8143b5a5.b71e78","type":"function","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"","func":"var mode_on_off = global.get(\"mode_on_off\");\nvar mode_breathing = global.get(\"modemandatory\");\nif (mode_breathing) {mode_breathing = 1;}\nelse {mode_breathing = 2}\n\nif (mode_on_off != 1) {\n    mode_breathing = 0;\n}\n\nvar vti = global.get(\"set_vol\");\nvar rr = global.get(\"set_rr\");\nvar ie = global.get(\"set_ie\");\n\nvar q = msg.payload[0];\n\nmsg.payload = '<' + mode_breathing + ',' + q.step + ',' + rr + ',' + ie + ',' + q.dti + '>';\n\nreturn msg;","outputs":1,"noerr":0,"x":1010,"y":860,"wires":[["5c589f7c.42012","df3fdb95.7130e8"]]},{"id":"5c589f7c.42012","type":"debug","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":1150,"y":860,"wires":[]},{"id":"c68904f3.41d168","type":"comment","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"Ambil dr DB (WIP Pras)","info":"Ambil","x":640,"y":740,"wires":[]},{"id":"8b16463d.d689f8","type":"function","z":"811eb35.554d75","g":"a164ddcc.3dd57","name":"","func":"var vti = global.get(\"set_vol\");\nvar rr = global.get(\"set_rr\");\nvar ie = global.get(\"set_ie\");\n\nmsg.topic = \"SELECT * FROM `kalibrasi2` WHERE vti =\" + vti + \" AND rr = \" + rr + \" AND erat=\" + ie;\n\nreturn msg;","outputs":1,"noerr":0,"x":710,"y":860,"wires":[["2d384f86.e794"]]},{"id":"afe38847.8781d8","type":"debug","z":"dea9ee4a.091b4","g":"2ac90dd7.4a53f2","name":"debug nilai pressure","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":1820,"y":1280,"wires":[]},{"id":"bc40cce.d2ceb3","type":"link out","z":"dea9ee4a.091b4","g":"2c4baac9.60adc6","name":"[alarm] LowPres","links":["ae15df76.3131b","31673605.46d5aa"],"x":2375,"y":1720,"wires":[]},{"id":"e153287e.2e4f08","type":"function","z":"dea9ee4a.091b4","g":"eaa17169.42851","name":"Calculate Correction Factor","func":"//Pseudocode:\n//  If error dari set point < batas toleransi\n//      Hitung correction factor setiap x cycle nafas\n//  else tampilin nilai asli\n\n// Tunables\nvar cycle_limit = 5; //cek correction factor tiap berapa cycle?\nvar err_threshold = 90; //toleransi error dlm mililiter\n\n// Global Vars\nvar set_vol = parseFloat(global.get(\"set_vol\"));\nvar breath_count = parseInt(global.get(\"breath_count\")) || 0;\nvar correction_factor = parseFloat(global.get(\"correction_factor\")) || 1;\nvar vpeak = global.get(\"vpeak_val\");\nvar last_cor = global.get(\"last_cor\") || 1;\n\n\nif( (parseInt(breath_count % cycle_limit) <= 0) || (breath_count < 3) ){\n    global.set(\"vpeak_val_disp\",vpeak*last_cor);\n    if(Math.abs(set_vol - vpeak) < err_threshold ){\n        correction_factor = set_vol / vpeak;    \n    } else {\n        correction_factor = 1;\n    }\n    global.set(\"correction_factor\", correction_factor);\n    \n} else {\n    if(Math.abs(set_vol - vpeak) < err_threshold ){\n        global.set(\"vpeak_val_disp\",vpeak*correction_factor);   \n    } else {\n        global.set(\"vpeak_val_disp\",vpeak);\n    }\n    \n}    \n\nvar msg2 = {'vpeak':msg.payload, 'vdisp':global.get(\"vpeak_val_disp\"), \"count\":global.get(\"breath_count\"), \"corr\":global.get(\"correction_factor\")};\nreturn msg2;","outputs":1,"noerr":0,"x":760,"y":2140,"wires":[["5cb925e5.4fa26c"]]},{"id":"ed6d927b.b0a4f","type":"comment","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"I:E RR Calculation","info":"","x":2590,"y":280,"wires":[]},{"id":"41629294.38810c","type":"switch","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"","property":"payload","propertyType":"msg","rules":[{"t":"cont","v":"ec","vt":"str"},{"t":"cont","v":"ei","vt":"str"}],"checkall":"true","repair":false,"outputs":2,"x":2830,"y":320,"wires":[[],[]]},{"id":"c4340bdb.c3f928","type":"function","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"include zero-ing offset","func":"// set I:E menjadi --:-- \n// saat mesin mati (tidak beroperasi)\nvar Insp_Exp = \"--:--\"\n\nmsg.payload = Insp_Exp;\n// msg.offset = offset;\nreturn msg;","outputs":1,"noerr":0,"initialize":"","finalize":"","x":2880,"y":380,"wires":[["40dfccc0.416d64","a9a7dc6a.ba9d7"]]},{"id":"b2fb2aac.bcd838","type":"switch","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"str"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2670,"y":340,"wires":[[],["c4340bdb.c3f928"]]},{"id":"40dfccc0.416d64","type":"debug","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"debug breathingPhase1","active":true,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":3150,"y":380,"wires":[]},{"id":"8d46ca42.256de8","type":"link in","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"to parseSamplingADC","links":["6f441aa7.23c324","dd2ffd6c.6f799"],"x":2555,"y":340,"wires":[["b2fb2aac.bcd838"]]},{"id":"a9a7dc6a.ba9d7","type":"link out","z":"dea9ee4a.091b4","g":"a6665e74.e2f37","name":"I:E_actual","links":["902e0e77.e3e84","af3b76a7.38a5d8","a3fb9189.880e1"],"x":3075,"y":340,"wires":[]},{"id":"5e88a07f.e6f86","type":"comment","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"Page 1","info":"- Choose between mandatory volume control and assisted volume control\n- Display Alarm\n- Apply page lead to Input setting value","x":2330,"y":120,"wires":[]},{"id":"bb9fcbb1.acd158","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","group":"1a16f847.37b6a8","order":2,"width":0,"height":0,"passthru":false,"label":"Mandatory Volume Control","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Mandatory Volume Control","payloadType":"str","topic":"","x":2820,"y":180,"wires":[["d5f8eaa7.907528","19138413.aac3dc","66ef599a.f8bf88"]]},{"id":"882342da.e0942","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","group":"1a16f847.37b6a8","order":3,"width":0,"height":0,"passthru":false,"label":"Assisted Volume Control","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Assisted Volume Control","payloadType":"str","topic":"","x":2810,"y":220,"wires":[["d5f8eaa7.907528","19138413.aac3dc","48f24506.d4a15c"]]},{"id":"2d3afe3d.dfa252","type":"ui_button","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","group":"a1d34288.489cb","order":1,"width":"3","height":"1","passthru":false,"label":"High Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1020,"wires":[[]]},{"id":"e0aa1c8b.873bb","type":"change","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1020,"wires":[["2d3afe3d.dfa252","507174a0.46f01c","b0955b4c.872298","bcde7cb8.b767e","eb315fff.90da9"]]},{"id":"c6afca16.b7ecd8","type":"change","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1060,"wires":[["2d3afe3d.dfa252","507174a0.46f01c","b0955b4c.872298","bcde7cb8.b767e","eb315fff.90da9"]]},{"id":"c7a22bc3.883aa8","type":"switch","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1020,"wires":[["e0aa1c8b.873bb","50275c2e.be1384"],["c6afca16.b7ecd8"]]},{"id":"57b39cae.2547f4","type":"ui_button","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","group":"a1d34288.489cb","order":2,"width":"3","height":"1","passthru":false,"label":"Low Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1320,"wires":[[]]},{"id":"567c038d.857dec","type":"change","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1320,"wires":[["57b39cae.2547f4","82a6291e.576b98","3c14ca05.9ceca6","fd313e87.09d45","67221dd1.655e24"]]},{"id":"3653aa70.0217c6","type":"change","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":1360,"wires":[["57b39cae.2547f4","82a6291e.576b98","3c14ca05.9ceca6","fd313e87.09d45","67221dd1.655e24"]]},{"id":"aceb5b99.dc9968","type":"switch","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":1320,"wires":[["567c038d.857dec","51fec2bf.107ddc"],["3653aa70.0217c6"]]},{"id":"590663f.f1aa79c","type":"ui_button","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","group":"a1d34288.489cb","order":4,"width":"3","height":"1","passthru":false,"label":"Fighting","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":980,"y":1640,"wires":[[]]},{"id":"4d4dbf81.ace5e","type":"change","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1640,"wires":[["590663f.f1aa79c","cfa03a1d.3bbc28","33260e04.3b01b2","ede5a222.d9eb4","5e764da5.6c1ce4"]]},{"id":"74ddbe78.8ba9b","type":"change","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":760,"y":1680,"wires":[["590663f.f1aa79c","cfa03a1d.3bbc28","33260e04.3b01b2","ede5a222.d9eb4","5e764da5.6c1ce4"]]},{"id":"c5c47bf8.e30928","type":"switch","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":590,"y":1640,"wires":[["4d4dbf81.ace5e","941c3f2b.f7264"],["74ddbe78.8ba9b"]]},{"id":"85847869.b64628","type":"ui_button","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","group":"a1d34288.489cb","order":5,"width":"3","height":"1","passthru":false,"label":"Emergency","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":2000,"wires":[[]]},{"id":"d27b8b24.a4d5d8","type":"change","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2000,"wires":[["85847869.b64628","eff61262.7bac2","795216f7.09fce8","48594dbe.b1ab74","6dfb3ea9.f0e98"]]},{"id":"913c858d.f57d88","type":"change","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":740,"y":2040,"wires":[["85847869.b64628","eff61262.7bac2","795216f7.09fce8","48594dbe.b1ab74","6dfb3ea9.f0e98"]]},{"id":"963641ab.4ca6c","type":"switch","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":570,"y":2000,"wires":[["d27b8b24.a4d5d8","28a757db.62e9d8"],["913c858d.f57d88"]]},{"id":"e89edddf.3f95d","type":"ui_button","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","group":"a1d34288.489cb","order":6,"width":"3","height":"1","passthru":false,"label":"Spurious","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":700,"wires":[[]]},{"id":"372aca93.cda846","type":"change","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"orange","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":700,"wires":[["e89edddf.3f95d","6dd8b8ba.3a1e08","3af5be3f.adbe02","95c9bf86.335b7","472482ea.0cabec"]]},{"id":"a82734ef.7e71a8","type":"change","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":740,"wires":[["e89edddf.3f95d","6dd8b8ba.3a1e08","3af5be3f.adbe02","95c9bf86.335b7","472482ea.0cabec"]]},{"id":"d9c9c68d.af24e8","type":"switch","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1630,"y":700,"wires":[["372aca93.cda846"],["a82734ef.7e71a8"]]},{"id":"ab03a1b6.2fd28","type":"ui_button","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","group":"a1d34288.489cb","order":7,"width":"3","height":"1","passthru":false,"label":"Over Vol","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":1000,"wires":[[]]},{"id":"80786be5.e3f2b8","type":"change","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"orange","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1000,"wires":[["ab03a1b6.2fd28","e58d2a95.7d6bf8","28c424b1.d84f4c","83c7b8b.e1e9848","75a42cbf.8166d4"]]},{"id":"983f3f66.f1821","type":"change","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1040,"wires":[["ab03a1b6.2fd28","e58d2a95.7d6bf8","28c424b1.d84f4c","83c7b8b.e1e9848","75a42cbf.8166d4"]]},{"id":"f8438bc0.1162f8","type":"switch","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1630,"y":1000,"wires":[["80786be5.e3f2b8"],["983f3f66.f1821"]]},{"id":"a38f2f88.43c71","type":"ui_button","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","group":"a1d34288.489cb","order":9,"width":"3","height":"1","passthru":false,"label":"Low PEEP","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1280,"wires":[[]]},{"id":"7d90f64d.3b6e88","type":"change","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"orange","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1280,"wires":[["a38f2f88.43c71","df8fcbff.0f79a8","39aa93dc.f8e5ec","fe29ba30.1af858","f21b9d81.44397"]]},{"id":"d9590a0e.b42098","type":"change","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1320,"wires":[["a38f2f88.43c71","df8fcbff.0f79a8","39aa93dc.f8e5ec","fe29ba30.1af858","f21b9d81.44397"]]},{"id":"92acc86d.382028","type":"switch","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1630,"y":1280,"wires":[["7d90f64d.3b6e88"],["d9590a0e.b42098"]]},{"id":"c4540b1f.7f8538","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","group":"a1d34288.489cb","order":10,"width":"3","height":"1","passthru":false,"label":"Low/High O2","tooltip":"","color":"{{textcolour}}","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1600,"wires":[[]]},{"id":"4ae8ac38.d59f54","type":"change","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"yellow","tot":"str"},{"t":"set","p":"textcolour","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1600,"wires":[["c4540b1f.7f8538","891b209d.a7b9f","f28f3b0b.88a4f8","ad05a9ad.7619e8","238ad949.46cc46"]]},{"id":"5f0987a4.0bc608","type":"change","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","rules":[{"t":"set","p":"colour","pt":"msg","to":"grey","tot":"str"},{"t":"set","p":"textcolour","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":1800,"y":1640,"wires":[["c4540b1f.7f8538","891b209d.a7b9f","f28f3b0b.88a4f8","ad05a9ad.7619e8","238ad949.46cc46"]]},{"id":"b5cd6d40.a2cb","type":"switch","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1630,"y":1600,"wires":[["4ae8ac38.d59f54"],["5f0987a4.0bc608"]]},{"id":"935cf2f3.9d7dc","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"silence bt","group":"a1d34288.489cb","order":8,"width":"3","height":"2","passthru":false,"label":"{{labelsilence}}","tooltip":"","color":"{{textcoloursilence}}","bgcolor":"{{coloursilence}}","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":700,"wires":[["5cb0e669.cbfb38"]]},{"id":"3883043c.ec8ebc","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","group":"a1d34288.489cb","order":3,"width":"3","height":"2","passthru":false,"label":"RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":240,"y":700,"wires":[["444161a4.dc192"]]},{"id":"7dcd2dac.a74fd4","type":"comment","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"Page Alarm","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":190,"y":600,"wires":[]},{"id":"35a3a2e2.a5afee","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","group":"7d9abf5c.20d99","order":3,"width":"4","height":"1","passthru":false,"label":"Apply","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Input Setting Value","payloadType":"str","topic":"","x":3270,"y":300,"wires":[["80472590.d2d698","a2086e34.000e4","5bbb1b3e.8bfea4"]]},{"id":"80472590.d2d698","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","events":"all","x":3440,"y":260,"wires":[[]]},{"id":"d4ee76c2.406848","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","label":"I:E (ratio) ","tooltip":"","group":"7186aff0.efeae","order":0,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"1 : {{value}}","min":0,"max":"3","step":1,"x":4120,"y":120,"wires":[["da4b34b4.dea2a8"]]},{"id":"1a785e9e.87d6f1","type":"comment","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"Page 2","info":"- Setting value","x":3690,"y":120,"wires":[]},{"id":"885b4c8e.11abe","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","label":"RR (bpm)","tooltip":"","group":"7186aff0.efeae","order":0,"width":0,"height":0,"wrap":false,"passthru":false,"topic":"","format":"{{value}}","min":"10","max":"30","step":"1","x":3940,"y":200,"wires":[["10ff693e.17ae77"]]},{"id":"a3a1de63.6168a","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","label":"FiO2 (%)","tooltip":"","group":"7186aff0.efeae","order":0,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","topicType":"str","format":"{{value}}","min":"0","max":"100","step":"5","x":4120,"y":260,"wires":[["44bb6cd7.eabb94"]]},{"id":"594534e6.26227c","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","label":"PEEP (cmH2O)","tooltip":"","group":"7186aff0.efeae","order":0,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":"0","max":"20","step":1,"x":4140,"y":320,"wires":[["8ec9a87e.9c0688"]]},{"id":"46ffff78.efd13","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","label":"VTi (ml)","tooltip":"","group":"7186aff0.efeae","order":0,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":"300","max":"600","step":"100","x":4120,"y":380,"wires":[["27f66bdb.e19e64"]]},{"id":"507174a0.46f01c","type":"ui_button","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","group":"2148ed30.41a932","order":1,"width":"3","height":"1","passthru":false,"label":"High Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1060,"wires":[[]]},{"id":"b0955b4c.872298","type":"ui_button","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","group":"7651cd96.a116e4","order":1,"width":"3","height":"1","passthru":false,"label":"High Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1100,"wires":[[]]},{"id":"bcde7cb8.b767e","type":"ui_button","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","group":"45ff047a.6a3e1c","order":1,"width":"3","height":"1","passthru":false,"label":"High Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1140,"wires":[[]]},{"id":"82a6291e.576b98","type":"ui_button","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","group":"2148ed30.41a932","order":2,"width":"3","height":"1","passthru":false,"label":"Low Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1360,"wires":[[]]},{"id":"3c14ca05.9ceca6","type":"ui_button","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","group":"7651cd96.a116e4","order":2,"width":"3","height":"1","passthru":false,"label":"Low Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1400,"wires":[[]]},{"id":"fd313e87.09d45","type":"ui_button","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","group":"45ff047a.6a3e1c","order":2,"width":"3","height":"1","passthru":false,"label":"Low Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1440,"wires":[[]]},{"id":"cfa03a1d.3bbc28","type":"ui_button","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","group":"2148ed30.41a932","order":4,"width":"3","height":"1","passthru":false,"label":"Fighting","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":980,"y":1680,"wires":[[]]},{"id":"33260e04.3b01b2","type":"ui_button","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","group":"7651cd96.a116e4","order":4,"width":"3","height":"1","passthru":false,"label":"Fighting","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":980,"y":1720,"wires":[[]]},{"id":"ede5a222.d9eb4","type":"ui_button","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","group":"45ff047a.6a3e1c","order":4,"width":"3","height":"1","passthru":false,"label":"Fighting","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":980,"y":1760,"wires":[[]]},{"id":"eff61262.7bac2","type":"ui_button","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","group":"2148ed30.41a932","order":5,"width":"3","height":"1","passthru":false,"label":"Emergency","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":2040,"wires":[[]]},{"id":"795216f7.09fce8","type":"ui_button","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","group":"7651cd96.a116e4","order":5,"width":"3","height":"1","passthru":false,"label":"Emergency","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":2080,"wires":[[]]},{"id":"48594dbe.b1ab74","type":"ui_button","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","group":"45ff047a.6a3e1c","order":5,"width":"3","height":"1","passthru":false,"label":"Emergency","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":2120,"wires":[[]]},{"id":"6dd8b8ba.3a1e08","type":"ui_button","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","group":"2148ed30.41a932","order":6,"width":"3","height":"1","passthru":false,"label":"Spurious","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":740,"wires":[[]]},{"id":"3af5be3f.adbe02","type":"ui_button","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","group":"7651cd96.a116e4","order":6,"width":"3","height":"1","passthru":false,"label":"Spurious","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":780,"wires":[[]]},{"id":"95c9bf86.335b7","type":"ui_button","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","group":"45ff047a.6a3e1c","order":6,"width":"3","height":"1","passthru":false,"label":"Spurious","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":820,"wires":[[]]},{"id":"e58d2a95.7d6bf8","type":"ui_button","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","group":"2148ed30.41a932","order":7,"width":"3","height":"1","passthru":false,"label":"Over Vol","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":1043,"wires":[[]]},{"id":"28c424b1.d84f4c","type":"ui_button","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","group":"7651cd96.a116e4","order":7,"width":"3","height":"1","passthru":false,"label":"Over Vol","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":1086,"wires":[[]]},{"id":"83c7b8b.e1e9848","type":"ui_button","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","group":"45ff047a.6a3e1c","order":7,"width":"3","height":"1","passthru":false,"label":"Over Vol","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":1127,"wires":[[]]},{"id":"df8fcbff.0f79a8","type":"ui_button","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","group":"2148ed30.41a932","order":9,"width":"3","height":"1","passthru":false,"label":"Low PEEP","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1320,"wires":[[]]},{"id":"39aa93dc.f8e5ec","type":"ui_button","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","group":"7651cd96.a116e4","order":9,"width":"3","height":"1","passthru":false,"label":"Low PEEP","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1360,"wires":[[]]},{"id":"fe29ba30.1af858","type":"ui_button","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","group":"45ff047a.6a3e1c","order":9,"width":"3","height":"1","passthru":false,"label":"Low PEEP","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1400,"wires":[[]]},{"id":"891b209d.a7b9f","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","group":"2148ed30.41a932","order":10,"width":"3","height":"1","passthru":false,"label":"Low/High O2","tooltip":"","color":"{{textcolour}}","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1640,"wires":[[]]},{"id":"f28f3b0b.88a4f8","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","group":"7651cd96.a116e4","order":10,"width":"3","height":"1","passthru":false,"label":"Low/High O2","tooltip":"","color":"{{textcolour}}","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1680,"wires":[[]]},{"id":"ad05a9ad.7619e8","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","group":"45ff047a.6a3e1c","order":10,"width":"3","height":"1","passthru":false,"label":"Low/High O2","tooltip":"","color":"{{textcolour}}","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1720,"wires":[[]]},{"id":"81c98fbd.049c5","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"silence bt","group":"2148ed30.41a932","order":8,"width":"3","height":"2","passthru":false,"label":"{{labelsilence}}","tooltip":"","color":"{{textcoloursilence}}","bgcolor":"{{coloursilence}}","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":740,"wires":[["5cb0e669.cbfb38"]]},{"id":"9989696a.f12908","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"silence bt","group":"7651cd96.a116e4","order":8,"width":"3","height":"2","passthru":false,"label":"{{labelsilence}}","tooltip":"","color":"{{textcoloursilence}}","bgcolor":"{{coloursilence}}","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":780,"wires":[["5cb0e669.cbfb38"]]},{"id":"15b1833.368aa7d","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"silence bt","group":"45ff047a.6a3e1c","order":8,"width":"3","height":"2","passthru":false,"label":"{{labelsilence}}","tooltip":"","color":"{{textcoloursilence}}","bgcolor":"{{coloursilence}}","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":820,"wires":[["5cb0e669.cbfb38"]]},{"id":"521e3996.45eb08","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","group":"2148ed30.41a932","order":3,"width":"3","height":"2","passthru":false,"label":"RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":240,"y":740,"wires":[["444161a4.dc192"]]},{"id":"d4677d0e.7082b","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","group":"7651cd96.a116e4","order":3,"width":"3","height":"2","passthru":false,"label":"RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":240,"y":780,"wires":[["444161a4.dc192"]]},{"id":"2fb2975f.2706f8","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","group":"45ff047a.6a3e1c","order":3,"width":"3","height":"2","passthru":false,"label":"RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":240,"y":820,"wires":[["444161a4.dc192"]]},{"id":"dbc382b8.c3508","type":"ui_button","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","group":"96f6a924.736ba8","order":1,"width":"4","height":"1","passthru":false,"label":"Back","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Ventilator Use Mode","payloadType":"str","topic":"","x":4110,"y":440,"wires":[["5ee3f355.c6557c"]]},{"id":"5ee3f355.c6557c","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","events":"all","x":4280,"y":440,"wires":[[]]},{"id":"19d3c13a.ce10df","type":"ui_button","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","group":"96f6a924.736ba8","order":3,"width":"4","height":"1","passthru":false,"label":"Next","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Input Alarm Threshold","payloadType":"str","topic":"","x":4110,"y":480,"wires":[["70d3efb9.9d5b9","5ee3f355.c6557c","f32b7dba.79c0f"]]},{"id":"8d003b94.d35488","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","label":"High Press Limit (cmH2O)","tooltip":"","group":"7775cf38.ae09d","order":1,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":"5","max":"150","step":"5","x":2650,"y":740,"wires":[["3b558192.dbca0e"]]},{"id":"a772d667.9b5a28","type":"comment","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"Page 3","info":"- Setting alarm treshold","x":2350,"y":680,"wires":[]},{"id":"3ecd962a.400ffa","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","label":"Low Press Limit (cmH2O)","tooltip":"","group":"7775cf38.ae09d","order":2,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":"0","max":"10","step":1,"x":2650,"y":800,"wires":[["d43b28c4.d5e518"]]},{"id":"505bd194.795e4","type":"ui_numeric","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","label":"O2 Tolerance (%)","tooltip":"","group":"7775cf38.ae09d","order":3,"width":0,"height":0,"wrap":false,"passthru":true,"topic":"","format":"{{value}}","min":"5","max":"30","step":1,"x":2630,"y":860,"wires":[["67e71111.abb87"]]},{"id":"55c40077.4f1d2","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","group":"1a8ad9e3.6a7de6","order":1,"width":"4","height":"1","passthru":false,"label":"Back","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Input Setting Value","payloadType":"str","topic":"","x":2590,"y":940,"wires":[["acc93153.00fba"]]},{"id":"acc93153.00fba","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","events":"all","x":2760,"y":940,"wires":[[]]},{"id":"646e5b3b.61bf04","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","group":"1a8ad9e3.6a7de6","order":3,"width":"4","height":"1","passthru":false,"label":"Next","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Ventilator Monitoring","payloadType":"str","topic":"","x":2590,"y":980,"wires":[["f82ef56.43ee908","acc93153.00fba","18e85e45.8d0352"]]},{"id":"5b9cf927.1c5108","type":"comment","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"Page 4","info":"Main Page contain :\n- chart\n- read value\n- setting value\n- alarm","x":2410,"y":1220,"wires":[]},{"id":"eefcffa2.2d87a","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":1,"width":"3","height":"1","name":"","label":"PIP","format":"{{msg.payload | number:2}} cmH2O","layout":"col-center","x":3630,"y":1480,"wires":[]},{"id":"1d3cf551.9c15bb","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":2,"width":"3","height":"1","name":"","label":"IPP","format":"{{msg.payload | number:2}} cmH2O","layout":"col-center","x":3150,"y":1280,"wires":[]},{"id":"116583c6.3a7c1c","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":3,"width":"3","height":"1","name":"","label":"PEEP","format":"{{msg.payload | number:2}} cmH2O","layout":"col-center","x":3150,"y":1380,"wires":[]},{"id":"b18760f.76f4ea","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":4,"width":"3","height":"1","name":"","label":"FiO2","format":"{{msg.payload | number:2}} %","layout":"col-center","x":2610,"y":1500,"wires":[]},{"id":"ce99fda9.f970b","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","events":"all","x":3880,"y":1740,"wires":[[]]},{"id":"c0de400a.fe747","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"labelback","pt":"msg","to":"set value","tot":"str"},{"t":"set","p":"buttonstart","pt":"flow","to":"true","tot":"bool"},{"t":"set","p":"labelstart","pt":"msg","to":"stop","tot":"str"},{"t":"set","p":"startcolour","pt":"msg","to":"red","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3140,"y":1740,"wires":[["867fd408.7848b8","ed091b89.e1cda8","dec10d8c.8a406"]]},{"id":"455eb296.ecb18c","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"labelback","pt":"msg","to":"use menu","tot":"str"},{"t":"set","p":"buttonstart","pt":"flow","to":"false","tot":"bool"},{"t":"set","p":"labelstart","pt":"msg","to":"start","tot":"str"},{"t":"set","p":"startcolour","pt":"msg","to":"green","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3140,"y":1660,"wires":[["867fd408.7848b8","ed091b89.e1cda8","dec10d8c.8a406"]]},{"id":"867fd408.7848b8","type":"ui_button","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"back bt","group":"308ee0c9.b4a38","order":1,"width":"4","height":"1","passthru":false,"label":"{{labelback}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":3400,"y":1740,"wires":[["3f48d9f9.9474d6"]]},{"id":"3f48d9f9.9474d6","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"buttonstart","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":3550,"y":1740,"wires":[["993e8e2d.b4b5b"],["b0d0ea14.1ea608"]]},{"id":"b0d0ea14.1ea608","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Ventilator Use Mode","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3700,"y":1780,"wires":[["ce99fda9.f970b"]]},{"id":"993e8e2d.b4b5b","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Input Setting Value","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3700,"y":1740,"wires":[["ce99fda9.f970b"]]},{"id":"ed091b89.e1cda8","type":"ui_button","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"start bt","group":"308ee0c9.b4a38","order":3,"width":"4","height":"1","passthru":false,"label":"{{labelstart}}","tooltip":"","color":"","bgcolor":"{{startcolour}}","icon":"","payload":"","payloadType":"str","topic":"","x":3430,"y":1800,"wires":[["2c46bcb1.b5dfa4","af3ddcff.d07c9"]]},{"id":"2c46bcb1.b5dfa4","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"buttonstart","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2870,"y":1740,"wires":[["455eb296.ecb18c","ad13b0ab.ddec8"],["c0de400a.fe747","6d36b8f.65e2148"]]},{"id":"521b8d27.5679d4","type":"inject","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"display alarm and bt init","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"false","payloadType":"bool","x":290,"y":280,"wires":[["7787792a.e68a58"]]},{"id":"b0b38d9e.2c52d","type":"link in","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"[alarm] alarm01","links":["7787792a.e68a58","ff2ad660.604308"],"x":315,"y":1020,"wires":[["f0ec42e9.73c5a"]]},{"id":"7787792a.e68a58","type":"link out","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"to triggered","links":["28ee9263.fbceee","79ac44c2.ed19ec","24fb3fc8.7a56a","bf67cb9f.bc7c88","32777694.b3916a","b0b38d9e.2c52d","54213e0f.66816","6880e012.f5f81","4a161d43.572494","d507341c.5e42d8","b2d15fd1.975d1","536add4c.e37794"],"x":735,"y":280,"wires":[]},{"id":"24fb3fc8.7a56a","type":"link in","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"[alarm] alarm02","links":["7787792a.e68a58","e06609c4.1c2748"],"x":315,"y":1320,"wires":[["3871d89e.970ed8"]]},{"id":"54213e0f.66816","type":"link in","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"[alarm] alarm03","links":["7787792a.e68a58","bbc6e2a.d5bfb2"],"x":335,"y":1640,"wires":[["bc2f80a6.399c6"]]},{"id":"bf67cb9f.bc7c88","type":"link in","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"[alarm] alarm05","links":["7787792a.e68a58","d2f96026.c8a67"],"x":1355,"y":700,"wires":[["7fa42f6e.f3fea"]]},{"id":"4a161d43.572494","type":"link in","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"[alarm] alarm06","links":["7787792a.e68a58","a0be1687.939fe8"],"x":1355,"y":1000,"wires":[["3693e974.80f2a6"]]},{"id":"536add4c.e37794","type":"link in","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"[alarm] alarm07","links":["7787792a.e68a58","ae2863cc.6ec68"],"x":1355,"y":1280,"wires":[["fa572f66.c744a"]]},{"id":"28ee9263.fbceee","type":"link in","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"[alarm] alarm04","links":["7787792a.e68a58","e8982606.9bcfd8"],"x":315,"y":2000,"wires":[["cab9a302.c0112"]]},{"id":"32777694.b3916a","type":"link in","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"[alarm] alarm08","links":["7787792a.e68a58","6f9cacc2.a62124"],"x":1355,"y":1600,"wires":[["7909596c.22e8e8"]]},{"id":"e778f1fb.dab7a","type":"ui_text","z":"c93f0a4.b6458f8","g":"c0edb341.079af","group":"108cbf01.e5c471","order":0,"width":0,"height":0,"name":"","label":"Control Mode:","format":"{{msg.payload}}","layout":"row-spread","x":2800,"y":100,"wires":[]},{"id":"ffe7da55.d08728","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3100,"y":320,"wires":[["35a3a2e2.a5afee"]]},{"id":"79ac44c2.ed19ec","type":"link in","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from trigger","links":["7787792a.e68a58"],"x":2895,"y":320,"wires":[["ffe7da55.d08728"]]},{"id":"d5f8eaa7.907528","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3100,"y":280,"wires":[["35a3a2e2.a5afee"]]},{"id":"70d3efb9.9d5b9","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to save data breathing","links":["20c33e65.28eb72"],"x":4235,"y":480,"wires":[]},{"id":"f82ef56.43ee908","type":"link out","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"from nextBtPg3","links":["2062427e.47c38e","eaa6c9e8.712f78","7f5bf67b.bafa08","85dd86d.f7c4278","d8164031.25272"],"x":2715,"y":1000,"wires":[]},{"id":"4d099c65.643ca4","type":"change","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3940,"y":440,"wires":[["dbc382b8.c3508"]]},{"id":"a6f323c9.49f03","type":"change","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3940,"y":480,"wires":[["dbc382b8.c3508"]]},{"id":"be06a2ac.3acb","type":"switch","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","property":"buttonstart","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":3750,"y":440,"wires":[["4d099c65.643ca4"],["a6f323c9.49f03"]]},{"id":"dec10d8c.8a406","type":"link out","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"check started condition","links":["48900a51.669a34","cc5825ee.345538","afa89ba1.0ac958"],"x":3355,"y":1660,"wires":[]},{"id":"48900a51.669a34","type":"link in","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"from start bt","links":["dec10d8c.8a406"],"x":3655,"y":440,"wires":[["be06a2ac.3acb"]]},{"id":"444161a4.dc192","type":"link out","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"to alarm reset","links":["336ce06.bbb4d2","acd735d4.e2d7e8","45a8da93.adc554","f9a8478f.e17058","3d731af8.9ce736","e8e79c58.905f4","ae775d7e.c2a5","5a51a2b2.89451c","5329bb01.48de44","bc0b77ef.4e5d68","559e0520.f5d26c","f08e6cef.d6613"],"x":375,"y":700,"wires":[]},{"id":"45a8da93.adc554","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"c24a972a.55d178","name":"from reset bt","links":["444161a4.dc192"],"x":535,"y":1060,"wires":[["c6afca16.b7ecd8"]]},{"id":"336ce06.bbb4d2","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"fe83ac2f.cc91b","name":"from reset bt","links":["444161a4.dc192"],"x":535,"y":1360,"wires":[["3653aa70.0217c6"]]},{"id":"3d731af8.9ce736","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"b9f16117.0762b","name":"from reset bt","links":["444161a4.dc192"],"x":555,"y":1680,"wires":[["74ddbe78.8ba9b"]]},{"id":"f9a8478f.e17058","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"931e3130.5243c","name":"from reset bt","links":["444161a4.dc192"],"x":535,"y":2040,"wires":[["913c858d.f57d88"]]},{"id":"e8e79c58.905f4","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"f9bde4a1.351138","name":"from reset bt","links":["444161a4.dc192"],"x":1595,"y":740,"wires":[["a82734ef.7e71a8"]]},{"id":"ae775d7e.c2a5","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"10dbb6b4.d290f9","name":"from reset bt","links":["444161a4.dc192"],"x":1595,"y":1040,"wires":[["983f3f66.f1821"]]},{"id":"acd735d4.e2d7e8","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"c4588388.3e091","name":"from reset bt","links":["444161a4.dc192"],"x":1595,"y":1320,"wires":[["d9590a0e.b42098"]]},{"id":"5a51a2b2.89451c","type":"link in","z":"c93f0a4.b6458f8","d":true,"g":"f0db4543.2ebc68","name":"from reset bt","links":["444161a4.dc192"],"x":1595,"y":1640,"wires":[["5f0987a4.0bc608"]]},{"id":"acad48b4.aa9bb8","type":"comment","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"Misc","info":"","x":150,"y":80,"wires":[]},{"id":"3d544398.14513c","type":"inject","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"display title blank","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"str","x":270,"y":320,"wires":[["7f1809de.437c08"]]},{"id":"7f1809de.437c08","type":"link out","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"to tittle","links":["8572d3e6.90925","924b70ed.f3b9e","ac82ecb6.ed181","20f1727a.c7cbae","eb2fb475.920138"],"x":735,"y":320,"wires":[]},{"id":"6f6a6e5a.dc9fe","type":"ui_text","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","group":"d2caa19c.b7ab3","order":0,"width":0,"height":0,"name":"","label":"Control Mode:","format":"{{msg.payload}}","layout":"row-spread","x":4140,"y":80,"wires":[]},{"id":"19138413.aac3dc","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"to tittle","links":["ac82ecb6.ed181","20f1727a.c7cbae","8572d3e6.90925","924b70ed.f3b9e","eb2fb475.920138"],"x":3075,"y":140,"wires":[]},{"id":"8572d3e6.90925","type":"link in","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"from text control","links":["7f1809de.437c08","19138413.aac3dc","9541876e.261498"],"x":3875,"y":80,"wires":[["6f6a6e5a.dc9fe"]]},{"id":"61fad3fb.d5995c","type":"ui_text","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","group":"68704283.9c276c","order":0,"width":0,"height":0,"name":"","label":"Control Mode:","format":"{{msg.payload}}","layout":"row-spread","x":2620,"y":680,"wires":[]},{"id":"924b70ed.f3b9e","type":"link in","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"from text control","links":["7f1809de.437c08","19138413.aac3dc","9541876e.261498"],"x":2475,"y":680,"wires":[["61fad3fb.d5995c"]]},{"id":"88a086f6.9a17a8","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"3c8c110d.30d28e","order":0,"width":0,"height":0,"name":"","label":"Control Mode: ","format":"{{msg.payload}}","layout":"row-spread","x":2660,"y":1220,"wires":[]},{"id":"ac82ecb6.ed181","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from text control","links":["7f1809de.437c08","19138413.aac3dc","9541876e.261498"],"x":2515,"y":1220,"wires":[["88a086f6.9a17a8"]]},{"id":"3abec5f6.567fca","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2580,"y":180,"wires":[["bb9fcbb1.acd158","882342da.e0942"]]},{"id":"f636fcc0.1f062","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2580,"y":220,"wires":[["bb9fcbb1.acd158","882342da.e0942"]]},{"id":"cd6e9204.002c","type":"switch","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","property":"buttonstart","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2390,"y":180,"wires":[["3abec5f6.567fca"],["f636fcc0.1f062"]]},{"id":"cc5825ee.345538","type":"link in","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from start bt","links":["dec10d8c.8a406"],"x":2295,"y":180,"wires":[["cd6e9204.002c"]]},{"id":"b3adb965.826e88","type":"switch","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","property":"buttonstart","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2850,"y":280,"wires":[["ffe7da55.d08728"],[]]},{"id":"afa89ba1.0ac958","type":"link in","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from start bt","links":["dec10d8c.8a406"],"x":2735,"y":280,"wires":[["b3adb965.826e88"]]},{"id":"20f1727a.c7cbae","type":"link in","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from text control","links":["7f1809de.437c08","19138413.aac3dc","9541876e.261498"],"x":2635,"y":100,"wires":[["e778f1fb.dab7a"]]},{"id":"15797935.2c3517","type":"inject","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"trigger","repeat":"","crontab":"","once":true,"onceDelay":"1","topic":"","payload":"true","payloadType":"bool","x":230,"y":120,"wires":[["bc0ce399.02a89"]]},{"id":"1132d44a.6458ac","type":"exec","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","command":"xdotool windowkill `xdotool getactivewindow`","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":350,"y":220,"wires":[[],[],[]]},{"id":"3d55b072.fee8a","type":"exec","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","command":"DISPLAY=:0 chromium-browser --check-for-update-interval=31536000 --noerrdialogs --disable-infobars --incognito --disable-pinch --overscroll-history-navigation=0 --no-context-menu --force-device-scale-factor=0.9 --kiosk http://localhost:1880/ui &","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":1240,"y":120,"wires":[[],[],[]]},{"id":"a9a19f0b.e4387","type":"link in","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"from spurious detect","links":["d2f96026.c8a67"],"x":175,"y":380,"wires":[["dc866e91.0791"]]},{"id":"dc866e91.0791","type":"switch","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"","property":"payload","propertyType":"msg","rules":[{"t":"true"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":370,"y":360,"wires":[["acd5efb4.37732"],[]]},{"id":"acd5efb4.37732","type":"change","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"Assisted Volume Control","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":580,"y":380,"wires":[["7f1809de.437c08"]]},{"id":"bc0ce399.02a89","type":"exec","z":"c93f0a4.b6458f8","g":"c66d817.a4bf98","command":"pkill chromium","addpay":false,"append":"","useSpawn":"false","timer":"","oldrc":false,"name":"","x":400,"y":120,"wires":[["3d55b072.fee8a"],[],[]]},{"id":"1cce7c19.122264","type":"inject","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"set_ie","payloadType":"global","x":3950,"y":120,"wires":[["d4ee76c2.406848"]]},{"id":"2e761b1e.3b33d4","type":"inject","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"set_rr","payloadType":"global","x":3950,"y":160,"wires":[["14b6f27a.0680de"]]},{"id":"b30e8503.bae818","type":"inject","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"set_o2","payloadType":"global","x":3960,"y":260,"wires":[["a3a1de63.6168a"]]},{"id":"8afc0c2f.7ebd3","type":"inject","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"set_peep","payloadType":"global","x":3960,"y":320,"wires":[["594534e6.26227c"]]},{"id":"aeb0e67.284c118","type":"inject","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"set_vol","payloadType":"global","x":3960,"y":380,"wires":[["46ffff78.efd13"]]},{"id":"da4b34b4.dea2a8","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to editor ie","links":["228d020d.2323ae","80be8ae4.110578"],"x":4295,"y":120,"wires":[]},{"id":"f567f44b.99e5f8","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to editor rr","links":["9363dff1.0480f","41601ef0.27069"],"x":4435,"y":200,"wires":[]},{"id":"44bb6cd7.eabb94","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to editor o2","links":["3157c4a6.447b7c"],"x":4295,"y":260,"wires":[]},{"id":"8ec9a87e.9c0688","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to editor peep","links":["df7a575e.bbefa8","a02deeb5.cd2c3"],"x":4295,"y":320,"wires":[]},{"id":"27f66bdb.e19e64","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to editor vol","links":["ff370422.368ae8","a476bca6.71bed"],"x":4295,"y":380,"wires":[]},{"id":"d53834f8.3a0f58","type":"inject","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"hiplimit","payloadType":"global","x":2400,"y":740,"wires":[["8d003b94.d35488"]]},{"id":"7f65951b.d8013c","type":"inject","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"loplimit","payloadType":"global","x":2400,"y":800,"wires":[["3ecd962a.400ffa"]]},{"id":"8d3be24f.3ef15","type":"inject","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":true,"onceDelay":"5","topic":"","payload":"o2tol","payloadType":"global","x":2390,"y":860,"wires":[["505bd194.795e4"]]},{"id":"3b558192.dbca0e","type":"link out","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"to editor hiplimit","links":["b9849927.030618","213e3105.c4a15e"],"x":2875,"y":740,"wires":[]},{"id":"d43b28c4.d5e518","type":"link out","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"to editor loplimit","links":["65fbf9ba.6943c8"],"x":2875,"y":800,"wires":[]},{"id":"67e71111.abb87","type":"link out","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"to editor o2tol","links":["76ae0556.2b69cc"],"x":2875,"y":860,"wires":[]},{"id":"fc39579.30271a8","type":"change","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","rules":[{"t":"set","p":"labelsilence","pt":"msg","to":"Mute","tot":"str"},{"t":"set","p":"coloursilence","pt":"msg","to":"teal","tot":"str"},{"t":"set","p":"buttonsilence","pt":"flow","to":"false","tot":"bool"},{"t":"set","p":"textcoloursilence","pt":"msg","to":"white","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":700,"wires":[["935cf2f3.9d7dc","81c98fbd.049c5","9989696a.f12908","15b1833.368aa7d","64754597.fd2eec"]]},{"id":"5cb0e669.cbfb38","type":"switch","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","property":"buttonsilence","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":1050,"y":700,"wires":[["fc39579.30271a8","fe052752.cd2f28"],["3d1f0add.9b81b6","3fe076d5.bf8d1a"]]},{"id":"3d1f0add.9b81b6","type":"change","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","rules":[{"t":"set","p":"labelsilence","pt":"msg","to":"Unmute","tot":"str"},{"t":"set","p":"coloursilence","pt":"msg","to":"lightblue","tot":"str"},{"t":"set","p":"buttonsilence","pt":"flow","to":"true","tot":"bool"},{"t":"set","p":"textcoloursilence","pt":"msg","to":"black","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":700,"y":740,"wires":[["935cf2f3.9d7dc","81c98fbd.049c5","9989696a.f12908","15b1833.368aa7d","64754597.fd2eec"]]},{"id":"6880e012.f5f81","type":"link in","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"from trigger","links":["7787792a.e68a58"],"x":495,"y":660,"wires":[["fc39579.30271a8"]]},{"id":"3fe076d5.bf8d1a","type":"link out","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"to buzzer control on","links":["bb5c1f85.cf818","61d887ea.962de8"],"x":1215,"y":740,"wires":[]},{"id":"fe052752.cd2f28","type":"link out","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"to buzzer control off","links":["538bc0cd.e45e9","c5a345cf.c8bcb8"],"x":1215,"y":700,"wires":[]},{"id":"6d36b8f.65e2148","type":"link out","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"to start routine","links":["3f279997.156ce6"],"x":3075,"y":1700,"wires":[]},{"id":"ad13b0ab.ddec8","type":"link out","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"to stop routine","links":["74f1b1bf.0efed"],"x":2935,"y":1660,"wires":[]},{"id":"66ef599a.f8bf88","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"to mandatory choice","links":["bf104aaf.068e68"],"x":3075,"y":180,"wires":[]},{"id":"48f24506.d4a15c","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"to assisted choice","links":["42697e6b.2e817"],"x":3075,"y":220,"wires":[]},{"id":"f32b7dba.79c0f","type":"link out","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"to trigger breathing update","links":["2e787e04.3ab6c2"],"x":4235,"y":520,"wires":[]},{"id":"a2086e34.000e4","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"to trigger mode update","links":["b03c1636.e2f108"],"x":3395,"y":340,"wires":[]},{"id":"82c0c7a8.453858","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"to updateDashPIP,IPP,PEEP","links":["41d85bab.453d44","e8cc7e57.e4712","95286c99.b34ef"],"x":2315,"y":1280,"wires":[["64e74245.d1db1c","58204aa6.2222c4","87b116f1.6375e8","83452254.beabd"]]},{"id":"478862cf.3a2dcc","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"toDashO2","links":["c69da0e5.62a6a"],"x":2515,"y":1500,"wires":[["b18760f.76f4ea"]]},{"id":"5bbb1b3e.8bfea4","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from bt Apply pg1","links":["ccca6409.7348f8","c491c224.5dc58"],"x":3395,"y":380,"wires":[]},{"id":"28062c69.42b0f4","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"pip_val","tot":"global"},{"t":"set","p":"find_pip_flag","pt":"global","to":"0","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2820,"y":1440,"wires":[["6e7a2c3c.1fcb44"]]},{"id":"6e7a2c3c.1fcb44","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"pip_val","pt":"global","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":3090,"y":1480,"wires":[["3a05ba0e.4b5376","f5f2f1f5.b637b","150f67f1.166e78"]]},{"id":"64e74245.d1db1c","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"ipp_val","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":2640,"y":1280,"wires":[["9669b1d0.84f3b"]]},{"id":"58204aa6.2222c4","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"peep_val","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":2640,"y":1380,"wires":[["31432c61.e943e4"]]},{"id":"3a05ba0e.4b5376","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"-1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":3270,"y":1480,"wires":[["16516c7.8049c94"],["eefcffa2.2d87a"]]},{"id":"16516c7.8049c94","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"-","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3460,"y":1440,"wires":[["eefcffa2.2d87a"]]},{"id":"7f013689.440ea8","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"-","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2980,"y":1260,"wires":[["1d3cf551.9c15bb"]]},{"id":"9669b1d0.84f3b","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"-1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2810,"y":1280,"wires":[["7f013689.440ea8"],["1d3cf551.9c15bb"]]},{"id":"97a7defe.06b28","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"-","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2980,"y":1360,"wires":[["116583c6.3a7c1c"]]},{"id":"31432c61.e943e4","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"eq","v":"-1","vt":"num"},{"t":"else"}],"checkall":"true","repair":false,"outputs":2,"x":2810,"y":1380,"wires":[["97a7defe.06b28"],["116583c6.3a7c1c"]]},{"id":"9c599275.de0d9","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"buttonstart","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2650,"y":1740,"wires":[["2c46bcb1.b5dfa4","2c26475f.c4bb78"]]},{"id":"19c8c56a.8a92db","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from button stopper","links":["50275c2e.be1384","51fec2bf.107ddc","941c3f2b.f7264","28a757db.62e9d8"],"x":2475,"y":1740,"wires":[["9c599275.de0d9"]]},{"id":"5ee8a7b7.947c18","type":"comment","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"auto stop","info":"","x":2640,"y":1700,"wires":[]},{"id":"50275c2e.be1384","type":"link out","z":"c93f0a4.b6458f8","d":true,"g":"c24a972a.55d178","name":"stop the button","links":["19c8c56a.8a92db"],"x":675,"y":980,"wires":[]},{"id":"51fec2bf.107ddc","type":"link out","z":"c93f0a4.b6458f8","d":true,"g":"fe83ac2f.cc91b","name":"stop the button","links":["19c8c56a.8a92db"],"x":675,"y":1280,"wires":[]},{"id":"941c3f2b.f7264","type":"link out","z":"c93f0a4.b6458f8","d":true,"g":"b9f16117.0762b","name":"stop the button","links":["19c8c56a.8a92db"],"x":695,"y":1600,"wires":[]},{"id":"28a757db.62e9d8","type":"link out","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"stop the button","links":["19c8c56a.8a92db"],"x":675,"y":1960,"wires":[]},{"id":"a83edc29.63963","type":"inject","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"true","payloadType":"bool","x":2470,"y":1680,"wires":[["9c599275.de0d9"]]},{"id":"cab9a302.c0112","type":"rbe","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":430,"y":2000,"wires":[["963641ab.4ca6c"]]},{"id":"bc2f80a6.399c6","type":"rbe","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":450,"y":1640,"wires":[["c5c47bf8.e30928"]]},{"id":"3871d89e.970ed8","type":"rbe","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":430,"y":1320,"wires":[["aceb5b99.dc9968"]]},{"id":"f0ec42e9.73c5a","type":"rbe","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":430,"y":1020,"wires":[["c7a22bc3.883aa8"]]},{"id":"7fa42f6e.f3fea","type":"rbe","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1490,"y":700,"wires":[["d9c9c68d.af24e8"]]},{"id":"3693e974.80f2a6","type":"rbe","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1490,"y":1000,"wires":[["f8438bc0.1162f8"]]},{"id":"fa572f66.c744a","type":"rbe","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1490,"y":1280,"wires":[["92acc86d.382028"]]},{"id":"7909596c.22e8e8","type":"rbe","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","func":"rbe","gap":"","start":"","inout":"out","property":"payload","x":1490,"y":1600,"wires":[["b5cd6d40.a2cb"]]},{"id":"2c26475f.c4bb78","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2900,"y":1800,"wires":[["ed091b89.e1cda8"]]},{"id":"ab4b1ffd.1d0b8","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2900,"y":1860,"wires":[["ed091b89.e1cda8"]]},{"id":"f08e6cef.d6613","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"enable start","links":["444161a4.dc192"],"x":2715,"y":1820,"wires":[["ab4b1ffd.1d0b8"]]},{"id":"1f87cb5.784c735","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"c9263dd0.4c6a3","order":2,"width":"2","height":"1","name":"","label":"I:E","format":"1: {{msg.payload}}","layout":"col-center","x":3010,"y":1620,"wires":[]},{"id":"80be8ae4.110578","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from I:E","links":["da4b34b4.dea2a8"],"x":2915,"y":1620,"wires":[["1f87cb5.784c735"]]},{"id":"eb9692d5.b4b17","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"c9263dd0.4c6a3","order":3,"width":"2","height":"1","name":"","label":"RR","format":"{{msg.payload}} bpm","layout":"col-center","x":2610,"y":1620,"wires":[]},{"id":"9363dff1.0480f","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from RR","links":["f567f44b.99e5f8"],"x":2515,"y":1620,"wires":[["eb9692d5.b4b17"]]},{"id":"641e023a.72c87c","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"c9263dd0.4c6a3","order":5,"width":"2","height":"1","name":"","label":"VTi","format":"{{msg.payload}} mL","layout":"col-center","x":2610,"y":1560,"wires":[]},{"id":"a476bca6.71bed","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from VT","links":["27f66bdb.e19e64"],"x":2515,"y":1560,"wires":[["641e023a.72c87c"]]},{"id":"d8164031.25272","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from btp3","links":["f82ef56.43ee908"],"x":2515,"y":1800,"wires":[["1bb4aad0.8d1c05","2c26475f.c4bb78"]]},{"id":"1bb4aad0.8d1c05","type":"delay","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","pauseType":"delay","timeout":"5","timeoutUnits":"seconds","rate":"1","nbRateUnits":"1","rateUnits":"second","randomFirst":"1","randomLast":"5","randomUnits":"seconds","drop":false,"x":2660,"y":1860,"wires":[["ab4b1ffd.1d0b8"]]},{"id":"9238e2a3.a29a3","type":"ui_template","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","group":"410c9e1f.ac8cf","name":"","order":1,"width":"9","height":"4","format":"<iframe src=\"http://localhost:3000/d-solo/isM3hhmgz/ventilator2?orgId=1&refresh=%201s&from=now-7s&to=now&panelId=2\" width=\"500\" height=\"200\" frameborder=\"0\"></iframe>","storeOutMessages":true,"fwdInMessages":true,"resendOnRefresh":true,"templateScope":"local","x":3360,"y":800,"wires":[[]]},{"id":"cc4db28b.b72e5","type":"inject","z":"c93f0a4.b6458f8","d":true,"g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3020,"y":800,"wires":[["205d6b9.df4d594"]]},{"id":"205d6b9.df4d594","type":"template","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"pressure","field":"template","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<iframe src=\"http://localhost:3000/d-solo/isM3hhmgz/ventilator2?orgId=1&refresh=%201s&from=now-7s&to=now&panelId=2\" width=\"500\" height=\"200\" frameborder=\"0\"></iframe>","output":"str","x":3180,"y":800,"wires":[["9238e2a3.a29a3"]]},{"id":"1c5beba5.0b7574","type":"inject","z":"c93f0a4.b6458f8","d":true,"g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3020,"y":840,"wires":[["b24b0358.7817d"]]},{"id":"b24b0358.7817d","type":"template","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"flowrate","field":"template","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<iframe src=\"http://localhost:3000/d-solo/isM3hhmgz/ventilator2?orgId=1&refresh=%201s&from=now-7s&to=now&panelId=3\" width=\"500\" height=\"200\" frameborder=\"0\"></iframe>","output":"str","x":3180,"y":840,"wires":[[]]},{"id":"8072b05d.43ac5","type":"inject","z":"c93f0a4.b6458f8","d":true,"g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":false,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3020,"y":880,"wires":[["5b6c4cd3.506184"]]},{"id":"5b6c4cd3.506184","type":"template","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"volume","field":"template","fieldType":"msg","format":"handlebars","syntax":"mustache","template":"<iframe src=\"http://localhost:3000/d-solo/isM3hhmgz/ventilator2?orgId=1&refresh=%201s&from=now-7s&to=now&panelId=4\" width=\"500\" height=\"200\" frameborder=\"0\"></iframe>","output":"str","x":3180,"y":880,"wires":[[]]},{"id":"d507341c.5e42d8","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from trigger","links":["7787792a.e68a58"],"x":2975,"y":1660,"wires":[["455eb296.ecb18c"]]},{"id":"10ff693e.17ae77","type":"function","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"Step_RR","func":"var val_before = parseInt(flow.get('RR_before'));\n\n// Maju\nif (val_before<msg.payload){\n    msg.payload=msg.payload+1;\n}\nelse{\n    msg.payload=msg.payload-1;\n}\n\nif(val_before==14 && msg.payload==16){\n    msg.payload = 15;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==15 && msg.payload==17){\n    msg.payload = 16;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==20 && msg.payload==22){\n    msg.payload = 25;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==25 && msg.payload==27){\n    msg.payload = 30;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\n// Mundur\nelse if (val_before==30 && msg.payload==28){\n    msg.payload = 25;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==25 && msg.payload==23){\n    msg.payload = 20;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==16 && msg.payload==14){\n    msg.payload = 15;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\nelse if (val_before==15 && msg.payload==13){\n    msg.payload = 14;\n    flow.set('RR_before',msg.payload);\n    return msg;\n}\n\nif(msg.payload > 30) {\n    msg.payload = 30;\n} else if (msg.payload <10){\n    msg.payload = 10;\n}\n\nflow.set('RR_before',msg.payload);\nreturn msg;","outputs":1,"noerr":0,"x":4280,"y":200,"wires":[["885b4c8e.11abe","f567f44b.99e5f8","c8ebeb4a.1c2ad8"]]},{"id":"619dd749.6a3348","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"calibrate","group":"7d9abf5c.20d99","order":1,"width":"4","height":"1","passthru":false,"label":"Calibration Page","tooltip":"","color":"","bgcolor":"","icon":"","payload":"Kalibrasi Flow Pressure","payloadType":"str","topic":"","x":3280,"y":260,"wires":[["80472590.d2d698"]]},{"id":"c22e7566.d7b8f8","type":"ui_toast","z":"c93f0a4.b6458f8","g":"c0edb341.079af","position":"top right","displayTime":"3","highlight":"","sendall":true,"outputs":0,"ok":"OK","cancel":"","raw":false,"topic":"","name":"","x":3020,"y":500,"wires":[]},{"id":"67941788.e83478","type":"switch","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","property":"buttoncal","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2430,"y":440,"wires":[["77d42fa5.646ae"],["2da04a7c.935486"]]},{"id":"77d42fa5.646ae","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"labelcal","pt":"msg","to":"Calibrate","tot":"str"},{"t":"set","p":"buttoncal","pt":"flow","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"Calibrating..","tot":"str"},{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2600,"y":420,"wires":[["c22e7566.d7b8f8","58c1336.f505fcc","78afa45b.f5d8cc"]]},{"id":"2da04a7c.935486","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"labelcal","pt":"msg","to":"Done","tot":"str"},{"t":"set","p":"buttoncal","pt":"flow","to":"true","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"Remove breathing circuit, then press DONE","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":2600,"y":460,"wires":[["c22e7566.d7b8f8"]]},{"id":"b2d15fd1.975d1","type":"link in","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"from trigger","links":["7787792a.e68a58"],"x":2315,"y":440,"wires":[[]]},{"id":"58c1336.f505fcc","type":"trigger","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","op1":"","op2":"Calibration done","op1type":"nul","op2type":"str","duration":"2","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":2820,"y":420,"wires":[["c22e7566.d7b8f8","5094d9d0.430828"]]},{"id":"5094d9d0.430828","type":"change","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"","rules":[{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":3020,"y":420,"wires":[[]]},{"id":"78afa45b.f5d8cc","type":"link out","z":"c93f0a4.b6458f8","g":"c0edb341.079af","name":"to calibration","links":["99780c07.fd3b6"],"x":2775,"y":380,"wires":[]},{"id":"14b6f27a.0680de","type":"function","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"","func":"var rr = parseInt(global.get(\"set_rr\")) + 1;\nflow.set(\"RR_before\", rr);\nmsg.payload = rr;\n\nreturn msg;","outputs":1,"noerr":0,"x":4110,"y":160,"wires":[["10ff693e.17ae77"]]},{"id":"c8ebeb4a.1c2ad8","type":"debug","z":"c93f0a4.b6458f8","g":"3da362dd.11252e","name":"debug set RR","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","statusVal":"","statusType":"auto","x":4460,"y":140,"wires":[]},{"id":"372f11d7.ad9ede","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":5,"width":"3","height":"1","name":"","label":"VTi_a","format":"{{msg.payload | number:2}} mL","layout":"col-center","x":3170,"y":1580,"wires":[]},{"id":"87b116f1.6375e8","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"vpeak_val_disp","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":2580,"y":1440,"wires":[["df0b9adf.4c7f88","28062c69.42b0f4"]]},{"id":"df0b9adf.4c7f88","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"vpeak_val","pt":"global","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2840,"y":1520,"wires":[["8f26c5ef.80cc18"]]},{"id":"766e145e.32fa1c","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":6,"width":"3","height":"1","name":"","label":"PIF","format":"{{msg.payload | number:2}} LPM","layout":"col-center","x":3010,"y":1940,"wires":[]},{"id":"83452254.beabd","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"payload","pt":"msg","to":"fpeak_val","tot":"global"}],"action":"","property":"","from":"","to":"","reg":false,"x":2480,"y":1940,"wires":[["2d760bb1.8d1804"]]},{"id":"2d760bb1.8d1804","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"fpeak_val","pt":"global","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2690,"y":1940,"wires":[["1df8558f.9c691a"]]},{"id":"17ccbd74.e7ba43","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"c9263dd0.4c6a3","order":1,"width":"1","height":"1","name":"","label":"Set Value:","format":"","layout":"row-center","x":2790,"y":1580,"wires":[]},{"id":"18e85e45.8d0352","type":"change","z":"c93f0a4.b6458f8","d":true,"g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"pip_val","pt":"global","to":"-1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":2890,"y":1220,"wires":[[]]},{"id":"f5f2f1f5.b637b","type":"debug","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"debug setValPIP","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"payload","targetType":"msg","x":3320,"y":1400,"wires":[]},{"id":"150f67f1.166e78","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"find_pip_flag","pt":"global","to":"1","tot":"num"}],"action":"","property":"","from":"","to":"","reg":false,"x":3350,"y":1540,"wires":[[]]},{"id":"b5d4feaa.9c5ca","type":"comment","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"Page 5","info":"Callibration Page Contain :\n- callibration procedure","x":2370,"y":2340,"wires":[]},{"id":"88bef651.41bf98","type":"ui_text","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","group":"f7d851f2.d077","order":0,"width":"9","height":"1","name":"Callibration Page","label":"","format":"Callibration Page","layout":"row-left","x":2662,"y":2325,"wires":[]},{"id":"1603f457.bdc07c","type":"ui_media","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","group":"2570d1e1.9b8bce","name":"GIF ","width":"9","height":"6","order":0,"category":"Kalibrasi","file":"hasil1.gif","layout":"center","showcontrols":true,"loop":true,"onstart":false,"scope":"local","tooltip":"","x":2862,"y":2325,"wires":[[]]},{"id":"6a1479e9.e854e8","type":"ui_button","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","group":"72f3f941.432c18","order":1,"width":"4","height":"1","passthru":false,"label":"Back","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":2870,"y":2416,"wires":[["1ac22011.84cef"]]},{"id":"a9c1c1ac.03224","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","events":"all","x":3389,"y":2416,"wires":[[]]},{"id":"c97879f.7824a88","type":"ui_button","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","group":"72f3f941.432c18","order":3,"width":"4","height":"1","passthru":false,"label":"{{labelcalpage}}","tooltip":"","color":"","bgcolor":"","icon":"","payload":"true","payloadType":"bool","topic":"","x":2863,"y":2462,"wires":[["f8ba8a68.388118"]]},{"id":"3e08ef37.7fee6","type":"change","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"Initial","rules":[{"t":"set","p":"buttoncalpage","pt":"flow","to":"false","tot":"bool"},{"t":"set","p":"payload","pt":"msg","to":"Lepas selang dari ventilator, kemudian tekan Next","tot":"str"},{"t":"set","p":"labelcalpage","pt":"msg","to":"Next","tot":"str"},{"t":"set","p":"calstate","pt":"flow","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2622,"y":2370,"wires":[["c97879f.7824a88","fca65259.0e27a"]]},{"id":"ee2bb3b9.7b58f","type":"link out","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"to calibration","links":["99780c07.fd3b6"],"x":2755,"y":2560,"wires":[]},{"id":"fca65259.0e27a","type":"ui_text","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","group":"fa3ccd5b.855f7","order":0,"width":"9","height":"1","name":"text display","label":"","format":"{{msg.payload}}","layout":"row-center","x":2882,"y":2370,"wires":[]},{"id":"1ac22011.84cef","type":"switch","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","property":"calstate","propertyType":"flow","rules":[{"t":"false"},{"t":"true"}],"checkall":"true","repair":false,"outputs":2,"x":3004,"y":2416,"wires":[["7a1a5966.048608"],["3e08ef37.7fee6"]]},{"id":"c7a5b443.bbc4b8","type":"change","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"back to use mode","rules":[{"t":"set","p":"payload","pt":"msg","to":"Ventilator Use Mode","tot":"str"}],"action":"","property":"","from":"","to":"","reg":false,"x":3190,"y":2414,"wires":[["a9c1c1ac.03224","3e08ef37.7fee6"]]},{"id":"b07c5ad.b5772a8","type":"switch","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","property":"buttoncalpage","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":2462,"y":2418,"wires":[["6cf4d61f.7ccda8"],["9b3a8cd1.743b5"]]},{"id":"f8ba8a68.388118","type":"switch","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","property":"calstate","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":3002,"y":2462,"wires":[["c7a5b443.bbc4b8"],["b07c5ad.b5772a8"]]},{"id":"9b3a8cd1.743b5","type":"change","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"Mid Process","rules":[{"t":"set","p":"payload","pt":"msg","to":"Apabila selang sudah dilepas, tekan tombol Callibrate","tot":"str"},{"t":"set","p":"labelcalpage","pt":"msg","to":"Calibrate","tot":"str"},{"t":"set","p":"buttoncalpage","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2642,"y":2416,"wires":[["fca65259.0e27a","c97879f.7824a88"]]},{"id":"6cf4d61f.7ccda8","type":"change","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"callibration process","rules":[{"t":"set","p":"payload","pt":"msg","to":"Proses kalibrasi, mohon tunggu","tot":"str"},{"t":"set","p":"enabled","pt":"msg","to":"false","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2670,"y":2460,"wires":[["c97879f.7824a88","4b5c751b.13657c","6a1479e9.e854e8","ee2bb3b9.7b58f","fca65259.0e27a"]]},{"id":"4b5c751b.13657c","type":"trigger","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","op1":"","op2":"Calibration done","op1type":"nul","op2type":"str","duration":"5","extend":false,"units":"s","reset":"","bytopic":"all","outputs":1,"x":2632,"y":2518,"wires":[["df3fd5bf.45dc08"]]},{"id":"df3fd5bf.45dc08","type":"change","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"Done Text","rules":[{"t":"set","p":"payload","pt":"msg","to":"proses kalibrasi selesai","tot":"str"},{"t":"set","p":"buttoncalpage","pt":"flow","to":"false","tot":"bool"},{"t":"set","p":"enabled","pt":"msg","to":"true","tot":"bool"},{"t":"set","p":"labelcalpage","pt":"msg","to":"Done","tot":"str"},{"t":"set","p":"calstate","pt":"flow","to":"true","tot":"bool"}],"action":"","property":"","from":"","to":"","reg":false,"x":2792,"y":2519,"wires":[["c97879f.7824a88","fca65259.0e27a","6a1479e9.e854e8"]]},{"id":"70fa15c9.c304bc","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"","group":"7710d010.a4402","order":3,"width":"3","height":"2","passthru":false,"label":"RESET","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","topicType":"str","x":240,"y":660,"wires":[["444161a4.dc192"]]},{"id":"64754597.fd2eec","type":"ui_button","z":"c93f0a4.b6458f8","g":"c0b40019.d397e","name":"silence bt","group":"7710d010.a4402","order":8,"width":"3","height":"2","passthru":false,"label":"{{labelsilence}}","tooltip":"","color":"{{textcoloursilence}}","bgcolor":"{{coloursilence}}","icon":"","payload":"","payloadType":"str","topic":"","x":900,"y":660,"wires":[["5cb0e669.cbfb38"]]},{"id":"eb315fff.90da9","type":"ui_button","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"","group":"7710d010.a4402","order":1,"width":"3","height":"1","passthru":false,"label":"High Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":980,"wires":[[]]},{"id":"67221dd1.655e24","type":"ui_button","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"","group":"7710d010.a4402","order":2,"width":"3","height":"1","passthru":false,"label":"Low Press","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":1280,"wires":[[]]},{"id":"5e764da5.6c1ce4","type":"ui_button","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"","group":"7710d010.a4402","order":4,"width":"3","height":"1","passthru":false,"label":"Fighting","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":980,"y":1800,"wires":[[]]},{"id":"6dfb3ea9.f0e98","type":"ui_button","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"","group":"7710d010.a4402","order":5,"width":"3","height":"1","passthru":false,"label":"Emergency","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":970,"y":2160,"wires":[[]]},{"id":"472482ea.0cabec","type":"ui_button","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"","group":"7710d010.a4402","order":6,"width":"3","height":"1","passthru":false,"label":"Spurious","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":660,"wires":[[]]},{"id":"75a42cbf.8166d4","type":"ui_button","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"","group":"7710d010.a4402","order":7,"width":"3","height":"1","passthru":false,"label":"Over Vol","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2020,"y":960,"wires":[[]]},{"id":"f21b9d81.44397","type":"ui_button","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"","group":"7710d010.a4402","order":9,"width":"3","height":"1","passthru":false,"label":"Low PEEP","tooltip":"","color":"","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1440,"wires":[[]]},{"id":"238ad949.46cc46","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"","group":"7710d010.a4402","order":10,"width":"3","height":"1","passthru":false,"label":"Low/High O2","tooltip":"","color":"{{textcolour}}","bgcolor":"{{colour}}","icon":"","payload":"","payloadType":"str","topic":"","x":2030,"y":1760,"wires":[[]]},{"id":"eb2fb475.920138","type":"link in","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"from text control","links":["7f1809de.437c08","19138413.aac3dc","9541876e.261498"],"x":2475,"y":2360,"wires":[["3e08ef37.7fee6"]]},{"id":"7a1a5966.048608","type":"switch","z":"c93f0a4.b6458f8","g":"5c8932c0.69648c","name":"","property":"buttoncalpage","propertyType":"flow","rules":[{"t":"true"},{"t":"false"}],"checkall":"true","repair":false,"outputs":2,"x":3149,"y":2378,"wires":[["3e08ef37.7fee6"],["c7a5b443.bbc4b8"]]},{"id":"618983e2.16c35c","type":"ui_ui_control","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","events":"all","x":3440,"y":680,"wires":[["389753b7.d4041c"]]},{"id":"1c238410.44832c","type":"inject","z":"c93f0a4.b6458f8","d":true,"g":"f0d1dfc.c11442","name":"","repeat":"","crontab":"","once":true,"onceDelay":0.1,"topic":"","payload":"","payloadType":"date","x":3030,"y":680,"wires":[["b528f391.506c6"]]},{"id":"b528f391.506c6","type":"template","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"init chart","field":"payload","fieldType":"msg","format":"json","syntax":"mustache","template":"{\n    \"group\": \n    {\n        \"hide\": \n        [\n            \"Monitoring_showchart\"\n        ], \n        \"show\": \n        [\n            \"Monitoring_startchart\"\n        ], \n        \"focus\": true\n    }\n}","output":"str","x":3240,"y":680,"wires":[["618983e2.16c35c"]]},{"id":"2765e91d.b62e66","type":"ui_button","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"","group":"5985a320.da364c","order":1,"width":"3","height":"1","passthru":false,"label":"show chart","tooltip":"","color":"","bgcolor":"","icon":"","payload":"","payloadType":"str","topic":"","x":3370,"y":740,"wires":[[]]},{"id":"c47486ac.af3588","type":"ui_text","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","group":"5985a320.da364c","order":2,"width":"6","height":"1","name":"","label":"xx","format":"{{msg.payload}}xx","layout":"row-right","x":3620,"y":740,"wires":[]},{"id":"389753b7.d4041c","type":"debug","z":"c93f0a4.b6458f8","g":"f0d1dfc.c11442","name":"test chart","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":3600,"y":680,"wires":[]},{"id":"bc4bc081.948c","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"breath_count","pt":"global","to":"$globalContext(\"breath_count\")+1","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3230,"y":1940,"wires":[["2d22cd71.4ad3c2"]]},{"id":"fe6d92f5.64197","type":"comment","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"Breath Counter","info":"Sudah loop nafas ke berapa semenjak dinyalakan?","x":3200,"y":1900,"wires":[]},{"id":"e0e6bf45.a0b17","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"breath_count","pt":"global","to":"0","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3230,"y":2100,"wires":[["2d22cd71.4ad3c2"]]},{"id":"eaa6c9e8.712f78","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"Reset Global breath_count","links":["af3ddcff.d07c9","f82ef56.43ee908"],"x":2955,"y":2100,"wires":[["e0e6bf45.a0b17"]]},{"id":"3a24a061.8f83","type":"comment","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"Reset Global breath_count","info":"Reset global breath_count setiap tekan tombol next","x":3230,"y":2060,"wires":[]},{"id":"af3ddcff.d07c9","type":"link out","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","links":["eaa6c9e8.712f78"],"x":3555,"y":1800,"wires":[]},{"id":"2d22cd71.4ad3c2","type":"function","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","func":"msg.payload = global.get(\"breath_count\")\nreturn msg;","outputs":1,"noerr":0,"x":3480,"y":2020,"wires":[["5583cdaf.e3b674"]]},{"id":"5583cdaf.e3b674","type":"debug","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","active":false,"tosidebar":true,"console":false,"tostatus":false,"complete":"true","targetType":"full","x":3630,"y":2020,"wires":[]},{"id":"8f26c5ef.80cc18","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":3050,"y":1520,"wires":[["372f11d7.ad9ede"]]},{"id":"1df8558f.9c691a","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"payload","propertyType":"msg","rules":[{"t":"gt","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":1,"x":2870,"y":1940,"wires":[["766e145e.32fa1c","9f22981c.595f88"]]},{"id":"9f22981c.595f88","type":"switch","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","property":"mode_on_off","propertyType":"global","rules":[{"t":"eq","v":"1","vt":"num"},{"t":"eq","v":"0","vt":"num"}],"checkall":"true","repair":false,"outputs":2,"x":2930,"y":2020,"wires":[["bc4bc081.948c","43d25982.cdd858"],["e0e6bf45.a0b17"]]},{"id":"43d25982.cdd858","type":"change","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","rules":[{"t":"set","p":"last_cor","pt":"global","to":"$globalContext(\"correction_factor\")\t","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":3210,"y":1980,"wires":[[]]},{"id":"b2fd4cdc.68c9","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":9,"width":"4","height":"1","name":"","label":"I:E","format":"{{msg.payload}}","layout":"col-center","x":3870,"y":1960,"wires":[]},{"id":"56508b4f.a97cc4","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from VT","links":["a9a7dc6a.ba9d7"],"x":3755,"y":1960,"wires":[["b2fd4cdc.68c9"]]},{"id":"4e99d555.1a272c","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"20600b38.b92fc4","order":7,"width":"4","height":"1","name":"","label":"RR","format":"{{msg.payload}}","layout":"col-center","x":3870,"y":1920,"wires":[]},{"id":"df55358f.597a88","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"from VT","links":["a9a7dc6a.ba9d7"],"x":3755,"y":1920,"wires":[["4e99d555.1a272c"]]},{"id":"25ce0b68.df78b4","type":"ui_text","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","group":"c9263dd0.4c6a3","order":6,"width":"2","height":"1","name":"","label":"PEEP","format":"{{msg.payload}} cmH2O","layout":"col-center","x":2820,"y":1620,"wires":[]},{"id":"a02deeb5.cd2c3","type":"link in","z":"c93f0a4.b6458f8","g":"b631edd8.a3bf3","name":"","links":["8ec9a87e.9c0688"],"x":2725,"y":1620,"wires":[["25ce0b68.df78b4"]]},{"id":"40dad58b.320a3c","type":"comment","z":"c93f0a4.b6458f8","g":"c24a972a.55d178","name":"Alarm HighPressure","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":450,"y":1120,"wires":[]},{"id":"4fa25b5f.5a7db4","type":"comment","z":"c93f0a4.b6458f8","g":"fe83ac2f.cc91b","name":"Alarm Low Pressure","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":430,"y":1440,"wires":[]},{"id":"2bc7fe4a.532662","type":"comment","z":"c93f0a4.b6458f8","g":"b9f16117.0762b","name":"Alarm patient fighting","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":480,"y":1760,"wires":[]},{"id":"76c78425.cd5e8c","type":"comment","z":"c93f0a4.b6458f8","g":"931e3130.5243c","name":"Alarm emergency button","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":470,"y":2120,"wires":[]},{"id":"4ffefc26.ad52a4","type":"comment","z":"c93f0a4.b6458f8","g":"f9bde4a1.351138","name":"Alarm Spurious","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":1460,"y":820,"wires":[]},{"id":"ad766328.f098e","type":"comment","z":"c93f0a4.b6458f8","g":"10dbb6b4.d290f9","name":"Alarm over volume","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":1470,"y":1120,"wires":[]},{"id":"118055e6.fff6aa","type":"comment","z":"c93f0a4.b6458f8","g":"c4588388.3e091","name":"Alarm Low PEEP","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":1460,"y":1420,"wires":[]},{"id":"90857259.55b06","type":"comment","z":"c93f0a4.b6458f8","g":"f0db4543.2ebc68","name":"Alarm Low High Oxygen","info":"Display Alarm \nbutton will change colour if alarm detected\n","x":1460,"y":1760,"wires":[]}]